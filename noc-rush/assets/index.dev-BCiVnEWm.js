var ah=Object.defineProperty;var ch=(e,t,r)=>t in e?ah(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ct=(e,t,r)=>ch(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function r(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function i(o){if(o.ep)return;o.ep=!0;const h=r(o);fetch(o.href,h)}})();function Ha(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fa={exports:{}},Ms={},$a={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bi=Symbol.for("react.element"),uh=Symbol.for("react.portal"),hh=Symbol.for("react.fragment"),dh=Symbol.for("react.strict_mode"),fh=Symbol.for("react.profiler"),ph=Symbol.for("react.provider"),_h=Symbol.for("react.context"),vh=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),mh=Symbol.for("react.memo"),Sh=Symbol.for("react.lazy"),ml=Symbol.iterator;function yh(e){return e===null||typeof e!="object"?null:(e=ml&&e[ml]||e["@@iterator"],typeof e=="function"?e:null)}var za={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wa=Object.assign,Ua={};function Br(e,t,r){this.props=e,this.context=t,this.refs=Ua,this.updater=r||za}Br.prototype.isReactComponent={};Br.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Br.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Va(){}Va.prototype=Br.prototype;function ko(e,t,r){this.props=e,this.context=t,this.refs=Ua,this.updater=r||za}var bo=ko.prototype=new Va;bo.constructor=ko;Wa(bo,Br.prototype);bo.isPureReactComponent=!0;var Sl=Array.isArray,Ka=Object.prototype.hasOwnProperty,Eo={current:null},Ga={key:!0,ref:!0,__self:!0,__source:!0};function qa(e,t,r){var i,o={},h=null,p=null;if(t!=null)for(i in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(h=""+t.key),t)Ka.call(t,i)&&!Ga.hasOwnProperty(i)&&(o[i]=t[i]);var s=arguments.length-2;if(s===1)o.children=r;else if(1<s){for(var u=Array(s),d=0;d<s;d++)u[d]=arguments[d+2];o.children=u}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)o[i]===void 0&&(o[i]=s[i]);return{$$typeof:bi,type:e,key:h,ref:p,props:o,_owner:Eo.current}}function wh(e,t){return{$$typeof:bi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lo(e){return typeof e=="object"&&e!==null&&e.$$typeof===bi}function Ch(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var yl=/\/+/g;function Zs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ch(""+e.key):t.toString(36)}function qi(e,t,r,i,o){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(h){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case bi:case uh:p=!0}}if(p)return p=e,o=o(p),e=i===""?"."+Zs(p,0):i,Sl(o)?(r="",e!=null&&(r=e.replace(yl,"$&/")+"/"),qi(o,t,r,"",function(d){return d})):o!=null&&(Lo(o)&&(o=wh(o,r+(!o.key||p&&p.key===o.key?"":(""+o.key).replace(yl,"$&/")+"/")+e)),t.push(o)),1;if(p=0,i=i===""?".":i+":",Sl(e))for(var s=0;s<e.length;s++){h=e[s];var u=i+Zs(h,s);p+=qi(h,t,r,u,o)}else if(u=yh(e),typeof u=="function")for(e=u.call(e),s=0;!(h=e.next()).done;)h=h.value,u=i+Zs(h,s++),p+=qi(h,t,r,u,o);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function Mi(e,t,r){if(e==null)return e;var i=[],o=0;return qi(e,i,"","",function(h){return t.call(r,h,o++)}),i}function xh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Te={current:null},Xi={transition:null},kh={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:Xi,ReactCurrentOwner:Eo};function Xa(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Mi,forEach:function(e,t,r){Mi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Mi(e,function(){t++}),t},toArray:function(e){return Mi(e,function(t){return t})||[]},only:function(e){if(!Lo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Z.Component=Br;Z.Fragment=hh;Z.Profiler=fh;Z.PureComponent=ko;Z.StrictMode=dh;Z.Suspense=gh;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kh;Z.act=Xa;Z.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Wa({},e.props),o=e.key,h=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,p=Eo.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)Ka.call(t,u)&&!Ga.hasOwnProperty(u)&&(i[u]=t[u]===void 0&&s!==void 0?s[u]:t[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){s=Array(u);for(var d=0;d<u;d++)s[d]=arguments[d+2];i.children=s}return{$$typeof:bi,type:e.type,key:o,ref:h,props:i,_owner:p}};Z.createContext=function(e){return e={$$typeof:_h,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ph,_context:e},e.Consumer=e};Z.createElement=qa;Z.createFactory=function(e){var t=qa.bind(null,e);return t.type=e,t};Z.createRef=function(){return{current:null}};Z.forwardRef=function(e){return{$$typeof:vh,render:e}};Z.isValidElement=Lo;Z.lazy=function(e){return{$$typeof:Sh,_payload:{_status:-1,_result:e},_init:xh}};Z.memo=function(e,t){return{$$typeof:mh,type:e,compare:t===void 0?null:t}};Z.startTransition=function(e){var t=Xi.transition;Xi.transition={};try{e()}finally{Xi.transition=t}};Z.unstable_act=Xa;Z.useCallback=function(e,t){return Te.current.useCallback(e,t)};Z.useContext=function(e){return Te.current.useContext(e)};Z.useDebugValue=function(){};Z.useDeferredValue=function(e){return Te.current.useDeferredValue(e)};Z.useEffect=function(e,t){return Te.current.useEffect(e,t)};Z.useId=function(){return Te.current.useId()};Z.useImperativeHandle=function(e,t,r){return Te.current.useImperativeHandle(e,t,r)};Z.useInsertionEffect=function(e,t){return Te.current.useInsertionEffect(e,t)};Z.useLayoutEffect=function(e,t){return Te.current.useLayoutEffect(e,t)};Z.useMemo=function(e,t){return Te.current.useMemo(e,t)};Z.useReducer=function(e,t,r){return Te.current.useReducer(e,t,r)};Z.useRef=function(e){return Te.current.useRef(e)};Z.useState=function(e){return Te.current.useState(e)};Z.useSyncExternalStore=function(e,t,r){return Te.current.useSyncExternalStore(e,t,r)};Z.useTransition=function(){return Te.current.useTransition()};Z.version="18.3.1";$a.exports=Z;var fe=$a.exports;const bh=Ha(fe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eh=fe,Lh=Symbol.for("react.element"),Rh=Symbol.for("react.fragment"),Dh=Object.prototype.hasOwnProperty,Th=Eh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mh={key:!0,ref:!0,__self:!0,__source:!0};function Qa(e,t,r){var i,o={},h=null,p=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(p=t.ref);for(i in t)Dh.call(t,i)&&!Mh.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:Lh,type:e,key:h,ref:p,props:o,_owner:Th.current}}Ms.Fragment=Rh;Ms.jsx=Qa;Ms.jsxs=Qa;Fa.exports=Ms;var A=Fa.exports,Rn={},Ya={exports:{}},ze={},Ja={exports:{}},Za={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,M){var P=E.length;E.push(M);e:for(;0<P;){var I=P-1>>>1,F=E[I];if(0<o(F,M))E[I]=M,E[P]=F,P=I;else break e}}function r(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var M=E[0],P=E.pop();if(P!==M){E[0]=P;e:for(var I=0,F=E.length,N=F>>>1;I<N;){var V=2*(I+1)-1,G=E[V],Y=V+1,L=E[Y];if(0>o(G,P))Y<F&&0>o(L,G)?(E[I]=L,E[Y]=P,I=Y):(E[I]=G,E[V]=P,I=V);else if(Y<F&&0>o(L,P))E[I]=L,E[Y]=P,I=Y;else break e}}return M}function o(E,M){var P=E.sortIndex-M.sortIndex;return P!==0?P:E.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var p=Date,s=p.now();e.unstable_now=function(){return p.now()-s}}var u=[],d=[],S=1,f=null,g=3,C=!1,w=!1,y=!1,c=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,n=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function a(E){for(var M=r(d);M!==null;){if(M.callback===null)i(d);else if(M.startTime<=E)i(d),M.sortIndex=M.expirationTime,t(u,M);else break;M=r(d)}}function _(E){if(y=!1,a(E),!w)if(r(u)!==null)w=!0,U(m);else{var M=r(d);M!==null&&W(_,M.startTime-E)}}function m(E,M){w=!1,y&&(y=!1,l(v),v=-1),C=!0;var P=g;try{for(a(M),f=r(u);f!==null&&(!(f.expirationTime>M)||E&&!R());){var I=f.callback;if(typeof I=="function"){f.callback=null,g=f.priorityLevel;var F=I(f.expirationTime<=M);M=e.unstable_now(),typeof F=="function"?f.callback=F:f===r(u)&&i(u),a(M)}else i(u);f=r(u)}if(f!==null)var N=!0;else{var V=r(d);V!==null&&W(_,V.startTime-M),N=!1}return N}finally{f=null,g=P,C=!1}}var x=!1,b=null,v=-1,k=5,D=-1;function R(){return!(e.unstable_now()-D<k)}function T(){if(b!==null){var E=e.unstable_now();D=E;var M=!0;try{M=b(!0,E)}finally{M?B():(x=!1,b=null)}}else x=!1}var B;if(typeof n=="function")B=function(){n(T)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,H=j.port2;j.port1.onmessage=T,B=function(){H.postMessage(null)}}else B=function(){c(T,0)};function U(E){b=E,x||(x=!0,B())}function W(E,M){v=c(function(){E(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){w||C||(w=!0,U(m))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(E){switch(g){case 1:case 2:case 3:var M=3;break;default:M=g}var P=g;g=M;try{return E()}finally{g=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,M){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var P=g;g=E;try{return M()}finally{g=P}},e.unstable_scheduleCallback=function(E,M,P){var I=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?I+P:I):P=I,E){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=P+F,E={id:S++,callback:M,priorityLevel:E,startTime:P,expirationTime:F,sortIndex:-1},P>I?(E.sortIndex=P,t(d,E),r(u)===null&&E===r(d)&&(y?(l(v),v=-1):y=!0,W(_,P-I))):(E.sortIndex=F,t(u,E),w||C||(w=!0,U(m))),E},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(E){var M=g;return function(){var P=g;g=M;try{return E.apply(this,arguments)}finally{g=P}}}})(Za);Ja.exports=Za;var Ah=Ja.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ph=fe,$e=Ah;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ec=new Set,ai={};function ir(e,t){Er(e,t),Er(e+"Capture",t)}function Er(e,t){for(ai[e]=t,e=0;e<t.length;e++)ec.add(t[e])}var _t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dn=Object.prototype.hasOwnProperty,Bh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wl={},Cl={};function Ih(e){return Dn.call(Cl,e)?!0:Dn.call(wl,e)?!1:Bh.test(e)?Cl[e]=!0:(wl[e]=!0,!1)}function Oh(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Nh(e,t,r,i){if(t===null||typeof t>"u"||Oh(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Me(e,t,r,i,o,h,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=p}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xe[e]=new Me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xe[t]=new Me(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xe[e]=new Me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xe[e]=new Me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xe[e]=new Me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xe[e]=new Me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xe[e]=new Me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xe[e]=new Me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xe[e]=new Me(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ro=/[\-:]([a-z])/g;function Do(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ro,Do);xe[t]=new Me(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ro,Do);xe[t]=new Me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ro,Do);xe[t]=new Me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xe[e]=new Me(e,1,!1,e.toLowerCase(),null,!1,!1)});xe.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xe[e]=new Me(e,1,!1,e.toLowerCase(),null,!0,!0)});function To(e,t,r,i){var o=xe.hasOwnProperty(t)?xe[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Nh(t,r,o,i)&&(r=null),i||o===null?Ih(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,i=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var St=Ph.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ai=Symbol.for("react.element"),ar=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),Mo=Symbol.for("react.strict_mode"),Tn=Symbol.for("react.profiler"),tc=Symbol.for("react.provider"),rc=Symbol.for("react.context"),Ao=Symbol.for("react.forward_ref"),Mn=Symbol.for("react.suspense"),An=Symbol.for("react.suspense_list"),Po=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),ic=Symbol.for("react.offscreen"),xl=Symbol.iterator;function $r(e){return e===null||typeof e!="object"?null:(e=xl&&e[xl]||e["@@iterator"],typeof e=="function"?e:null)}var he=Object.assign,en;function Xr(e){if(en===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);en=t&&t[1]||""}return`
`+en+e}var tn=!1;function rn(e,t){if(!e||tn)return"";tn=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var i=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){i=d}e.call(t.prototype)}else{try{throw Error()}catch(d){i=d}e()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),h=i.stack.split(`
`),p=o.length-1,s=h.length-1;1<=p&&0<=s&&o[p]!==h[s];)s--;for(;1<=p&&0<=s;p--,s--)if(o[p]!==h[s]){if(p!==1||s!==1)do if(p--,s--,0>s||o[p]!==h[s]){var u=`
`+o[p].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=p&&0<=s);break}}}finally{tn=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Xr(e):""}function jh(e){switch(e.tag){case 5:return Xr(e.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 2:case 15:return e=rn(e.type,!1),e;case 11:return e=rn(e.type.render,!1),e;case 1:return e=rn(e.type,!0),e;default:return""}}function Pn(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cr:return"Fragment";case ar:return"Portal";case Tn:return"Profiler";case Mo:return"StrictMode";case Mn:return"Suspense";case An:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rc:return(e.displayName||"Context")+".Consumer";case tc:return(e._context.displayName||"Context")+".Provider";case Ao:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Po:return t=e.displayName||null,t!==null?t:Pn(e.type)||"Memo";case kt:t=e._payload,e=e._init;try{return Pn(e(t))}catch{}}return null}function Hh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pn(t);case 8:return t===Mo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ht(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fh(e){var t=sc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(p){i=""+p,h.call(this,p)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(p){i=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pi(e){e._valueTracker||(e._valueTracker=Fh(e))}function nc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=sc(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function ls(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bn(e,t){var r=t.checked;return he({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function kl(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Ht(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function oc(e,t){t=t.checked,t!=null&&To(e,"checked",t,!1)}function In(e,t){oc(e,t);var r=Ht(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?On(e,t.type,r):t.hasOwnProperty("defaultValue")&&On(e,t.type,Ht(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function On(e,t,r){(t!=="number"||ls(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Qr=Array.isArray;function yr(e,t,r,i){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Ht(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Nn(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return he({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function El(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(K(92));if(Qr(r)){if(1<r.length)throw Error(K(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ht(r)}}function lc(e,t){var r=Ht(t.value),i=Ht(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function Ll(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ac(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ac(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bi,cc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ci(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$h=["Webkit","ms","Moz","O"];Object.keys(Zr).forEach(function(e){$h.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zr[t]=Zr[e]})});function uc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zr.hasOwnProperty(e)&&Zr[e]?(""+t).trim():t+"px"}function hc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=uc(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,o):e[r]=o}}var zh=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hn(e,t){if(t){if(zh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Fn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $n=null;function Bo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zn=null,wr=null,Cr=null;function Rl(e){if(e=Ri(e)){if(typeof zn!="function")throw Error(K(280));var t=e.stateNode;t&&(t=Os(t),zn(e.stateNode,e.type,t))}}function dc(e){wr?Cr?Cr.push(e):Cr=[e]:wr=e}function fc(){if(wr){var e=wr,t=Cr;if(Cr=wr=null,Rl(e),t)for(e=0;e<t.length;e++)Rl(t[e])}}function pc(e,t){return e(t)}function _c(){}var sn=!1;function vc(e,t,r){if(sn)return e(t,r);sn=!0;try{return pc(e,t,r)}finally{sn=!1,(wr!==null||Cr!==null)&&(_c(),fc())}}function ui(e,t){var r=e.stateNode;if(r===null)return null;var i=Os(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(K(231,t,typeof r));return r}var Wn=!1;if(_t)try{var zr={};Object.defineProperty(zr,"passive",{get:function(){Wn=!0}}),window.addEventListener("test",zr,zr),window.removeEventListener("test",zr,zr)}catch{Wn=!1}function Wh(e,t,r,i,o,h,p,s,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(S){this.onError(S)}}var ei=!1,as=null,cs=!1,Un=null,Uh={onError:function(e){ei=!0,as=e}};function Vh(e,t,r,i,o,h,p,s,u){ei=!1,as=null,Wh.apply(Uh,arguments)}function Kh(e,t,r,i,o,h,p,s,u){if(Vh.apply(this,arguments),ei){if(ei){var d=as;ei=!1,as=null}else throw Error(K(198));cs||(cs=!0,Un=d)}}function sr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dl(e){if(sr(e)!==e)throw Error(K(188))}function Gh(e){var t=e.alternate;if(!t){if(t=sr(e),t===null)throw Error(K(188));return t!==e?null:e}for(var r=e,i=t;;){var o=r.return;if(o===null)break;var h=o.alternate;if(h===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===h.child){for(h=o.child;h;){if(h===r)return Dl(o),e;if(h===i)return Dl(o),t;h=h.sibling}throw Error(K(188))}if(r.return!==i.return)r=o,i=h;else{for(var p=!1,s=o.child;s;){if(s===r){p=!0,r=o,i=h;break}if(s===i){p=!0,i=o,r=h;break}s=s.sibling}if(!p){for(s=h.child;s;){if(s===r){p=!0,r=h,i=o;break}if(s===i){p=!0,i=h,r=o;break}s=s.sibling}if(!p)throw Error(K(189))}}if(r.alternate!==i)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?e:t}function mc(e){return e=Gh(e),e!==null?Sc(e):null}function Sc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sc(e);if(t!==null)return t;e=e.sibling}return null}var yc=$e.unstable_scheduleCallback,Tl=$e.unstable_cancelCallback,qh=$e.unstable_shouldYield,Xh=$e.unstable_requestPaint,pe=$e.unstable_now,Qh=$e.unstable_getCurrentPriorityLevel,Io=$e.unstable_ImmediatePriority,wc=$e.unstable_UserBlockingPriority,us=$e.unstable_NormalPriority,Yh=$e.unstable_LowPriority,Cc=$e.unstable_IdlePriority,As=null,at=null;function Jh(e){if(at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(As,e,void 0,(e.current.flags&128)===128)}catch{}}var tt=Math.clz32?Math.clz32:td,Zh=Math.log,ed=Math.LN2;function td(e){return e>>>=0,e===0?32:31-(Zh(e)/ed|0)|0}var Ii=64,Oi=4194304;function Yr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hs(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,o=e.suspendedLanes,h=e.pingedLanes,p=r&268435455;if(p!==0){var s=p&~o;s!==0?i=Yr(s):(h&=p,h!==0&&(i=Yr(h)))}else p=r&~o,p!==0?i=Yr(p):h!==0&&(i=Yr(h));if(i===0)return 0;if(t!==0&&t!==i&&!(t&o)&&(o=i&-i,h=t&-t,o>=h||o===16&&(h&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-tt(t),o=1<<r,i|=e[r],t&=~o;return i}function rd(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function id(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,h=e.pendingLanes;0<h;){var p=31-tt(h),s=1<<p,u=o[p];u===-1?(!(s&r)||s&i)&&(o[p]=rd(s,t)):u<=t&&(e.expiredLanes|=s),h&=~s}}function Vn(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xc(){var e=Ii;return Ii<<=1,!(Ii&4194240)&&(Ii=64),e}function nn(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ei(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tt(t),e[t]=r}function sd(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-tt(r),h=1<<o;t[o]=0,i[o]=-1,e[o]=-1,r&=~h}}function Oo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-tt(r),o=1<<i;o&t|e[i]&t&&(e[i]|=t),r&=~o}}var ie=0;function kc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bc,No,Ec,Lc,Rc,Kn=!1,Ni=[],Mt=null,At=null,Pt=null,hi=new Map,di=new Map,Et=[],nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ml(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":hi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(t.pointerId)}}function Wr(e,t,r,i,o,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:h,targetContainers:[o]},t!==null&&(t=Ri(t),t!==null&&No(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function od(e,t,r,i,o){switch(t){case"focusin":return Mt=Wr(Mt,e,t,r,i,o),!0;case"dragenter":return At=Wr(At,e,t,r,i,o),!0;case"mouseover":return Pt=Wr(Pt,e,t,r,i,o),!0;case"pointerover":var h=o.pointerId;return hi.set(h,Wr(hi.get(h)||null,e,t,r,i,o)),!0;case"gotpointercapture":return h=o.pointerId,di.set(h,Wr(di.get(h)||null,e,t,r,i,o)),!0}return!1}function Dc(e){var t=Gt(e.target);if(t!==null){var r=sr(t);if(r!==null){if(t=r.tag,t===13){if(t=gc(r),t!==null){e.blockedOn=t,Rc(e.priority,function(){Ec(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Gn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);$n=i,r.target.dispatchEvent(i),$n=null}else return t=Ri(r),t!==null&&No(t),e.blockedOn=r,!1;t.shift()}return!0}function Al(e,t,r){Qi(e)&&r.delete(t)}function ld(){Kn=!1,Mt!==null&&Qi(Mt)&&(Mt=null),At!==null&&Qi(At)&&(At=null),Pt!==null&&Qi(Pt)&&(Pt=null),hi.forEach(Al),di.forEach(Al)}function Ur(e,t){e.blockedOn===t&&(e.blockedOn=null,Kn||(Kn=!0,$e.unstable_scheduleCallback($e.unstable_NormalPriority,ld)))}function fi(e){function t(o){return Ur(o,e)}if(0<Ni.length){Ur(Ni[0],e);for(var r=1;r<Ni.length;r++){var i=Ni[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Mt!==null&&Ur(Mt,e),At!==null&&Ur(At,e),Pt!==null&&Ur(Pt,e),hi.forEach(t),di.forEach(t),r=0;r<Et.length;r++)i=Et[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Et.length&&(r=Et[0],r.blockedOn===null);)Dc(r),r.blockedOn===null&&Et.shift()}var xr=St.ReactCurrentBatchConfig,ds=!0;function ad(e,t,r,i){var o=ie,h=xr.transition;xr.transition=null;try{ie=1,jo(e,t,r,i)}finally{ie=o,xr.transition=h}}function cd(e,t,r,i){var o=ie,h=xr.transition;xr.transition=null;try{ie=4,jo(e,t,r,i)}finally{ie=o,xr.transition=h}}function jo(e,t,r,i){if(ds){var o=Gn(e,t,r,i);if(o===null)_n(e,t,i,fs,r),Ml(e,i);else if(od(o,e,t,r,i))i.stopPropagation();else if(Ml(e,i),t&4&&-1<nd.indexOf(e)){for(;o!==null;){var h=Ri(o);if(h!==null&&bc(h),h=Gn(e,t,r,i),h===null&&_n(e,t,i,fs,r),h===o)break;o=h}o!==null&&i.stopPropagation()}else _n(e,t,i,null,r)}}var fs=null;function Gn(e,t,r,i){if(fs=null,e=Bo(i),e=Gt(e),e!==null)if(t=sr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fs=e,null}function Tc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qh()){case Io:return 1;case wc:return 4;case us:case Yh:return 16;case Cc:return 536870912;default:return 16}default:return 16}}var Rt=null,Ho=null,Yi=null;function Mc(){if(Yi)return Yi;var e,t=Ho,r=t.length,i,o="value"in Rt?Rt.value:Rt.textContent,h=o.length;for(e=0;e<r&&t[e]===o[e];e++);var p=r-e;for(i=1;i<=p&&t[r-i]===o[h-i];i++);return Yi=o.slice(e,1<i?1-i:void 0)}function Ji(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ji(){return!0}function Pl(){return!1}function We(e){function t(r,i,o,h,p){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=h,this.target=p,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(h):h[s]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ji:Pl,this.isPropagationStopped=Pl,this}return he(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),t}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fo=We(Ir),Li=he({},Ir,{view:0,detail:0}),ud=We(Li),on,ln,Vr,Ps=he({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$o,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vr&&(Vr&&e.type==="mousemove"?(on=e.screenX-Vr.screenX,ln=e.screenY-Vr.screenY):ln=on=0,Vr=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),Bl=We(Ps),hd=he({},Ps,{dataTransfer:0}),dd=We(hd),fd=he({},Li,{relatedTarget:0}),an=We(fd),pd=he({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),_d=We(pd),vd=he({},Ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gd=We(vd),md=he({},Ir,{data:0}),Il=We(md),Sd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wd[e])?!!t[e]:!1}function $o(){return Cd}var xd=he({},Li,{key:function(e){if(e.key){var t=Sd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$o,charCode:function(e){return e.type==="keypress"?Ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kd=We(xd),bd=he({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ol=We(bd),Ed=he({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$o}),Ld=We(Ed),Rd=he({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dd=We(Rd),Td=he({},Ps,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Md=We(Td),Ad=[9,13,27,32],zo=_t&&"CompositionEvent"in window,ti=null;_t&&"documentMode"in document&&(ti=document.documentMode);var Pd=_t&&"TextEvent"in window&&!ti,Ac=_t&&(!zo||ti&&8<ti&&11>=ti),Nl=" ",jl=!1;function Pc(e,t){switch(e){case"keyup":return Ad.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ur=!1;function Bd(e,t){switch(e){case"compositionend":return Bc(t);case"keypress":return t.which!==32?null:(jl=!0,Nl);case"textInput":return e=t.data,e===Nl&&jl?null:e;default:return null}}function Id(e,t){if(ur)return e==="compositionend"||!zo&&Pc(e,t)?(e=Mc(),Yi=Ho=Rt=null,ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ac&&t.locale!=="ko"?null:t.data;default:return null}}var Od={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Od[e.type]:t==="textarea"}function Ic(e,t,r,i){dc(i),t=ps(t,"onChange"),0<t.length&&(r=new Fo("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var ri=null,pi=null;function Nd(e){Kc(e,0)}function Bs(e){var t=fr(e);if(nc(t))return e}function jd(e,t){if(e==="change")return t}var Oc=!1;if(_t){var cn;if(_t){var un="oninput"in document;if(!un){var Fl=document.createElement("div");Fl.setAttribute("oninput","return;"),un=typeof Fl.oninput=="function"}cn=un}else cn=!1;Oc=cn&&(!document.documentMode||9<document.documentMode)}function $l(){ri&&(ri.detachEvent("onpropertychange",Nc),pi=ri=null)}function Nc(e){if(e.propertyName==="value"&&Bs(pi)){var t=[];Ic(t,pi,e,Bo(e)),vc(Nd,t)}}function Hd(e,t,r){e==="focusin"?($l(),ri=t,pi=r,ri.attachEvent("onpropertychange",Nc)):e==="focusout"&&$l()}function Fd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bs(pi)}function $d(e,t){if(e==="click")return Bs(t)}function zd(e,t){if(e==="input"||e==="change")return Bs(t)}function Wd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var it=typeof Object.is=="function"?Object.is:Wd;function _i(e,t){if(it(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!Dn.call(t,o)||!it(e[o],t[o]))return!1}return!0}function zl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wl(e,t){var r=zl(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zl(r)}}function jc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hc(){for(var e=window,t=ls();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ls(e.document)}return t}function Wo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ud(e){var t=Hc(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&jc(r.ownerDocument.documentElement,r)){if(i!==null&&Wo(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,h=Math.min(i.start,o);i=i.end===void 0?h:Math.min(i.end,o),!e.extend&&h>i&&(o=i,i=h,h=o),o=Wl(r,h);var p=Wl(r,i);o&&p&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),h>i?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vd=_t&&"documentMode"in document&&11>=document.documentMode,hr=null,qn=null,ii=null,Xn=!1;function Ul(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xn||hr==null||hr!==ls(i)||(i=hr,"selectionStart"in i&&Wo(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ii&&_i(ii,i)||(ii=i,i=ps(qn,"onSelect"),0<i.length&&(t=new Fo("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=hr)))}function Hi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var dr={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionend:Hi("Transition","TransitionEnd")},hn={},Fc={};_t&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function Is(e){if(hn[e])return hn[e];if(!dr[e])return e;var t=dr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Fc)return hn[e]=t[r];return e}var $c=Is("animationend"),zc=Is("animationiteration"),Wc=Is("animationstart"),Uc=Is("transitionend"),Vc=new Map,Vl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $t(e,t){Vc.set(e,t),ir(t,[e])}for(var dn=0;dn<Vl.length;dn++){var fn=Vl[dn],Kd=fn.toLowerCase(),Gd=fn[0].toUpperCase()+fn.slice(1);$t(Kd,"on"+Gd)}$t($c,"onAnimationEnd");$t(zc,"onAnimationIteration");$t(Wc,"onAnimationStart");$t("dblclick","onDoubleClick");$t("focusin","onFocus");$t("focusout","onBlur");$t(Uc,"onTransitionEnd");Er("onMouseEnter",["mouseout","mouseover"]);Er("onMouseLeave",["mouseout","mouseover"]);Er("onPointerEnter",["pointerout","pointerover"]);Er("onPointerLeave",["pointerout","pointerover"]);ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jr));function Kl(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,Kh(i,t,void 0,e),e.currentTarget=null}function Kc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],o=i.event;i=i.listeners;e:{var h=void 0;if(t)for(var p=i.length-1;0<=p;p--){var s=i[p],u=s.instance,d=s.currentTarget;if(s=s.listener,u!==h&&o.isPropagationStopped())break e;Kl(o,s,d),h=u}else for(p=0;p<i.length;p++){if(s=i[p],u=s.instance,d=s.currentTarget,s=s.listener,u!==h&&o.isPropagationStopped())break e;Kl(o,s,d),h=u}}}if(cs)throw e=Un,cs=!1,Un=null,e}function ne(e,t){var r=t[eo];r===void 0&&(r=t[eo]=new Set);var i=e+"__bubble";r.has(i)||(Gc(t,e,2,!1),r.add(i))}function pn(e,t,r){var i=0;t&&(i|=4),Gc(r,e,i,t)}var Fi="_reactListening"+Math.random().toString(36).slice(2);function vi(e){if(!e[Fi]){e[Fi]=!0,ec.forEach(function(r){r!=="selectionchange"&&(qd.has(r)||pn(r,!1,e),pn(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fi]||(t[Fi]=!0,pn("selectionchange",!1,t))}}function Gc(e,t,r,i){switch(Tc(t)){case 1:var o=ad;break;case 4:o=cd;break;default:o=jo}r=o.bind(null,t,r,e),o=void 0,!Wn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function _n(e,t,r,i,o){var h=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var s=i.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(p===4)for(p=i.return;p!==null;){var u=p.tag;if((u===3||u===4)&&(u=p.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;p=p.return}for(;s!==null;){if(p=Gt(s),p===null)return;if(u=p.tag,u===5||u===6){i=h=p;continue e}s=s.parentNode}}i=i.return}vc(function(){var d=h,S=Bo(r),f=[];e:{var g=Vc.get(e);if(g!==void 0){var C=Fo,w=e;switch(e){case"keypress":if(Ji(r)===0)break e;case"keydown":case"keyup":C=kd;break;case"focusin":w="focus",C=an;break;case"focusout":w="blur",C=an;break;case"beforeblur":case"afterblur":C=an;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Ld;break;case $c:case zc:case Wc:C=_d;break;case Uc:C=Dd;break;case"scroll":C=ud;break;case"wheel":C=Md;break;case"copy":case"cut":case"paste":C=gd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Ol}var y=(t&4)!==0,c=!y&&e==="scroll",l=y?g!==null?g+"Capture":null:g;y=[];for(var n=d,a;n!==null;){a=n;var _=a.stateNode;if(a.tag===5&&_!==null&&(a=_,l!==null&&(_=ui(n,l),_!=null&&y.push(gi(n,_,a)))),c)break;n=n.return}0<y.length&&(g=new C(g,w,null,r,S),f.push({event:g,listeners:y}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",g&&r!==$n&&(w=r.relatedTarget||r.fromElement)&&(Gt(w)||w[vt]))break e;if((C||g)&&(g=S.window===S?S:(g=S.ownerDocument)?g.defaultView||g.parentWindow:window,C?(w=r.relatedTarget||r.toElement,C=d,w=w?Gt(w):null,w!==null&&(c=sr(w),w!==c||w.tag!==5&&w.tag!==6)&&(w=null)):(C=null,w=d),C!==w)){if(y=Bl,_="onMouseLeave",l="onMouseEnter",n="mouse",(e==="pointerout"||e==="pointerover")&&(y=Ol,_="onPointerLeave",l="onPointerEnter",n="pointer"),c=C==null?g:fr(C),a=w==null?g:fr(w),g=new y(_,n+"leave",C,r,S),g.target=c,g.relatedTarget=a,_=null,Gt(S)===d&&(y=new y(l,n+"enter",w,r,S),y.target=a,y.relatedTarget=c,_=y),c=_,C&&w)t:{for(y=C,l=w,n=0,a=y;a;a=or(a))n++;for(a=0,_=l;_;_=or(_))a++;for(;0<n-a;)y=or(y),n--;for(;0<a-n;)l=or(l),a--;for(;n--;){if(y===l||l!==null&&y===l.alternate)break t;y=or(y),l=or(l)}y=null}else y=null;C!==null&&Gl(f,g,C,y,!1),w!==null&&c!==null&&Gl(f,c,w,y,!0)}}e:{if(g=d?fr(d):window,C=g.nodeName&&g.nodeName.toLowerCase(),C==="select"||C==="input"&&g.type==="file")var m=jd;else if(Hl(g))if(Oc)m=zd;else{m=Fd;var x=Hd}else(C=g.nodeName)&&C.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(m=$d);if(m&&(m=m(e,d))){Ic(f,m,r,S);break e}x&&x(e,g,d),e==="focusout"&&(x=g._wrapperState)&&x.controlled&&g.type==="number"&&On(g,"number",g.value)}switch(x=d?fr(d):window,e){case"focusin":(Hl(x)||x.contentEditable==="true")&&(hr=x,qn=d,ii=null);break;case"focusout":ii=qn=hr=null;break;case"mousedown":Xn=!0;break;case"contextmenu":case"mouseup":case"dragend":Xn=!1,Ul(f,r,S);break;case"selectionchange":if(Vd)break;case"keydown":case"keyup":Ul(f,r,S)}var b;if(zo)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ur?Pc(e,r)&&(v="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(v="onCompositionStart");v&&(Ac&&r.locale!=="ko"&&(ur||v!=="onCompositionStart"?v==="onCompositionEnd"&&ur&&(b=Mc()):(Rt=S,Ho="value"in Rt?Rt.value:Rt.textContent,ur=!0)),x=ps(d,v),0<x.length&&(v=new Il(v,e,null,r,S),f.push({event:v,listeners:x}),b?v.data=b:(b=Bc(r),b!==null&&(v.data=b)))),(b=Pd?Bd(e,r):Id(e,r))&&(d=ps(d,"onBeforeInput"),0<d.length&&(S=new Il("onBeforeInput","beforeinput",null,r,S),f.push({event:S,listeners:d}),S.data=b))}Kc(f,t)})}function gi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ps(e,t){for(var r=t+"Capture",i=[];e!==null;){var o=e,h=o.stateNode;o.tag===5&&h!==null&&(o=h,h=ui(e,r),h!=null&&i.unshift(gi(e,h,o)),h=ui(e,t),h!=null&&i.push(gi(e,h,o))),e=e.return}return i}function or(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gl(e,t,r,i,o){for(var h=t._reactName,p=[];r!==null&&r!==i;){var s=r,u=s.alternate,d=s.stateNode;if(u!==null&&u===i)break;s.tag===5&&d!==null&&(s=d,o?(u=ui(r,h),u!=null&&p.unshift(gi(r,u,s))):o||(u=ui(r,h),u!=null&&p.push(gi(r,u,s)))),r=r.return}p.length!==0&&e.push({event:t,listeners:p})}var Xd=/\r\n?/g,Qd=/\u0000|\uFFFD/g;function ql(e){return(typeof e=="string"?e:""+e).replace(Xd,`
`).replace(Qd,"")}function $i(e,t,r){if(t=ql(t),ql(e)!==t&&r)throw Error(K(425))}function _s(){}var Qn=null,Yn=null;function Jn(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zn=typeof setTimeout=="function"?setTimeout:void 0,Yd=typeof clearTimeout=="function"?clearTimeout:void 0,Xl=typeof Promise=="function"?Promise:void 0,Jd=typeof queueMicrotask=="function"?queueMicrotask:typeof Xl<"u"?function(e){return Xl.resolve(null).then(e).catch(Zd)}:Zn;function Zd(e){setTimeout(function(){throw e})}function vn(e,t){var r=t,i=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){e.removeChild(o),fi(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);fi(t)}function Bt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ql(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Or=Math.random().toString(36).slice(2),lt="__reactFiber$"+Or,mi="__reactProps$"+Or,vt="__reactContainer$"+Or,eo="__reactEvents$"+Or,ef="__reactListeners$"+Or,tf="__reactHandles$"+Or;function Gt(e){var t=e[lt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[vt]||r[lt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ql(e);e!==null;){if(r=e[lt])return r;e=Ql(e)}return t}e=r,r=e.parentNode}return null}function Ri(e){return e=e[lt]||e[vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function Os(e){return e[mi]||null}var to=[],pr=-1;function zt(e){return{current:e}}function oe(e){0>pr||(e.current=to[pr],to[pr]=null,pr--)}function se(e,t){pr++,to[pr]=e.current,e.current=t}var Ft={},Le=zt(Ft),Ie=zt(!1),Jt=Ft;function Lr(e,t){var r=e.type.contextTypes;if(!r)return Ft;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},h;for(h in r)o[h]=t[h];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oe(e){return e=e.childContextTypes,e!=null}function vs(){oe(Ie),oe(Le)}function Yl(e,t,r){if(Le.current!==Ft)throw Error(K(168));se(Le,t),se(Ie,r)}function qc(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(K(108,Hh(e)||"Unknown",o));return he({},r,i)}function gs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ft,Jt=Le.current,se(Le,e),se(Ie,Ie.current),!0}function Jl(e,t,r){var i=e.stateNode;if(!i)throw Error(K(169));r?(e=qc(e,t,Jt),i.__reactInternalMemoizedMergedChildContext=e,oe(Ie),oe(Le),se(Le,e)):oe(Ie),se(Ie,r)}var ht=null,Ns=!1,gn=!1;function Xc(e){ht===null?ht=[e]:ht.push(e)}function rf(e){Ns=!0,Xc(e)}function Wt(){if(!gn&&ht!==null){gn=!0;var e=0,t=ie;try{var r=ht;for(ie=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}ht=null,Ns=!1}catch(o){throw ht!==null&&(ht=ht.slice(e+1)),yc(Io,Wt),o}finally{ie=t,gn=!1}}return null}var _r=[],vr=0,ms=null,Ss=0,Ve=[],Ke=0,Zt=null,dt=1,ft="";function Ut(e,t){_r[vr++]=Ss,_r[vr++]=ms,ms=e,Ss=t}function Qc(e,t,r){Ve[Ke++]=dt,Ve[Ke++]=ft,Ve[Ke++]=Zt,Zt=e;var i=dt;e=ft;var o=32-tt(i)-1;i&=~(1<<o),r+=1;var h=32-tt(t)+o;if(30<h){var p=o-o%5;h=(i&(1<<p)-1).toString(32),i>>=p,o-=p,dt=1<<32-tt(t)+o|r<<o|i,ft=h+e}else dt=1<<h|r<<o|i,ft=e}function Uo(e){e.return!==null&&(Ut(e,1),Qc(e,1,0))}function Vo(e){for(;e===ms;)ms=_r[--vr],_r[vr]=null,Ss=_r[--vr],_r[vr]=null;for(;e===Zt;)Zt=Ve[--Ke],Ve[Ke]=null,ft=Ve[--Ke],Ve[Ke]=null,dt=Ve[--Ke],Ve[Ke]=null}var Fe=null,He=null,le=!1,et=null;function Yc(e,t){var r=Ge(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Zl(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fe=e,He=Bt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fe=e,He=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Zt!==null?{id:dt,overflow:ft}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ge(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Fe=e,He=null,!0):!1;default:return!1}}function ro(e){return(e.mode&1)!==0&&(e.flags&128)===0}function io(e){if(le){var t=He;if(t){var r=t;if(!Zl(e,t)){if(ro(e))throw Error(K(418));t=Bt(r.nextSibling);var i=Fe;t&&Zl(e,t)?Yc(i,r):(e.flags=e.flags&-4097|2,le=!1,Fe=e)}}else{if(ro(e))throw Error(K(418));e.flags=e.flags&-4097|2,le=!1,Fe=e}}}function ea(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fe=e}function zi(e){if(e!==Fe)return!1;if(!le)return ea(e),le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Jn(e.type,e.memoizedProps)),t&&(t=He)){if(ro(e))throw Jc(),Error(K(418));for(;t;)Yc(e,t),t=Bt(t.nextSibling)}if(ea(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){He=Bt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}He=null}}else He=Fe?Bt(e.stateNode.nextSibling):null;return!0}function Jc(){for(var e=He;e;)e=Bt(e.nextSibling)}function Rr(){He=Fe=null,le=!1}function Ko(e){et===null?et=[e]:et.push(e)}var sf=St.ReactCurrentBatchConfig;function Kr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var i=r.stateNode}if(!i)throw Error(K(147,e));var o=i,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(p){var s=o.refs;p===null?delete s[h]:s[h]=p},t._stringRef=h,t)}if(typeof e!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,e))}return e}function Wi(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ta(e){var t=e._init;return t(e._payload)}function Zc(e){function t(l,n){if(e){var a=l.deletions;a===null?(l.deletions=[n],l.flags|=16):a.push(n)}}function r(l,n){if(!e)return null;for(;n!==null;)t(l,n),n=n.sibling;return null}function i(l,n){for(l=new Map;n!==null;)n.key!==null?l.set(n.key,n):l.set(n.index,n),n=n.sibling;return l}function o(l,n){return l=jt(l,n),l.index=0,l.sibling=null,l}function h(l,n,a){return l.index=a,e?(a=l.alternate,a!==null?(a=a.index,a<n?(l.flags|=2,n):a):(l.flags|=2,n)):(l.flags|=1048576,n)}function p(l){return e&&l.alternate===null&&(l.flags|=2),l}function s(l,n,a,_){return n===null||n.tag!==6?(n=kn(a,l.mode,_),n.return=l,n):(n=o(n,a),n.return=l,n)}function u(l,n,a,_){var m=a.type;return m===cr?S(l,n,a.props.children,_,a.key):n!==null&&(n.elementType===m||typeof m=="object"&&m!==null&&m.$$typeof===kt&&ta(m)===n.type)?(_=o(n,a.props),_.ref=Kr(l,n,a),_.return=l,_):(_=ns(a.type,a.key,a.props,null,l.mode,_),_.ref=Kr(l,n,a),_.return=l,_)}function d(l,n,a,_){return n===null||n.tag!==4||n.stateNode.containerInfo!==a.containerInfo||n.stateNode.implementation!==a.implementation?(n=bn(a,l.mode,_),n.return=l,n):(n=o(n,a.children||[]),n.return=l,n)}function S(l,n,a,_,m){return n===null||n.tag!==7?(n=Yt(a,l.mode,_,m),n.return=l,n):(n=o(n,a),n.return=l,n)}function f(l,n,a){if(typeof n=="string"&&n!==""||typeof n=="number")return n=kn(""+n,l.mode,a),n.return=l,n;if(typeof n=="object"&&n!==null){switch(n.$$typeof){case Ai:return a=ns(n.type,n.key,n.props,null,l.mode,a),a.ref=Kr(l,null,n),a.return=l,a;case ar:return n=bn(n,l.mode,a),n.return=l,n;case kt:var _=n._init;return f(l,_(n._payload),a)}if(Qr(n)||$r(n))return n=Yt(n,l.mode,a,null),n.return=l,n;Wi(l,n)}return null}function g(l,n,a,_){var m=n!==null?n.key:null;if(typeof a=="string"&&a!==""||typeof a=="number")return m!==null?null:s(l,n,""+a,_);if(typeof a=="object"&&a!==null){switch(a.$$typeof){case Ai:return a.key===m?u(l,n,a,_):null;case ar:return a.key===m?d(l,n,a,_):null;case kt:return m=a._init,g(l,n,m(a._payload),_)}if(Qr(a)||$r(a))return m!==null?null:S(l,n,a,_,null);Wi(l,a)}return null}function C(l,n,a,_,m){if(typeof _=="string"&&_!==""||typeof _=="number")return l=l.get(a)||null,s(n,l,""+_,m);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ai:return l=l.get(_.key===null?a:_.key)||null,u(n,l,_,m);case ar:return l=l.get(_.key===null?a:_.key)||null,d(n,l,_,m);case kt:var x=_._init;return C(l,n,a,x(_._payload),m)}if(Qr(_)||$r(_))return l=l.get(a)||null,S(n,l,_,m,null);Wi(n,_)}return null}function w(l,n,a,_){for(var m=null,x=null,b=n,v=n=0,k=null;b!==null&&v<a.length;v++){b.index>v?(k=b,b=null):k=b.sibling;var D=g(l,b,a[v],_);if(D===null){b===null&&(b=k);break}e&&b&&D.alternate===null&&t(l,b),n=h(D,n,v),x===null?m=D:x.sibling=D,x=D,b=k}if(v===a.length)return r(l,b),le&&Ut(l,v),m;if(b===null){for(;v<a.length;v++)b=f(l,a[v],_),b!==null&&(n=h(b,n,v),x===null?m=b:x.sibling=b,x=b);return le&&Ut(l,v),m}for(b=i(l,b);v<a.length;v++)k=C(b,l,v,a[v],_),k!==null&&(e&&k.alternate!==null&&b.delete(k.key===null?v:k.key),n=h(k,n,v),x===null?m=k:x.sibling=k,x=k);return e&&b.forEach(function(R){return t(l,R)}),le&&Ut(l,v),m}function y(l,n,a,_){var m=$r(a);if(typeof m!="function")throw Error(K(150));if(a=m.call(a),a==null)throw Error(K(151));for(var x=m=null,b=n,v=n=0,k=null,D=a.next();b!==null&&!D.done;v++,D=a.next()){b.index>v?(k=b,b=null):k=b.sibling;var R=g(l,b,D.value,_);if(R===null){b===null&&(b=k);break}e&&b&&R.alternate===null&&t(l,b),n=h(R,n,v),x===null?m=R:x.sibling=R,x=R,b=k}if(D.done)return r(l,b),le&&Ut(l,v),m;if(b===null){for(;!D.done;v++,D=a.next())D=f(l,D.value,_),D!==null&&(n=h(D,n,v),x===null?m=D:x.sibling=D,x=D);return le&&Ut(l,v),m}for(b=i(l,b);!D.done;v++,D=a.next())D=C(b,l,v,D.value,_),D!==null&&(e&&D.alternate!==null&&b.delete(D.key===null?v:D.key),n=h(D,n,v),x===null?m=D:x.sibling=D,x=D);return e&&b.forEach(function(T){return t(l,T)}),le&&Ut(l,v),m}function c(l,n,a,_){if(typeof a=="object"&&a!==null&&a.type===cr&&a.key===null&&(a=a.props.children),typeof a=="object"&&a!==null){switch(a.$$typeof){case Ai:e:{for(var m=a.key,x=n;x!==null;){if(x.key===m){if(m=a.type,m===cr){if(x.tag===7){r(l,x.sibling),n=o(x,a.props.children),n.return=l,l=n;break e}}else if(x.elementType===m||typeof m=="object"&&m!==null&&m.$$typeof===kt&&ta(m)===x.type){r(l,x.sibling),n=o(x,a.props),n.ref=Kr(l,x,a),n.return=l,l=n;break e}r(l,x);break}else t(l,x);x=x.sibling}a.type===cr?(n=Yt(a.props.children,l.mode,_,a.key),n.return=l,l=n):(_=ns(a.type,a.key,a.props,null,l.mode,_),_.ref=Kr(l,n,a),_.return=l,l=_)}return p(l);case ar:e:{for(x=a.key;n!==null;){if(n.key===x)if(n.tag===4&&n.stateNode.containerInfo===a.containerInfo&&n.stateNode.implementation===a.implementation){r(l,n.sibling),n=o(n,a.children||[]),n.return=l,l=n;break e}else{r(l,n);break}else t(l,n);n=n.sibling}n=bn(a,l.mode,_),n.return=l,l=n}return p(l);case kt:return x=a._init,c(l,n,x(a._payload),_)}if(Qr(a))return w(l,n,a,_);if($r(a))return y(l,n,a,_);Wi(l,a)}return typeof a=="string"&&a!==""||typeof a=="number"?(a=""+a,n!==null&&n.tag===6?(r(l,n.sibling),n=o(n,a),n.return=l,l=n):(r(l,n),n=kn(a,l.mode,_),n.return=l,l=n),p(l)):r(l,n)}return c}var Dr=Zc(!0),eu=Zc(!1),ys=zt(null),ws=null,gr=null,Go=null;function qo(){Go=gr=ws=null}function Xo(e){var t=ys.current;oe(ys),e._currentValue=t}function so(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function kr(e,t){ws=e,Go=gr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Be=!0),e.firstContext=null)}function Xe(e){var t=e._currentValue;if(Go!==e)if(e={context:e,memoizedValue:t,next:null},gr===null){if(ws===null)throw Error(K(308));gr=e,ws.dependencies={lanes:0,firstContext:e}}else gr=gr.next=e;return t}var qt=null;function Qo(e){qt===null?qt=[e]:qt.push(e)}function tu(e,t,r,i){var o=t.interleaved;return o===null?(r.next=r,Qo(t)):(r.next=o.next,o.next=r),t.interleaved=r,gt(e,i)}function gt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var bt=!1;function Yo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ru(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function It(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ee&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,gt(e,r)}return o=i.interleaved,o===null?(t.next=t,Qo(i)):(t.next=o.next,o.next=t),i.interleaved=t,gt(e,r)}function Zi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Oo(e,r)}}function ra(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var p={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?o=h=p:h=h.next=p,r=r.next}while(r!==null);h===null?o=h=t:h=h.next=t}else o=h=t;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:h,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Cs(e,t,r,i){var o=e.updateQueue;bt=!1;var h=o.firstBaseUpdate,p=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var u=s,d=u.next;u.next=null,p===null?h=d:p.next=d,p=u;var S=e.alternate;S!==null&&(S=S.updateQueue,s=S.lastBaseUpdate,s!==p&&(s===null?S.firstBaseUpdate=d:s.next=d,S.lastBaseUpdate=u))}if(h!==null){var f=o.baseState;p=0,S=d=u=null,s=h;do{var g=s.lane,C=s.eventTime;if((i&g)===g){S!==null&&(S=S.next={eventTime:C,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var w=e,y=s;switch(g=t,C=r,y.tag){case 1:if(w=y.payload,typeof w=="function"){f=w.call(C,f,g);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,g=typeof w=="function"?w.call(C,f,g):w,g==null)break e;f=he({},f,g);break e;case 2:bt=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,g=o.effects,g===null?o.effects=[s]:g.push(s))}else C={eventTime:C,lane:g,tag:s.tag,payload:s.payload,callback:s.callback,next:null},S===null?(d=S=C,u=f):S=S.next=C,p|=g;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;g=s,s=g.next,g.next=null,o.lastBaseUpdate=g,o.shared.pending=null}}while(!0);if(S===null&&(u=f),o.baseState=u,o.firstBaseUpdate=d,o.lastBaseUpdate=S,t=o.shared.interleaved,t!==null){o=t;do p|=o.lane,o=o.next;while(o!==t)}else h===null&&(o.shared.lanes=0);tr|=p,e.lanes=p,e.memoizedState=f}}function ia(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(K(191,o));o.call(i)}}}var Di={},ct=zt(Di),Si=zt(Di),yi=zt(Di);function Xt(e){if(e===Di)throw Error(K(174));return e}function Jo(e,t){switch(se(yi,t),se(Si,e),se(ct,Di),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jn(t,e)}oe(ct),se(ct,t)}function Tr(){oe(ct),oe(Si),oe(yi)}function iu(e){Xt(yi.current);var t=Xt(ct.current),r=jn(t,e.type);t!==r&&(se(Si,e),se(ct,r))}function Zo(e){Si.current===e&&(oe(ct),oe(Si))}var ce=zt(0);function xs(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mn=[];function el(){for(var e=0;e<mn.length;e++)mn[e]._workInProgressVersionPrimary=null;mn.length=0}var es=St.ReactCurrentDispatcher,Sn=St.ReactCurrentBatchConfig,er=0,ue=null,ve=null,me=null,ks=!1,si=!1,wi=0,nf=0;function ke(){throw Error(K(321))}function tl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!it(e[r],t[r]))return!1;return!0}function rl(e,t,r,i,o,h){if(er=h,ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,es.current=e===null||e.memoizedState===null?cf:uf,e=r(i,o),si){h=0;do{if(si=!1,wi=0,25<=h)throw Error(K(301));h+=1,me=ve=null,t.updateQueue=null,es.current=hf,e=r(i,o)}while(si)}if(es.current=bs,t=ve!==null&&ve.next!==null,er=0,me=ve=ue=null,ks=!1,t)throw Error(K(300));return e}function il(){var e=wi!==0;return wi=0,e}function ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return me===null?ue.memoizedState=me=e:me=me.next=e,me}function Qe(){if(ve===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=ve.next;var t=me===null?ue.memoizedState:me.next;if(t!==null)me=t,ve=e;else{if(e===null)throw Error(K(310));ve=e,e={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},me===null?ue.memoizedState=me=e:me=me.next=e}return me}function Ci(e,t){return typeof t=="function"?t(e):t}function yn(e){var t=Qe(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var i=ve,o=i.baseQueue,h=r.pending;if(h!==null){if(o!==null){var p=o.next;o.next=h.next,h.next=p}i.baseQueue=o=h,r.pending=null}if(o!==null){h=o.next,i=i.baseState;var s=p=null,u=null,d=h;do{var S=d.lane;if((er&S)===S)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:e(i,d.action);else{var f={lane:S,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(s=u=f,p=i):u=u.next=f,ue.lanes|=S,tr|=S}d=d.next}while(d!==null&&d!==h);u===null?p=i:u.next=s,it(i,t.memoizedState)||(Be=!0),t.memoizedState=i,t.baseState=p,t.baseQueue=u,r.lastRenderedState=i}if(e=r.interleaved,e!==null){o=e;do h=o.lane,ue.lanes|=h,tr|=h,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wn(e){var t=Qe(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var i=r.dispatch,o=r.pending,h=t.memoizedState;if(o!==null){r.pending=null;var p=o=o.next;do h=e(h,p.action),p=p.next;while(p!==o);it(h,t.memoizedState)||(Be=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,i]}function su(){}function nu(e,t){var r=ue,i=Qe(),o=t(),h=!it(i.memoizedState,o);if(h&&(i.memoizedState=o,Be=!0),i=i.queue,sl(au.bind(null,r,i,e),[e]),i.getSnapshot!==t||h||me!==null&&me.memoizedState.tag&1){if(r.flags|=2048,xi(9,lu.bind(null,r,i,o,t),void 0,null),Se===null)throw Error(K(349));er&30||ou(r,t,o)}return o}function ou(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function lu(e,t,r,i){t.value=r,t.getSnapshot=i,cu(t)&&uu(e)}function au(e,t,r){return r(function(){cu(t)&&uu(e)})}function cu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!it(e,r)}catch{return!0}}function uu(e){var t=gt(e,1);t!==null&&rt(t,e,1,-1)}function sa(e){var t=ot();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:e},t.queue=e,e=e.dispatch=af.bind(null,ue,e),[t.memoizedState,e]}function xi(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function hu(){return Qe().memoizedState}function ts(e,t,r,i){var o=ot();ue.flags|=e,o.memoizedState=xi(1|t,r,void 0,i===void 0?null:i)}function js(e,t,r,i){var o=Qe();i=i===void 0?null:i;var h=void 0;if(ve!==null){var p=ve.memoizedState;if(h=p.destroy,i!==null&&tl(i,p.deps)){o.memoizedState=xi(t,r,h,i);return}}ue.flags|=e,o.memoizedState=xi(1|t,r,h,i)}function na(e,t){return ts(8390656,8,e,t)}function sl(e,t){return js(2048,8,e,t)}function du(e,t){return js(4,2,e,t)}function fu(e,t){return js(4,4,e,t)}function pu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _u(e,t,r){return r=r!=null?r.concat([e]):null,js(4,4,pu.bind(null,t,e),r)}function nl(){}function vu(e,t){var r=Qe();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&tl(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function gu(e,t){var r=Qe();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&tl(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function mu(e,t,r){return er&21?(it(r,t)||(r=xc(),ue.lanes|=r,tr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Be=!0),e.memoizedState=r)}function of(e,t){var r=ie;ie=r!==0&&4>r?r:4,e(!0);var i=Sn.transition;Sn.transition={};try{e(!1),t()}finally{ie=r,Sn.transition=i}}function Su(){return Qe().memoizedState}function lf(e,t,r){var i=Nt(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},yu(e))wu(t,r);else if(r=tu(e,t,r,i),r!==null){var o=De();rt(r,e,i,o),Cu(r,t,i)}}function af(e,t,r){var i=Nt(e),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(yu(e))wu(t,o);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var p=t.lastRenderedState,s=h(p,r);if(o.hasEagerState=!0,o.eagerState=s,it(s,p)){var u=t.interleaved;u===null?(o.next=o,Qo(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}r=tu(e,t,o,i),r!==null&&(o=De(),rt(r,e,i,o),Cu(r,t,i))}}function yu(e){var t=e.alternate;return e===ue||t!==null&&t===ue}function wu(e,t){si=ks=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Cu(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Oo(e,r)}}var bs={readContext:Xe,useCallback:ke,useContext:ke,useEffect:ke,useImperativeHandle:ke,useInsertionEffect:ke,useLayoutEffect:ke,useMemo:ke,useReducer:ke,useRef:ke,useState:ke,useDebugValue:ke,useDeferredValue:ke,useTransition:ke,useMutableSource:ke,useSyncExternalStore:ke,useId:ke,unstable_isNewReconciler:!1},cf={readContext:Xe,useCallback:function(e,t){return ot().memoizedState=[e,t===void 0?null:t],e},useContext:Xe,useEffect:na,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ts(4194308,4,pu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ts(4194308,4,e,t)},useInsertionEffect:function(e,t){return ts(4,2,e,t)},useMemo:function(e,t){var r=ot();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ot();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=lf.bind(null,ue,e),[i.memoizedState,e]},useRef:function(e){var t=ot();return e={current:e},t.memoizedState=e},useState:sa,useDebugValue:nl,useDeferredValue:function(e){return ot().memoizedState=e},useTransition:function(){var e=sa(!1),t=e[0];return e=of.bind(null,e[1]),ot().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=ue,o=ot();if(le){if(r===void 0)throw Error(K(407));r=r()}else{if(r=t(),Se===null)throw Error(K(349));er&30||ou(i,t,r)}o.memoizedState=r;var h={value:r,getSnapshot:t};return o.queue=h,na(au.bind(null,i,h,e),[e]),i.flags|=2048,xi(9,lu.bind(null,i,h,r,t),void 0,null),r},useId:function(){var e=ot(),t=Se.identifierPrefix;if(le){var r=ft,i=dt;r=(i&~(1<<32-tt(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=wi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=nf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uf={readContext:Xe,useCallback:vu,useContext:Xe,useEffect:sl,useImperativeHandle:_u,useInsertionEffect:du,useLayoutEffect:fu,useMemo:gu,useReducer:yn,useRef:hu,useState:function(){return yn(Ci)},useDebugValue:nl,useDeferredValue:function(e){var t=Qe();return mu(t,ve.memoizedState,e)},useTransition:function(){var e=yn(Ci)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:su,useSyncExternalStore:nu,useId:Su,unstable_isNewReconciler:!1},hf={readContext:Xe,useCallback:vu,useContext:Xe,useEffect:sl,useImperativeHandle:_u,useInsertionEffect:du,useLayoutEffect:fu,useMemo:gu,useReducer:wn,useRef:hu,useState:function(){return wn(Ci)},useDebugValue:nl,useDeferredValue:function(e){var t=Qe();return ve===null?t.memoizedState=e:mu(t,ve.memoizedState,e)},useTransition:function(){var e=wn(Ci)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:su,useSyncExternalStore:nu,useId:Su,unstable_isNewReconciler:!1};function Je(e,t){if(e&&e.defaultProps){t=he({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function no(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:he({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Hs={isMounted:function(e){return(e=e._reactInternals)?sr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=De(),o=Nt(e),h=pt(i,o);h.payload=t,r!=null&&(h.callback=r),t=It(e,h,o),t!==null&&(rt(t,e,o,i),Zi(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=De(),o=Nt(e),h=pt(i,o);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=It(e,h,o),t!==null&&(rt(t,e,o,i),Zi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=De(),i=Nt(e),o=pt(r,i);o.tag=2,t!=null&&(o.callback=t),t=It(e,o,i),t!==null&&(rt(t,e,i,r),Zi(t,e,i))}};function oa(e,t,r,i,o,h,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,h,p):t.prototype&&t.prototype.isPureReactComponent?!_i(r,i)||!_i(o,h):!0}function xu(e,t,r){var i=!1,o=Ft,h=t.contextType;return typeof h=="object"&&h!==null?h=Xe(h):(o=Oe(t)?Jt:Le.current,i=t.contextTypes,h=(i=i!=null)?Lr(e,o):Ft),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hs,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=h),t}function la(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Hs.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,i){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},Yo(e);var h=t.contextType;typeof h=="object"&&h!==null?o.context=Xe(h):(h=Oe(t)?Jt:Le.current,o.context=Lr(e,h)),o.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(no(e,t,h,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Hs.enqueueReplaceState(o,o.state,null),Cs(e,r,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Mr(e,t){try{var r="",i=t;do r+=jh(i),i=i.return;while(i);var o=r}catch(h){o=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:o,digest:null}}function Cn(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function lo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var df=typeof WeakMap=="function"?WeakMap:Map;function ku(e,t,r){r=pt(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Ls||(Ls=!0,mo=i),lo(e,t)},r}function bu(e,t,r){r=pt(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;r.payload=function(){return i(o)},r.callback=function(){lo(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){lo(e,t),typeof i!="function"&&(Ot===null?Ot=new Set([this]):Ot.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),r}function aa(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new df;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(r)||(o.add(r),e=Ef.bind(null,e,t,r),t.then(e,e))}function ca(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ua(e,t,r,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=pt(-1,1),t.tag=2,It(r,t,1))),r.lanes|=1),e)}var ff=St.ReactCurrentOwner,Be=!1;function Re(e,t,r,i){t.child=e===null?eu(t,null,r,i):Dr(t,e.child,r,i)}function ha(e,t,r,i,o){r=r.render;var h=t.ref;return kr(t,o),i=rl(e,t,r,i,h,o),r=il(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,mt(e,t,o)):(le&&r&&Uo(t),t.flags|=1,Re(e,t,i,o),t.child)}function da(e,t,r,i,o){if(e===null){var h=r.type;return typeof h=="function"&&!fl(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,Eu(e,t,h,i,o)):(e=ns(r.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&o)){var p=h.memoizedProps;if(r=r.compare,r=r!==null?r:_i,r(p,i)&&e.ref===t.ref)return mt(e,t,o)}return t.flags|=1,e=jt(h,i),e.ref=t.ref,e.return=t,t.child=e}function Eu(e,t,r,i,o){if(e!==null){var h=e.memoizedProps;if(_i(h,i)&&e.ref===t.ref)if(Be=!1,t.pendingProps=i=h,(e.lanes&o)!==0)e.flags&131072&&(Be=!0);else return t.lanes=e.lanes,mt(e,t,o)}return ao(e,t,r,i,o)}function Lu(e,t,r){var i=t.pendingProps,o=i.children,h=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(Sr,je),je|=r;else{if(!(r&1073741824))return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,se(Sr,je),je|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=h!==null?h.baseLanes:r,se(Sr,je),je|=i}else h!==null?(i=h.baseLanes|r,t.memoizedState=null):i=r,se(Sr,je),je|=i;return Re(e,t,o,r),t.child}function Ru(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ao(e,t,r,i,o){var h=Oe(r)?Jt:Le.current;return h=Lr(t,h),kr(t,o),r=rl(e,t,r,i,h,o),i=il(),e!==null&&!Be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,mt(e,t,o)):(le&&i&&Uo(t),t.flags|=1,Re(e,t,r,o),t.child)}function fa(e,t,r,i,o){if(Oe(r)){var h=!0;gs(t)}else h=!1;if(kr(t,o),t.stateNode===null)rs(e,t),xu(t,r,i),oo(t,r,i,o),i=!0;else if(e===null){var p=t.stateNode,s=t.memoizedProps;p.props=s;var u=p.context,d=r.contextType;typeof d=="object"&&d!==null?d=Xe(d):(d=Oe(r)?Jt:Le.current,d=Lr(t,d));var S=r.getDerivedStateFromProps,f=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function";f||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(s!==i||u!==d)&&la(t,p,i,d),bt=!1;var g=t.memoizedState;p.state=g,Cs(t,i,p,o),u=t.memoizedState,s!==i||g!==u||Ie.current||bt?(typeof S=="function"&&(no(t,r,S,i),u=t.memoizedState),(s=bt||oa(t,r,s,i,g,u,d))?(f||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),p.props=i,p.state=u,p.context=d,i=s):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{p=t.stateNode,ru(e,t),s=t.memoizedProps,d=t.type===t.elementType?s:Je(t.type,s),p.props=d,f=t.pendingProps,g=p.context,u=r.contextType,typeof u=="object"&&u!==null?u=Xe(u):(u=Oe(r)?Jt:Le.current,u=Lr(t,u));var C=r.getDerivedStateFromProps;(S=typeof C=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(s!==f||g!==u)&&la(t,p,i,u),bt=!1,g=t.memoizedState,p.state=g,Cs(t,i,p,o);var w=t.memoizedState;s!==f||g!==w||Ie.current||bt?(typeof C=="function"&&(no(t,r,C,i),w=t.memoizedState),(d=bt||oa(t,r,d,i,g,w,u)||!1)?(S||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(i,w,u),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(i,w,u)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=w),p.props=i,p.state=w,p.context=u,i=d):(typeof p.componentDidUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),i=!1)}return co(e,t,r,i,h,o)}function co(e,t,r,i,o,h){Ru(e,t);var p=(t.flags&128)!==0;if(!i&&!p)return o&&Jl(t,r,!1),mt(e,t,h);i=t.stateNode,ff.current=t;var s=p&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&p?(t.child=Dr(t,e.child,null,h),t.child=Dr(t,null,s,h)):Re(e,t,s,h),t.memoizedState=i.state,o&&Jl(t,r,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Yl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yl(e,t.context,!1),Jo(e,t.containerInfo)}function pa(e,t,r,i,o){return Rr(),Ko(o),t.flags|=256,Re(e,t,r,i),t.child}var uo={dehydrated:null,treeContext:null,retryLane:0};function ho(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tu(e,t,r){var i=t.pendingProps,o=ce.current,h=!1,p=(t.flags&128)!==0,s;if((s=p)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),se(ce,o&1),e===null)return io(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=i.children,e=i.fallback,h?(i=t.mode,h=t.child,p={mode:"hidden",children:p},!(i&1)&&h!==null?(h.childLanes=0,h.pendingProps=p):h=zs(p,i,0,null),e=Yt(e,i,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=ho(r),t.memoizedState=uo,e):ol(t,p));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return pf(e,t,p,i,s,o,r);if(h){h=i.fallback,p=t.mode,o=e.child,s=o.sibling;var u={mode:"hidden",children:i.children};return!(p&1)&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=u,t.deletions=null):(i=jt(o,u),i.subtreeFlags=o.subtreeFlags&14680064),s!==null?h=jt(s,h):(h=Yt(h,p,r,null),h.flags|=2),h.return=t,i.return=t,i.sibling=h,t.child=i,i=h,h=t.child,p=e.child.memoizedState,p=p===null?ho(r):{baseLanes:p.baseLanes|r,cachePool:null,transitions:p.transitions},h.memoizedState=p,h.childLanes=e.childLanes&~r,t.memoizedState=uo,i}return h=e.child,e=h.sibling,i=jt(h,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function ol(e,t){return t=zs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ui(e,t,r,i){return i!==null&&Ko(i),Dr(t,e.child,null,r),e=ol(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pf(e,t,r,i,o,h,p){if(r)return t.flags&256?(t.flags&=-257,i=Cn(Error(K(422))),Ui(e,t,p,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=i.fallback,o=t.mode,i=zs({mode:"visible",children:i.children},o,0,null),h=Yt(h,o,p,null),h.flags|=2,i.return=t,h.return=t,i.sibling=h,t.child=i,t.mode&1&&Dr(t,e.child,null,p),t.child.memoizedState=ho(p),t.memoizedState=uo,h);if(!(t.mode&1))return Ui(e,t,p,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var s=i.dgst;return i=s,h=Error(K(419)),i=Cn(h,i,void 0),Ui(e,t,p,i)}if(s=(p&e.childLanes)!==0,Be||s){if(i=Se,i!==null){switch(p&-p){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|p)?0:o,o!==0&&o!==h.retryLane&&(h.retryLane=o,gt(e,o),rt(i,e,o,-1))}return dl(),i=Cn(Error(K(421))),Ui(e,t,p,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Lf.bind(null,e),o._reactRetry=t,null):(e=h.treeContext,He=Bt(o.nextSibling),Fe=t,le=!0,et=null,e!==null&&(Ve[Ke++]=dt,Ve[Ke++]=ft,Ve[Ke++]=Zt,dt=e.id,ft=e.overflow,Zt=t),t=ol(t,i.children),t.flags|=4096,t)}function _a(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),so(e.return,t,r)}function xn(e,t,r,i,o){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=i,h.tail=r,h.tailMode=o)}function Mu(e,t,r){var i=t.pendingProps,o=i.revealOrder,h=i.tail;if(Re(e,t,i.children,r),i=ce.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_a(e,r,t);else if(e.tag===19)_a(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(se(ce,i),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&xs(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),xn(t,!1,o,r,h);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&xs(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}xn(t,!0,r,null,h);break;case"together":xn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),tr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,r=jt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=jt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function _f(e,t,r){switch(t.tag){case 3:Du(t),Rr();break;case 5:iu(t);break;case 1:Oe(t.type)&&gs(t);break;case 4:Jo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;se(ys,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(se(ce,ce.current&1),t.flags|=128,null):r&t.child.childLanes?Tu(e,t,r):(se(ce,ce.current&1),e=mt(e,t,r),e!==null?e.sibling:null);se(ce,ce.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return Mu(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),se(ce,ce.current),i)break;return null;case 22:case 23:return t.lanes=0,Lu(e,t,r)}return mt(e,t,r)}var Au,fo,Pu,Bu;Au=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};fo=function(){};Pu=function(e,t,r,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,Xt(ct.current);var h=null;switch(r){case"input":o=Bn(e,o),i=Bn(e,i),h=[];break;case"select":o=he({},o,{value:void 0}),i=he({},i,{value:void 0}),h=[];break;case"textarea":o=Nn(e,o),i=Nn(e,i),h=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=_s)}Hn(r,i);var p;r=null;for(d in o)if(!i.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var s=o[d];for(p in s)s.hasOwnProperty(p)&&(r||(r={}),r[p]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ai.hasOwnProperty(d)?h||(h=[]):(h=h||[]).push(d,null));for(d in i){var u=i[d];if(s=o!=null?o[d]:void 0,i.hasOwnProperty(d)&&u!==s&&(u!=null||s!=null))if(d==="style")if(s){for(p in s)!s.hasOwnProperty(p)||u&&u.hasOwnProperty(p)||(r||(r={}),r[p]="");for(p in u)u.hasOwnProperty(p)&&s[p]!==u[p]&&(r||(r={}),r[p]=u[p])}else r||(h||(h=[]),h.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(h=h||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(h=h||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ai.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ne("scroll",e),h||s===u||(h=[])):(h=h||[]).push(d,u))}r&&(h=h||[]).push("style",r);var d=h;(t.updateQueue=d)&&(t.flags|=4)}};Bu=function(e,t,r,i){r!==i&&(t.flags|=4)};function Gr(e,t){if(!le)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function be(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function vf(e,t,r){var i=t.pendingProps;switch(Vo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(t),null;case 1:return Oe(t.type)&&vs(),be(t),null;case 3:return i=t.stateNode,Tr(),oe(Ie),oe(Le),el(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(zi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,et!==null&&(wo(et),et=null))),fo(e,t),be(t),null;case 5:Zo(t);var o=Xt(yi.current);if(r=t.type,e!==null&&t.stateNode!=null)Pu(e,t,r,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(K(166));return be(t),null}if(e=Xt(ct.current),zi(t)){i=t.stateNode,r=t.type;var h=t.memoizedProps;switch(i[lt]=t,i[mi]=h,e=(t.mode&1)!==0,r){case"dialog":ne("cancel",i),ne("close",i);break;case"iframe":case"object":case"embed":ne("load",i);break;case"video":case"audio":for(o=0;o<Jr.length;o++)ne(Jr[o],i);break;case"source":ne("error",i);break;case"img":case"image":case"link":ne("error",i),ne("load",i);break;case"details":ne("toggle",i);break;case"input":kl(i,h),ne("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!h.multiple},ne("invalid",i);break;case"textarea":El(i,h),ne("invalid",i)}Hn(r,h),o=null;for(var p in h)if(h.hasOwnProperty(p)){var s=h[p];p==="children"?typeof s=="string"?i.textContent!==s&&(h.suppressHydrationWarning!==!0&&$i(i.textContent,s,e),o=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(h.suppressHydrationWarning!==!0&&$i(i.textContent,s,e),o=["children",""+s]):ai.hasOwnProperty(p)&&s!=null&&p==="onScroll"&&ne("scroll",i)}switch(r){case"input":Pi(i),bl(i,h,!0);break;case"textarea":Pi(i),Ll(i);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(i.onclick=_s)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{p=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ac(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=p.createElement(r,{is:i.is}):(e=p.createElement(r),r==="select"&&(p=e,i.multiple?p.multiple=!0:i.size&&(p.size=i.size))):e=p.createElementNS(e,r),e[lt]=t,e[mi]=i,Au(e,t,!1,!1),t.stateNode=e;e:{switch(p=Fn(r,i),r){case"dialog":ne("cancel",e),ne("close",e),o=i;break;case"iframe":case"object":case"embed":ne("load",e),o=i;break;case"video":case"audio":for(o=0;o<Jr.length;o++)ne(Jr[o],e);o=i;break;case"source":ne("error",e),o=i;break;case"img":case"image":case"link":ne("error",e),ne("load",e),o=i;break;case"details":ne("toggle",e),o=i;break;case"input":kl(e,i),o=Bn(e,i),ne("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=he({},i,{value:void 0}),ne("invalid",e);break;case"textarea":El(e,i),o=Nn(e,i),ne("invalid",e);break;default:o=i}Hn(r,o),s=o;for(h in s)if(s.hasOwnProperty(h)){var u=s[h];h==="style"?hc(e,u):h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&cc(e,u)):h==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&ci(e,u):typeof u=="number"&&ci(e,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ai.hasOwnProperty(h)?u!=null&&h==="onScroll"&&ne("scroll",e):u!=null&&To(e,h,u,p))}switch(r){case"input":Pi(e),bl(e,i,!1);break;case"textarea":Pi(e),Ll(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Ht(i.value));break;case"select":e.multiple=!!i.multiple,h=i.value,h!=null?yr(e,!!i.multiple,h,!1):i.defaultValue!=null&&yr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=_s)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return be(t),null;case 6:if(e&&t.stateNode!=null)Bu(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(K(166));if(r=Xt(yi.current),Xt(ct.current),zi(t)){if(i=t.stateNode,r=t.memoizedProps,i[lt]=t,(h=i.nodeValue!==r)&&(e=Fe,e!==null))switch(e.tag){case 3:$i(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$i(i.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[lt]=t,t.stateNode=i}return be(t),null;case 13:if(oe(ce),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(le&&He!==null&&t.mode&1&&!(t.flags&128))Jc(),Rr(),t.flags|=98560,h=!1;else if(h=zi(t),i!==null&&i.dehydrated!==null){if(e===null){if(!h)throw Error(K(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(K(317));h[lt]=t}else Rr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;be(t),h=!1}else et!==null&&(wo(et),et=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ce.current&1?ge===0&&(ge=3):dl())),t.updateQueue!==null&&(t.flags|=4),be(t),null);case 4:return Tr(),fo(e,t),e===null&&vi(t.stateNode.containerInfo),be(t),null;case 10:return Xo(t.type._context),be(t),null;case 17:return Oe(t.type)&&vs(),be(t),null;case 19:if(oe(ce),h=t.memoizedState,h===null)return be(t),null;if(i=(t.flags&128)!==0,p=h.rendering,p===null)if(i)Gr(h,!1);else{if(ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=xs(e),p!==null){for(t.flags|=128,Gr(h,!1),i=p.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)h=r,e=i,h.flags&=14680066,p=h.alternate,p===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=p.childLanes,h.lanes=p.lanes,h.child=p.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=p.memoizedProps,h.memoizedState=p.memoizedState,h.updateQueue=p.updateQueue,h.type=p.type,e=p.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return se(ce,ce.current&1|2),t.child}e=e.sibling}h.tail!==null&&pe()>Ar&&(t.flags|=128,i=!0,Gr(h,!1),t.lanes=4194304)}else{if(!i)if(e=xs(p),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Gr(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!le)return be(t),null}else 2*pe()-h.renderingStartTime>Ar&&r!==1073741824&&(t.flags|=128,i=!0,Gr(h,!1),t.lanes=4194304);h.isBackwards?(p.sibling=t.child,t.child=p):(r=h.last,r!==null?r.sibling=p:t.child=p,h.last=p)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=pe(),t.sibling=null,r=ce.current,se(ce,i?r&1|2:r&1),t):(be(t),null);case 22:case 23:return hl(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?je&1073741824&&(be(t),t.subtreeFlags&6&&(t.flags|=8192)):be(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function gf(e,t){switch(Vo(t),t.tag){case 1:return Oe(t.type)&&vs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tr(),oe(Ie),oe(Le),el(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zo(t),null;case 13:if(oe(ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));Rr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(ce),null;case 4:return Tr(),null;case 10:return Xo(t.type._context),null;case 22:case 23:return hl(),null;case 24:return null;default:return null}}var Vi=!1,Ee=!1,mf=typeof WeakSet=="function"?WeakSet:Set,X=null;function mr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){de(e,t,i)}else r.current=null}function po(e,t,r){try{r()}catch(i){de(e,t,i)}}var va=!1;function Sf(e,t){if(Qn=ds,e=Hc(),Wo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,h=i.focusNode;i=i.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var p=0,s=-1,u=-1,d=0,S=0,f=e,g=null;t:for(;;){for(var C;f!==r||o!==0&&f.nodeType!==3||(s=p+o),f!==h||i!==0&&f.nodeType!==3||(u=p+i),f.nodeType===3&&(p+=f.nodeValue.length),(C=f.firstChild)!==null;)g=f,f=C;for(;;){if(f===e)break t;if(g===r&&++d===o&&(s=p),g===h&&++S===i&&(u=p),(C=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=C}r=s===-1||u===-1?null:{start:s,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Yn={focusedElem:e,selectionRange:r},ds=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,c=w.memoizedState,l=t.stateNode,n=l.getSnapshotBeforeUpdate(t.elementType===t.type?y:Je(t.type,y),c);l.__reactInternalSnapshotBeforeUpdate=n}break;case 3:var a=t.stateNode.containerInfo;a.nodeType===1?a.textContent="":a.nodeType===9&&a.documentElement&&a.removeChild(a.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(_){de(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return w=va,va=!1,w}function ni(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var h=o.destroy;o.destroy=void 0,h!==void 0&&po(t,r,h)}o=o.next}while(o!==i)}}function Fs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function _o(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Iu(e){var t=e.alternate;t!==null&&(e.alternate=null,Iu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lt],delete t[mi],delete t[eo],delete t[ef],delete t[tf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ou(e){return e.tag===5||e.tag===3||e.tag===4}function ga(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vo(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=_s));else if(i!==4&&(e=e.child,e!==null))for(vo(e,t,r),e=e.sibling;e!==null;)vo(e,t,r),e=e.sibling}function go(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(go(e,t,r),e=e.sibling;e!==null;)go(e,t,r),e=e.sibling}var we=null,Ze=!1;function xt(e,t,r){for(r=r.child;r!==null;)Nu(e,t,r),r=r.sibling}function Nu(e,t,r){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(As,r)}catch{}switch(r.tag){case 5:Ee||mr(r,t);case 6:var i=we,o=Ze;we=null,xt(e,t,r),we=i,Ze=o,we!==null&&(Ze?(e=we,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):we.removeChild(r.stateNode));break;case 18:we!==null&&(Ze?(e=we,r=r.stateNode,e.nodeType===8?vn(e.parentNode,r):e.nodeType===1&&vn(e,r),fi(e)):vn(we,r.stateNode));break;case 4:i=we,o=Ze,we=r.stateNode.containerInfo,Ze=!0,xt(e,t,r),we=i,Ze=o;break;case 0:case 11:case 14:case 15:if(!Ee&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var h=o,p=h.destroy;h=h.tag,p!==void 0&&(h&2||h&4)&&po(r,t,p),o=o.next}while(o!==i)}xt(e,t,r);break;case 1:if(!Ee&&(mr(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(s){de(r,t,s)}xt(e,t,r);break;case 21:xt(e,t,r);break;case 22:r.mode&1?(Ee=(i=Ee)||r.memoizedState!==null,xt(e,t,r),Ee=i):xt(e,t,r);break;default:xt(e,t,r)}}function ma(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new mf),t.forEach(function(i){var o=Rf.bind(null,e,i);r.has(i)||(r.add(i),i.then(o,o))})}}function Ye(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var h=e,p=t,s=p;e:for(;s!==null;){switch(s.tag){case 5:we=s.stateNode,Ze=!1;break e;case 3:we=s.stateNode.containerInfo,Ze=!0;break e;case 4:we=s.stateNode.containerInfo,Ze=!0;break e}s=s.return}if(we===null)throw Error(K(160));Nu(h,p,o),we=null,Ze=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(d){de(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ju(t,e),t=t.sibling}function ju(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ye(t,e),nt(e),i&4){try{ni(3,e,e.return),Fs(3,e)}catch(y){de(e,e.return,y)}try{ni(5,e,e.return)}catch(y){de(e,e.return,y)}}break;case 1:Ye(t,e),nt(e),i&512&&r!==null&&mr(r,r.return);break;case 5:if(Ye(t,e),nt(e),i&512&&r!==null&&mr(r,r.return),e.flags&32){var o=e.stateNode;try{ci(o,"")}catch(y){de(e,e.return,y)}}if(i&4&&(o=e.stateNode,o!=null)){var h=e.memoizedProps,p=r!==null?r.memoizedProps:h,s=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{s==="input"&&h.type==="radio"&&h.name!=null&&oc(o,h),Fn(s,p);var d=Fn(s,h);for(p=0;p<u.length;p+=2){var S=u[p],f=u[p+1];S==="style"?hc(o,f):S==="dangerouslySetInnerHTML"?cc(o,f):S==="children"?ci(o,f):To(o,S,f,d)}switch(s){case"input":In(o,h);break;case"textarea":lc(o,h);break;case"select":var g=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!h.multiple;var C=h.value;C!=null?yr(o,!!h.multiple,C,!1):g!==!!h.multiple&&(h.defaultValue!=null?yr(o,!!h.multiple,h.defaultValue,!0):yr(o,!!h.multiple,h.multiple?[]:"",!1))}o[mi]=h}catch(y){de(e,e.return,y)}}break;case 6:if(Ye(t,e),nt(e),i&4){if(e.stateNode===null)throw Error(K(162));o=e.stateNode,h=e.memoizedProps;try{o.nodeValue=h}catch(y){de(e,e.return,y)}}break;case 3:if(Ye(t,e),nt(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{fi(t.containerInfo)}catch(y){de(e,e.return,y)}break;case 4:Ye(t,e),nt(e);break;case 13:Ye(t,e),nt(e),o=e.child,o.flags&8192&&(h=o.memoizedState!==null,o.stateNode.isHidden=h,!h||o.alternate!==null&&o.alternate.memoizedState!==null||(cl=pe())),i&4&&ma(e);break;case 22:if(S=r!==null&&r.memoizedState!==null,e.mode&1?(Ee=(d=Ee)||S,Ye(t,e),Ee=d):Ye(t,e),nt(e),i&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!S&&e.mode&1)for(X=e,S=e.child;S!==null;){for(f=X=S;X!==null;){switch(g=X,C=g.child,g.tag){case 0:case 11:case 14:case 15:ni(4,g,g.return);break;case 1:mr(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){i=g,r=g.return;try{t=i,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){de(i,r,y)}}break;case 5:mr(g,g.return);break;case 22:if(g.memoizedState!==null){ya(f);continue}}C!==null?(C.return=g,X=C):ya(f)}S=S.sibling}e:for(S=null,f=e;;){if(f.tag===5){if(S===null){S=f;try{o=f.stateNode,d?(h=o.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(s=f.stateNode,u=f.memoizedProps.style,p=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=uc("display",p))}catch(y){de(e,e.return,y)}}}else if(f.tag===6){if(S===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){de(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;S===f&&(S=null),f=f.return}S===f&&(S=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ye(t,e),nt(e),i&4&&ma(e);break;case 21:break;default:Ye(t,e),nt(e)}}function nt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ou(r)){var i=r;break e}r=r.return}throw Error(K(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(ci(o,""),i.flags&=-33);var h=ga(e);go(e,h,o);break;case 3:case 4:var p=i.stateNode.containerInfo,s=ga(e);vo(e,s,p);break;default:throw Error(K(161))}}catch(u){de(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yf(e,t,r){X=e,Hu(e)}function Hu(e,t,r){for(var i=(e.mode&1)!==0;X!==null;){var o=X,h=o.child;if(o.tag===22&&i){var p=o.memoizedState!==null||Vi;if(!p){var s=o.alternate,u=s!==null&&s.memoizedState!==null||Ee;s=Vi;var d=Ee;if(Vi=p,(Ee=u)&&!d)for(X=o;X!==null;)p=X,u=p.child,p.tag===22&&p.memoizedState!==null?wa(o):u!==null?(u.return=p,X=u):wa(o);for(;h!==null;)X=h,Hu(h),h=h.sibling;X=o,Vi=s,Ee=d}Sa(e)}else o.subtreeFlags&8772&&h!==null?(h.return=o,X=h):Sa(e)}}function Sa(e){for(;X!==null;){var t=X;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ee||Fs(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ee)if(r===null)i.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:Je(t.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&ia(t,h,i);break;case 3:var p=t.updateQueue;if(p!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ia(t,p,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var S=d.memoizedState;if(S!==null){var f=S.dehydrated;f!==null&&fi(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Ee||t.flags&512&&_o(t)}catch(g){de(t,t.return,g)}}if(t===e){X=null;break}if(r=t.sibling,r!==null){r.return=t.return,X=r;break}X=t.return}}function ya(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var r=t.sibling;if(r!==null){r.return=t.return,X=r;break}X=t.return}}function wa(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Fs(4,t)}catch(u){de(t,r,u)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(u){de(t,o,u)}}var h=t.return;try{_o(t)}catch(u){de(t,h,u)}break;case 5:var p=t.return;try{_o(t)}catch(u){de(t,p,u)}}}catch(u){de(t,t.return,u)}if(t===e){X=null;break}var s=t.sibling;if(s!==null){s.return=t.return,X=s;break}X=t.return}}var wf=Math.ceil,Es=St.ReactCurrentDispatcher,ll=St.ReactCurrentOwner,qe=St.ReactCurrentBatchConfig,ee=0,Se=null,_e=null,Ce=0,je=0,Sr=zt(0),ge=0,ki=null,tr=0,$s=0,al=0,oi=null,Pe=null,cl=0,Ar=1/0,ut=null,Ls=!1,mo=null,Ot=null,Ki=!1,Dt=null,Rs=0,li=0,So=null,is=-1,ss=0;function De(){return ee&6?pe():is!==-1?is:is=pe()}function Nt(e){return e.mode&1?ee&2&&Ce!==0?Ce&-Ce:sf.transition!==null?(ss===0&&(ss=xc()),ss):(e=ie,e!==0||(e=window.event,e=e===void 0?16:Tc(e.type)),e):1}function rt(e,t,r,i){if(50<li)throw li=0,So=null,Error(K(185));Ei(e,r,i),(!(ee&2)||e!==Se)&&(e===Se&&(!(ee&2)&&($s|=r),ge===4&&Lt(e,Ce)),Ne(e,i),r===1&&ee===0&&!(t.mode&1)&&(Ar=pe()+500,Ns&&Wt()))}function Ne(e,t){var r=e.callbackNode;id(e,t);var i=hs(e,e===Se?Ce:0);if(i===0)r!==null&&Tl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&Tl(r),t===1)e.tag===0?rf(Ca.bind(null,e)):Xc(Ca.bind(null,e)),Jd(function(){!(ee&6)&&Wt()}),r=null;else{switch(kc(i)){case 1:r=Io;break;case 4:r=wc;break;case 16:r=us;break;case 536870912:r=Cc;break;default:r=us}r=Gu(r,Fu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Fu(e,t){if(is=-1,ss=0,ee&6)throw Error(K(327));var r=e.callbackNode;if(br()&&e.callbackNode!==r)return null;var i=hs(e,e===Se?Ce:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Ds(e,i);else{t=i;var o=ee;ee|=2;var h=zu();(Se!==e||Ce!==t)&&(ut=null,Ar=pe()+500,Qt(e,t));do try{kf();break}catch(s){$u(e,s)}while(!0);qo(),Es.current=h,ee=o,_e!==null?t=0:(Se=null,Ce=0,t=ge)}if(t!==0){if(t===2&&(o=Vn(e),o!==0&&(i=o,t=yo(e,o))),t===1)throw r=ki,Qt(e,0),Lt(e,i),Ne(e,pe()),r;if(t===6)Lt(e,i);else{if(o=e.current.alternate,!(i&30)&&!Cf(o)&&(t=Ds(e,i),t===2&&(h=Vn(e),h!==0&&(i=h,t=yo(e,h))),t===1))throw r=ki,Qt(e,0),Lt(e,i),Ne(e,pe()),r;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(K(345));case 2:Vt(e,Pe,ut);break;case 3:if(Lt(e,i),(i&130023424)===i&&(t=cl+500-pe(),10<t)){if(hs(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){De(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Zn(Vt.bind(null,e,Pe,ut),t);break}Vt(e,Pe,ut);break;case 4:if(Lt(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var p=31-tt(i);h=1<<p,p=t[p],p>o&&(o=p),i&=~h}if(i=o,i=pe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*wf(i/1960))-i,10<i){e.timeoutHandle=Zn(Vt.bind(null,e,Pe,ut),i);break}Vt(e,Pe,ut);break;case 5:Vt(e,Pe,ut);break;default:throw Error(K(329))}}}return Ne(e,pe()),e.callbackNode===r?Fu.bind(null,e):null}function yo(e,t){var r=oi;return e.current.memoizedState.isDehydrated&&(Qt(e,t).flags|=256),e=Ds(e,t),e!==2&&(t=Pe,Pe=r,t!==null&&wo(t)),e}function wo(e){Pe===null?Pe=e:Pe.push.apply(Pe,e)}function Cf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],h=o.getSnapshot;o=o.value;try{if(!it(h(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lt(e,t){for(t&=~al,t&=~$s,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-tt(t),i=1<<r;e[r]=-1,t&=~i}}function Ca(e){if(ee&6)throw Error(K(327));br();var t=hs(e,0);if(!(t&1))return Ne(e,pe()),null;var r=Ds(e,t);if(e.tag!==0&&r===2){var i=Vn(e);i!==0&&(t=i,r=yo(e,i))}if(r===1)throw r=ki,Qt(e,0),Lt(e,t),Ne(e,pe()),r;if(r===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vt(e,Pe,ut),Ne(e,pe()),null}function ul(e,t){var r=ee;ee|=1;try{return e(t)}finally{ee=r,ee===0&&(Ar=pe()+500,Ns&&Wt())}}function rr(e){Dt!==null&&Dt.tag===0&&!(ee&6)&&br();var t=ee;ee|=1;var r=qe.transition,i=ie;try{if(qe.transition=null,ie=1,e)return e()}finally{ie=i,qe.transition=r,ee=t,!(ee&6)&&Wt()}}function hl(){je=Sr.current,oe(Sr)}function Qt(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Yd(r)),_e!==null)for(r=_e.return;r!==null;){var i=r;switch(Vo(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&vs();break;case 3:Tr(),oe(Ie),oe(Le),el();break;case 5:Zo(i);break;case 4:Tr();break;case 13:oe(ce);break;case 19:oe(ce);break;case 10:Xo(i.type._context);break;case 22:case 23:hl()}r=r.return}if(Se=e,_e=e=jt(e.current,null),Ce=je=t,ge=0,ki=null,al=$s=tr=0,Pe=oi=null,qt!==null){for(t=0;t<qt.length;t++)if(r=qt[t],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,h=r.pending;if(h!==null){var p=h.next;h.next=o,i.next=p}r.pending=i}qt=null}return e}function $u(e,t){do{var r=_e;try{if(qo(),es.current=bs,ks){for(var i=ue.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}ks=!1}if(er=0,me=ve=ue=null,si=!1,wi=0,ll.current=null,r===null||r.return===null){ge=1,ki=t,_e=null;break}e:{var h=e,p=r.return,s=r,u=t;if(t=Ce,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,S=s,f=S.tag;if(!(S.mode&1)&&(f===0||f===11||f===15)){var g=S.alternate;g?(S.updateQueue=g.updateQueue,S.memoizedState=g.memoizedState,S.lanes=g.lanes):(S.updateQueue=null,S.memoizedState=null)}var C=ca(p);if(C!==null){C.flags&=-257,ua(C,p,s,h,t),C.mode&1&&aa(h,d,t),t=C,u=d;var w=t.updateQueue;if(w===null){var y=new Set;y.add(u),t.updateQueue=y}else w.add(u);break e}else{if(!(t&1)){aa(h,d,t),dl();break e}u=Error(K(426))}}else if(le&&s.mode&1){var c=ca(p);if(c!==null){!(c.flags&65536)&&(c.flags|=256),ua(c,p,s,h,t),Ko(Mr(u,s));break e}}h=u=Mr(u,s),ge!==4&&(ge=2),oi===null?oi=[h]:oi.push(h),h=p;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var l=ku(h,u,t);ra(h,l);break e;case 1:s=u;var n=h.type,a=h.stateNode;if(!(h.flags&128)&&(typeof n.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Ot===null||!Ot.has(a)))){h.flags|=65536,t&=-t,h.lanes|=t;var _=bu(h,s,t);ra(h,_);break e}}h=h.return}while(h!==null)}Uu(r)}catch(m){t=m,_e===r&&r!==null&&(_e=r=r.return);continue}break}while(!0)}function zu(){var e=Es.current;return Es.current=bs,e===null?bs:e}function dl(){(ge===0||ge===3||ge===2)&&(ge=4),Se===null||!(tr&268435455)&&!($s&268435455)||Lt(Se,Ce)}function Ds(e,t){var r=ee;ee|=2;var i=zu();(Se!==e||Ce!==t)&&(ut=null,Qt(e,t));do try{xf();break}catch(o){$u(e,o)}while(!0);if(qo(),ee=r,Es.current=i,_e!==null)throw Error(K(261));return Se=null,Ce=0,ge}function xf(){for(;_e!==null;)Wu(_e)}function kf(){for(;_e!==null&&!qh();)Wu(_e)}function Wu(e){var t=Ku(e.alternate,e,je);e.memoizedProps=e.pendingProps,t===null?Uu(e):_e=t,ll.current=null}function Uu(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gf(r,t),r!==null){r.flags&=32767,_e=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ge=6,_e=null;return}}else if(r=vf(r,t,je),r!==null){_e=r;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);ge===0&&(ge=5)}function Vt(e,t,r){var i=ie,o=qe.transition;try{qe.transition=null,ie=1,bf(e,t,r,i)}finally{qe.transition=o,ie=i}return null}function bf(e,t,r,i){do br();while(Dt!==null);if(ee&6)throw Error(K(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(sd(e,h),e===Se&&(_e=Se=null,Ce=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ki||(Ki=!0,Gu(us,function(){return br(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=qe.transition,qe.transition=null;var p=ie;ie=1;var s=ee;ee|=4,ll.current=null,Sf(e,r),ju(r,e),Ud(Yn),ds=!!Qn,Yn=Qn=null,e.current=r,yf(r),Xh(),ee=s,ie=p,qe.transition=h}else e.current=r;if(Ki&&(Ki=!1,Dt=e,Rs=o),h=e.pendingLanes,h===0&&(Ot=null),Jh(r.stateNode),Ne(e,pe()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(Ls)throw Ls=!1,e=mo,mo=null,e;return Rs&1&&e.tag!==0&&br(),h=e.pendingLanes,h&1?e===So?li++:(li=0,So=e):li=0,Wt(),null}function br(){if(Dt!==null){var e=kc(Rs),t=qe.transition,r=ie;try{if(qe.transition=null,ie=16>e?16:e,Dt===null)var i=!1;else{if(e=Dt,Dt=null,Rs=0,ee&6)throw Error(K(331));var o=ee;for(ee|=4,X=e.current;X!==null;){var h=X,p=h.child;if(X.flags&16){var s=h.deletions;if(s!==null){for(var u=0;u<s.length;u++){var d=s[u];for(X=d;X!==null;){var S=X;switch(S.tag){case 0:case 11:case 15:ni(8,S,h)}var f=S.child;if(f!==null)f.return=S,X=f;else for(;X!==null;){S=X;var g=S.sibling,C=S.return;if(Iu(S),S===d){X=null;break}if(g!==null){g.return=C,X=g;break}X=C}}}var w=h.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var c=y.sibling;y.sibling=null,y=c}while(y!==null)}}X=h}}if(h.subtreeFlags&2064&&p!==null)p.return=h,X=p;else e:for(;X!==null;){if(h=X,h.flags&2048)switch(h.tag){case 0:case 11:case 15:ni(9,h,h.return)}var l=h.sibling;if(l!==null){l.return=h.return,X=l;break e}X=h.return}}var n=e.current;for(X=n;X!==null;){p=X;var a=p.child;if(p.subtreeFlags&2064&&a!==null)a.return=p,X=a;else e:for(p=n;X!==null;){if(s=X,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Fs(9,s)}}catch(m){de(s,s.return,m)}if(s===p){X=null;break e}var _=s.sibling;if(_!==null){_.return=s.return,X=_;break e}X=s.return}}if(ee=o,Wt(),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(As,e)}catch{}i=!0}return i}finally{ie=r,qe.transition=t}}return!1}function xa(e,t,r){t=Mr(r,t),t=ku(e,t,1),e=It(e,t,1),t=De(),e!==null&&(Ei(e,1,t),Ne(e,t))}function de(e,t,r){if(e.tag===3)xa(e,e,r);else for(;t!==null;){if(t.tag===3){xa(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ot===null||!Ot.has(i))){e=Mr(r,e),e=bu(t,e,1),t=It(t,e,1),e=De(),t!==null&&(Ei(t,1,e),Ne(t,e));break}}t=t.return}}function Ef(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=De(),e.pingedLanes|=e.suspendedLanes&r,Se===e&&(Ce&r)===r&&(ge===4||ge===3&&(Ce&130023424)===Ce&&500>pe()-cl?Qt(e,0):al|=r),Ne(e,t)}function Vu(e,t){t===0&&(e.mode&1?(t=Oi,Oi<<=1,!(Oi&130023424)&&(Oi=4194304)):t=1);var r=De();e=gt(e,t),e!==null&&(Ei(e,t,r),Ne(e,r))}function Lf(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Vu(e,r)}function Rf(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(K(314))}i!==null&&i.delete(t),Vu(e,r)}var Ku;Ku=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ie.current)Be=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Be=!1,_f(e,t,r);Be=!!(e.flags&131072)}else Be=!1,le&&t.flags&1048576&&Qc(t,Ss,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;rs(e,t),e=t.pendingProps;var o=Lr(t,Le.current);kr(t,r),o=rl(null,t,i,e,o,r);var h=il();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oe(i)?(h=!0,gs(t)):h=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Yo(t),o.updater=Hs,t.stateNode=o,o._reactInternals=t,oo(t,i,e,r),t=co(null,t,i,!0,h,r)):(t.tag=0,le&&h&&Uo(t),Re(null,t,o,r),t=t.child),t;case 16:i=t.elementType;e:{switch(rs(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=Tf(i),e=Je(i,e),o){case 0:t=ao(null,t,i,e,r);break e;case 1:t=fa(null,t,i,e,r);break e;case 11:t=ha(null,t,i,e,r);break e;case 14:t=da(null,t,i,Je(i.type,e),r);break e}throw Error(K(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Je(i,o),ao(e,t,i,o,r);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Je(i,o),fa(e,t,i,o,r);case 3:e:{if(Du(t),e===null)throw Error(K(387));i=t.pendingProps,h=t.memoizedState,o=h.element,ru(e,t),Cs(t,i,null,r);var p=t.memoizedState;if(i=p.element,h.isDehydrated)if(h={element:i,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){o=Mr(Error(K(423)),t),t=pa(e,t,i,r,o);break e}else if(i!==o){o=Mr(Error(K(424)),t),t=pa(e,t,i,r,o);break e}else for(He=Bt(t.stateNode.containerInfo.firstChild),Fe=t,le=!0,et=null,r=eu(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Rr(),i===o){t=mt(e,t,r);break e}Re(e,t,i,r)}t=t.child}return t;case 5:return iu(t),e===null&&io(t),i=t.type,o=t.pendingProps,h=e!==null?e.memoizedProps:null,p=o.children,Jn(i,o)?p=null:h!==null&&Jn(i,h)&&(t.flags|=32),Ru(e,t),Re(e,t,p,r),t.child;case 6:return e===null&&io(t),null;case 13:return Tu(e,t,r);case 4:return Jo(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Dr(t,null,i,r):Re(e,t,i,r),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Je(i,o),ha(e,t,i,o,r);case 7:return Re(e,t,t.pendingProps,r),t.child;case 8:return Re(e,t,t.pendingProps.children,r),t.child;case 12:return Re(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,h=t.memoizedProps,p=o.value,se(ys,i._currentValue),i._currentValue=p,h!==null)if(it(h.value,p)){if(h.children===o.children&&!Ie.current){t=mt(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var s=h.dependencies;if(s!==null){p=h.child;for(var u=s.firstContext;u!==null;){if(u.context===i){if(h.tag===1){u=pt(-1,r&-r),u.tag=2;var d=h.updateQueue;if(d!==null){d=d.shared;var S=d.pending;S===null?u.next=u:(u.next=S.next,S.next=u),d.pending=u}}h.lanes|=r,u=h.alternate,u!==null&&(u.lanes|=r),so(h.return,r,t),s.lanes|=r;break}u=u.next}}else if(h.tag===10)p=h.type===t.type?null:h.child;else if(h.tag===18){if(p=h.return,p===null)throw Error(K(341));p.lanes|=r,s=p.alternate,s!==null&&(s.lanes|=r),so(p,r,t),p=h.sibling}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===t){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}Re(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,kr(t,r),o=Xe(o),i=i(o),t.flags|=1,Re(e,t,i,r),t.child;case 14:return i=t.type,o=Je(i,t.pendingProps),o=Je(i.type,o),da(e,t,i,o,r);case 15:return Eu(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:Je(i,o),rs(e,t),t.tag=1,Oe(i)?(e=!0,gs(t)):e=!1,kr(t,r),xu(t,i,o),oo(t,i,o,r),co(null,t,i,!0,e,r);case 19:return Mu(e,t,r);case 22:return Lu(e,t,r)}throw Error(K(156,t.tag))};function Gu(e,t){return yc(e,t)}function Df(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(e,t,r,i){return new Df(e,t,r,i)}function fl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tf(e){if(typeof e=="function")return fl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ao)return 11;if(e===Po)return 14}return 2}function jt(e,t){var r=e.alternate;return r===null?(r=Ge(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ns(e,t,r,i,o,h){var p=2;if(i=e,typeof e=="function")fl(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case cr:return Yt(r.children,o,h,t);case Mo:p=8,o|=8;break;case Tn:return e=Ge(12,r,t,o|2),e.elementType=Tn,e.lanes=h,e;case Mn:return e=Ge(13,r,t,o),e.elementType=Mn,e.lanes=h,e;case An:return e=Ge(19,r,t,o),e.elementType=An,e.lanes=h,e;case ic:return zs(r,o,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tc:p=10;break e;case rc:p=9;break e;case Ao:p=11;break e;case Po:p=14;break e;case kt:p=16,i=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Ge(p,r,t,o),t.elementType=e,t.type=i,t.lanes=h,t}function Yt(e,t,r,i){return e=Ge(7,e,i,t),e.lanes=r,e}function zs(e,t,r,i){return e=Ge(22,e,i,t),e.elementType=ic,e.lanes=r,e.stateNode={isHidden:!1},e}function kn(e,t,r){return e=Ge(6,e,null,t),e.lanes=r,e}function bn(e,t,r){return t=Ge(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mf(e,t,r,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nn(0),this.expirationTimes=nn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nn(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function pl(e,t,r,i,o,h,p,s,u){return e=new Mf(e,t,r,s,u),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Ge(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yo(h),e}function Af(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ar,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function qu(e){if(!e)return Ft;e=e._reactInternals;e:{if(sr(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var r=e.type;if(Oe(r))return qc(e,r,t)}return t}function Xu(e,t,r,i,o,h,p,s,u){return e=pl(r,i,!0,e,o,h,p,s,u),e.context=qu(null),r=e.current,i=De(),o=Nt(r),h=pt(i,o),h.callback=t??null,It(r,h,o),e.current.lanes=o,Ei(e,o,i),Ne(e,i),e}function Ws(e,t,r,i){var o=t.current,h=De(),p=Nt(o);return r=qu(r),t.context===null?t.context=r:t.pendingContext=r,t=pt(h,p),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=It(o,t,p),e!==null&&(rt(e,o,p,h),Zi(e,o,p)),p}function Ts(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ka(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function _l(e,t){ka(e,t),(e=e.alternate)&&ka(e,t)}function Pf(){return null}var Qu=typeof reportError=="function"?reportError:function(e){console.error(e)};function vl(e){this._internalRoot=e}Us.prototype.render=vl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Ws(e,t,null,null)};Us.prototype.unmount=vl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rr(function(){Ws(null,e,null,null)}),t[vt]=null}};function Us(e){this._internalRoot=e}Us.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Et.length&&t!==0&&t<Et[r].priority;r++);Et.splice(r,0,e),r===0&&Dc(e)}};function gl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ba(){}function Bf(e,t,r,i,o){if(o){if(typeof i=="function"){var h=i;i=function(){var d=Ts(p);h.call(d)}}var p=Xu(t,i,e,0,null,!1,!1,"",ba);return e._reactRootContainer=p,e[vt]=p.current,vi(e.nodeType===8?e.parentNode:e),rr(),p}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var s=i;i=function(){var d=Ts(u);s.call(d)}}var u=pl(e,0,!1,null,null,!1,!1,"",ba);return e._reactRootContainer=u,e[vt]=u.current,vi(e.nodeType===8?e.parentNode:e),rr(function(){Ws(t,u,r,i)}),u}function Ks(e,t,r,i,o){var h=r._reactRootContainer;if(h){var p=h;if(typeof o=="function"){var s=o;o=function(){var u=Ts(p);s.call(u)}}Ws(t,p,e,o)}else p=Bf(r,t,e,o,i);return Ts(p)}bc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Yr(t.pendingLanes);r!==0&&(Oo(t,r|1),Ne(t,pe()),!(ee&6)&&(Ar=pe()+500,Wt()))}break;case 13:rr(function(){var i=gt(e,1);if(i!==null){var o=De();rt(i,e,1,o)}}),_l(e,1)}};No=function(e){if(e.tag===13){var t=gt(e,134217728);if(t!==null){var r=De();rt(t,e,134217728,r)}_l(e,134217728)}};Ec=function(e){if(e.tag===13){var t=Nt(e),r=gt(e,t);if(r!==null){var i=De();rt(r,e,t,i)}_l(e,t)}};Lc=function(){return ie};Rc=function(e,t){var r=ie;try{return ie=e,t()}finally{ie=r}};zn=function(e,t,r){switch(t){case"input":if(In(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var o=Os(i);if(!o)throw Error(K(90));nc(i),In(i,o)}}}break;case"textarea":lc(e,r);break;case"select":t=r.value,t!=null&&yr(e,!!r.multiple,t,!1)}};pc=ul;_c=rr;var If={usingClientEntryPoint:!1,Events:[Ri,fr,Os,dc,fc,ul]},qr={findFiberByHostInstance:Gt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Of={bundleType:qr.bundleType,version:qr.version,rendererPackageName:qr.rendererPackageName,rendererConfig:qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:St.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mc(e),e===null?null:e.stateNode},findFiberByHostInstance:qr.findFiberByHostInstance||Pf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gi.isDisabled&&Gi.supportsFiber)try{As=Gi.inject(Of),at=Gi}catch{}}ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=If;ze.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gl(t))throw Error(K(200));return Af(e,t,null,r)};ze.createRoot=function(e,t){if(!gl(e))throw Error(K(299));var r=!1,i="",o=Qu;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=pl(e,1,!1,null,null,r,!1,i,o),e[vt]=t.current,vi(e.nodeType===8?e.parentNode:e),new vl(t)};ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=mc(t),e=e===null?null:e.stateNode,e};ze.flushSync=function(e){return rr(e)};ze.hydrate=function(e,t,r){if(!Vs(t))throw Error(K(200));return Ks(null,e,t,!0,r)};ze.hydrateRoot=function(e,t,r){if(!gl(e))throw Error(K(405));var i=r!=null&&r.hydratedSources||null,o=!1,h="",p=Qu;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),t=Xu(t,null,e,1,r??null,o,!1,h,p),e[vt]=t.current,vi(e),i)for(e=0;e<i.length;e++)r=i[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Us(t)};ze.render=function(e,t,r){if(!Vs(t))throw Error(K(200));return Ks(null,e,t,!1,r)};ze.unmountComponentAtNode=function(e){if(!Vs(e))throw Error(K(40));return e._reactRootContainer?(rr(function(){Ks(null,null,e,!1,function(){e._reactRootContainer=null,e[vt]=null})}),!0):!1};ze.unstable_batchedUpdates=ul;ze.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Vs(r))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Ks(e,t,r,!1,i)};ze.version="18.3.1-next-f1338f8080-20240426";function Yu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yu)}catch(e){console.error(e)}}Yu(),Ya.exports=ze;var Nf=Ya.exports,Ea=Nf;Rn.createRoot=Ea.createRoot,Rn.hydrateRoot=Ea.hydrateRoot;var Ju={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={4567:function(p,s,u){var d=this&&this.__decorate||function(a,_,m,x){var b,v=arguments.length,k=v<3?_:x===null?x=Object.getOwnPropertyDescriptor(_,m):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(a,_,m,x);else for(var D=a.length-1;D>=0;D--)(b=a[D])&&(k=(v<3?b(k):v>3?b(_,m,k):b(_,m))||k);return v>3&&k&&Object.defineProperty(_,m,k),k},S=this&&this.__param||function(a,_){return function(m,x){_(m,x,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;const f=u(9042),g=u(6114),C=u(9924),w=u(844),y=u(5596),c=u(4725),l=u(3656);let n=s.AccessibilityManager=class extends w.Disposable{constructor(a,_){super(),this._terminal=a,this._renderService=_,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let m=0;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);if(this._topBoundaryFocusListener=m=>this._handleBoundaryFocus(m,0),this._bottomBoundaryFocusListener=m=>this._handleBoundaryFocus(m,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new C.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(m=>this._handleResize(m.rows))),this.register(this._terminal.onRender(m=>this._refreshRows(m.start,m.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(m=>this._handleChar(m))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(m=>this._handleTab(m))),this.register(this._terminal.onKey(m=>this._handleKey(m.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new y.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(a){for(let _=0;_<a;_++)this._handleChar(" ")}_handleChar(a){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,a===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),g.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,g.isMac&&this._liveRegion.remove()}_handleKey(a){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(a)||this._charsToConsume.push(a)}_refreshRows(a,_){this._liveRegionDebouncer.refresh(a,_,this._terminal.rows)}_renderRows(a,_){const m=this._terminal.buffer,x=m.lines.length.toString();for(let b=a;b<=_;b++){const v=m.translateBufferLineToString(m.ydisp+b,!0),k=(m.ydisp+b+1).toString(),D=this._rowElements[b];D&&(v.length===0?D.innerText="":D.textContent=v,D.setAttribute("aria-posinset",k),D.setAttribute("aria-setsize",x))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(a,_){const m=a.target,x=this._rowElements[_===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(_===0?"1":`${this._terminal.buffer.lines.length}`)||a.relatedTarget!==x)return;let b,v;if(_===0?(b=m,v=this._rowElements.pop(),this._rowContainer.removeChild(v)):(b=this._rowElements.shift(),v=m,this._rowContainer.removeChild(b)),b.removeEventListener("focus",this._topBoundaryFocusListener),v.removeEventListener("focus",this._bottomBoundaryFocusListener),_===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(_===0?-1:1),this._rowElements[_===0?1:this._rowElements.length-2].focus(),a.preventDefault(),a.stopImmediatePropagation()}_handleResize(a){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let _=this._rowContainer.children.length;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const a=document.createElement("div");return a.setAttribute("role","listitem"),a.tabIndex=-1,this._refreshRowDimensions(a),a}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}}_refreshRowDimensions(a){a.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=n=d([S(1,c.IRenderService)],n)},3614:(p,s)=>{function u(g){return g.replace(/\r?\n/g,"\r")}function d(g,C){return C?"\x1B[200~"+g+"\x1B[201~":g}function S(g,C,w,y){g=d(g=u(g),w.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(g,!0),C.value=""}function f(g,C,w){const y=w.getBoundingClientRect(),c=g.clientX-y.left-10,l=g.clientY-y.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${c}px`,C.style.top=`${l}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=u,s.bracketTextForPaste=d,s.copyHandler=function(g,C){g.clipboardData&&g.clipboardData.setData("text/plain",C.selectionText),g.preventDefault()},s.handlePasteEvent=function(g,C,w,y){g.stopPropagation(),g.clipboardData&&S(g.clipboardData.getData("text/plain"),C,w,y)},s.paste=S,s.moveTextAreaUnderMouseCursor=f,s.rightClickHandler=function(g,C,w,y,c){f(g,C,w),c&&y.rightClickSelect(g),C.value=y.selectionText,C.select()}},7239:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;const d=u(1505);s.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(S,f,g){this._css.set(S,f,g)}getCss(S,f){return this._css.get(S,f)}setColor(S,f,g){this._color.set(S,f,g)}getColor(S,f){return this._color.get(S,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(u,d,S,f){u.addEventListener(d,S,f);let g=!1;return{dispose:()=>{g||(g=!0,u.removeEventListener(d,S,f))}}}},6465:function(p,s,u){var d=this&&this.__decorate||function(c,l,n,a){var _,m=arguments.length,x=m<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,l,n,a);else for(var b=c.length-1;b>=0;b--)(_=c[b])&&(x=(m<3?_(x):m>3?_(l,n,x):_(l,n))||x);return m>3&&x&&Object.defineProperty(l,n,x),x},S=this&&this.__param||function(c,l){return function(n,a){l(n,a,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;const f=u(3656),g=u(8460),C=u(844),w=u(2585);let y=s.Linkifier2=class extends C.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new g.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new g.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{const l=this._linkProviders.indexOf(c);l!==-1&&this._linkProviders.splice(l,1)}}}attachToDom(c,l,n){this._element=c,this._mouseService=l,this._renderService=n,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;const l=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const n=c.composedPath();for(let a=0;a<n.length;a++){const _=n[a];if(_.classList.contains("xterm"))break;if(_.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,l){var n,a;this._activeProviderReplies&&l||((n=this._activeProviderReplies)===null||n===void 0||n.forEach(m=>{m==null||m.forEach(x=>{x.link.dispose&&x.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let _=!1;for(const[m,x]of this._linkProviders.entries())l?!((a=this._activeProviderReplies)===null||a===void 0)&&a.get(m)&&(_=this._checkLinkProviderResult(m,c,_)):x.provideLinks(c.y,b=>{var v,k;if(this._isMouseOut)return;const D=b==null?void 0:b.map(R=>({link:R}));(v=this._activeProviderReplies)===null||v===void 0||v.set(m,D),_=this._checkLinkProviderResult(m,c,_),((k=this._activeProviderReplies)===null||k===void 0?void 0:k.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,l){const n=new Set;for(let a=0;a<l.size;a++){const _=l.get(a);if(_)for(let m=0;m<_.length;m++){const x=_[m],b=x.link.range.start.y<c?0:x.link.range.start.x,v=x.link.range.end.y>c?this._bufferService.cols:x.link.range.end.x;for(let k=b;k<=v;k++){if(n.has(k)){_.splice(m--,1);break}n.add(k)}}}}_checkLinkProviderResult(c,l,n){var a;if(!this._activeProviderReplies)return n;const _=this._activeProviderReplies.get(c);let m=!1;for(let x=0;x<c;x++)this._activeProviderReplies.has(x)&&!this._activeProviderReplies.get(x)||(m=!0);if(!m&&_){const x=_.find(b=>this._linkAtPosition(b.link,l));x&&(n=!0,this._handleNewLink(x))}if(this._activeProviderReplies.size===this._linkProviders.length&&!n)for(let x=0;x<this._activeProviderReplies.size;x++){const b=(a=this._activeProviderReplies.get(x))===null||a===void 0?void 0:a.find(v=>this._linkAtPosition(v.link,l));if(b){n=!0,this._handleNewLink(b);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;const l=this._positionFromMouseEvent(c,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,l){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!l||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(c.link,l)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var n,a;return(a=(n=this._currentLink)===null||n===void 0?void 0:n.state)===null||a===void 0?void 0:a.decorations.pointerCursor},set:n=>{var a,_;!((a=this._currentLink)===null||a===void 0)&&a.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&((_=this._element)===null||_===void 0||_.classList.toggle("xterm-cursor-pointer",n)))}},underline:{get:()=>{var n,a;return(a=(n=this._currentLink)===null||n===void 0?void 0:n.state)===null||a===void 0?void 0:a.decorations.underline},set:n=>{var a,_,m;!((a=this._currentLink)===null||a===void 0)&&a.state&&((m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.underline)!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,n))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;const a=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,_=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=_&&(this._clearCurrentLink(a,_),this._lastMouseEvent&&this._element)){const m=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);m&&this._askForLink(m,!1)}})))}_linkHover(c,l,n){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(n,l.text)}_fireUnderlineEvent(c,l){const n=c.range,a=this._bufferService.buffer.ydisp,_=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-a-1,n.end.x,n.end.y-a-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(_)}_linkLeave(c,l,n){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(n,l.text)}_linkAtPosition(c,l){const n=c.range.start.y*this._bufferService.cols+c.range.start.x,a=c.range.end.y*this._bufferService.cols+c.range.end.x,_=l.y*this._bufferService.cols+l.x;return n<=_&&_<=a}_positionFromMouseEvent(c,l,n){const a=n.getCoords(c,l,this._bufferService.cols,this._bufferService.rows);if(a)return{x:a[0],y:a[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,l,n,a,_){return{x1:c,y1:l,x2:n,y2:a,cols:this._bufferService.cols,fg:_}}};s.Linkifier2=y=d([S(0,w.IBufferService)],y)},9042:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(p,s,u){var d=this&&this.__decorate||function(y,c,l,n){var a,_=arguments.length,m=_<3?c:n===null?n=Object.getOwnPropertyDescriptor(c,l):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(y,c,l,n);else for(var x=y.length-1;x>=0;x--)(a=y[x])&&(m=(_<3?a(m):_>3?a(c,l,m):a(c,l))||m);return _>3&&m&&Object.defineProperty(c,l,m),m},S=this&&this.__param||function(y,c){return function(l,n){c(l,n,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;const f=u(511),g=u(2585);let C=s.OscLinkProvider=class{constructor(y,c,l){this._bufferService=y,this._optionsService=c,this._oscLinkService=l}provideLinks(y,c){var l;const n=this._bufferService.buffer.lines.get(y-1);if(!n)return void c(void 0);const a=[],_=this._optionsService.rawOptions.linkHandler,m=new f.CellData,x=n.getTrimmedLength();let b=-1,v=-1,k=!1;for(let D=0;D<x;D++)if(v!==-1||n.hasContent(D)){if(n.loadCell(D,m),m.hasExtendedAttrs()&&m.extended.urlId){if(v===-1){v=D,b=m.extended.urlId;continue}k=m.extended.urlId!==b}else v!==-1&&(k=!0);if(k||v!==-1&&D===x-1){const R=(l=this._oscLinkService.getLinkData(b))===null||l===void 0?void 0:l.uri;if(R){const T={start:{x:v+1,y},end:{x:D+(k||D!==x-1?0:1),y}};let B=!1;if(!(_!=null&&_.allowNonHttpProtocols))try{const j=new URL(R);["http:","https:"].includes(j.protocol)||(B=!0)}catch{B=!0}B||a.push({text:R,range:T,activate:(j,H)=>_?_.activate(j,H,T):w(0,H),hover:(j,H)=>{var U;return(U=_==null?void 0:_.hover)===null||U===void 0?void 0:U.call(_,j,H,T)},leave:(j,H)=>{var U;return(U=_==null?void 0:_.leave)===null||U===void 0?void 0:U.call(_,j,H,T)}})}k=!1,m.hasExtendedAttrs()&&m.extended.urlId?(v=D,b=m.extended.urlId):(v=-1,b=-1)}}c(a)}};function w(y,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=C=d([S(0,g.IBufferService),S(1,g.IOptionsService),S(2,g.IOscLinkService)],C)},6193:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(u,d){this._parentWindow=u,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(u){return this._refreshCallbacks.push(u),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(u,d,S){this._rowCount=S,u=u!==void 0?u:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const u=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const u of this._refreshCallbacks)u(0);this._refreshCallbacks=[]}}},5596:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;const d=u(844);class S extends d.Disposable{constructor(g){super(),this._parentWindow=g,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(g){this._listener&&this.clearListener(),this._listener=g,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)===null||g===void 0||g.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=S},3236:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;const d=u(3614),S=u(3656),f=u(6465),g=u(9042),C=u(3730),w=u(1680),y=u(3107),c=u(5744),l=u(2950),n=u(1296),a=u(428),_=u(4269),m=u(5114),x=u(8934),b=u(3230),v=u(9312),k=u(4725),D=u(6731),R=u(8055),T=u(8969),B=u(8460),j=u(844),H=u(6114),U=u(8437),W=u(2584),E=u(7399),M=u(5941),P=u(9074),I=u(2585),F=u(5435),N=u(4567),V=typeof window<"u"?window.document:null;class G extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(L={}){super(L),this.browser=H,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new j.MutableDisposable),this._onCursorMove=this.register(new B.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new B.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new B.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new B.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new B.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new B.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new B.EventEmitter),this._onBlur=this.register(new B.EventEmitter),this._onA11yCharEmitter=this.register(new B.EventEmitter),this._onA11yTabEmitter=this.register(new B.EventEmitter),this._onWillOpen=this.register(new B.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(f.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(C.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(I.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((O,z)=>this.refresh(O,z))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(O=>this._reportWindowsOptions(O))),this.register(this._inputHandler.onColor(O=>this._handleColorEvent(O))),this.register((0,B.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,B.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,B.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,B.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(O=>this._afterResize(O.cols,O.rows))),this.register((0,j.toDisposable)(()=>{var O,z;this._customKeyEventHandler=void 0,(z=(O=this.element)===null||O===void 0?void 0:O.parentNode)===null||z===void 0||z.removeChild(this.element)}))}_handleColorEvent(L){if(this._themeService)for(const O of L){let z,$="";switch(O.index){case 256:z="foreground",$="10";break;case 257:z="background",$="11";break;case 258:z="cursor",$="12";break;default:z="ansi",$="4;"+O.index}switch(O.type){case 0:const Q=R.color.toColorRGB(z==="ansi"?this._themeService.colors.ansi[O.index]:this._themeService.colors[z]);this.coreService.triggerDataEvent(`${W.C0.ESC}]${$};${(0,M.toRgbString)(Q)}${W.C1_ESCAPED.ST}`);break;case 1:if(z==="ansi")this._themeService.modifyColors(q=>q.ansi[O.index]=R.rgba.toColor(...O.color));else{const q=z;this._themeService.modifyColors(te=>te[q]=R.rgba.toColor(...O.color))}break;case 2:this._themeService.restoreColor(O.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(L){L?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(N.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(L){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[I"),this.updateCursorStyle(L),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var L;return(L=this.textarea)===null||L===void 0?void 0:L.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const L=this.buffer.ybase+this.buffer.y,O=this.buffer.lines.get(L);if(!O)return;const z=Math.min(this.buffer.x,this.cols-1),$=this._renderService.dimensions.css.cell.height,Q=O.getWidth(z),q=this._renderService.dimensions.css.cell.width*Q,te=this.buffer.y*this._renderService.dimensions.css.cell.height,ye=z*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ye+"px",this.textarea.style.top=te+"px",this.textarea.style.width=q+"px",this.textarea.style.height=$+"px",this.textarea.style.lineHeight=$+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,S.addDisposableDomListener)(this.element,"copy",O=>{this.hasSelection()&&(0,d.copyHandler)(O,this._selectionService)}));const L=O=>(0,d.handlePasteEvent)(O,this.textarea,this.coreService,this.optionsService);this.register((0,S.addDisposableDomListener)(this.textarea,"paste",L)),this.register((0,S.addDisposableDomListener)(this.element,"paste",L)),H.isFirefox?this.register((0,S.addDisposableDomListener)(this.element,"mousedown",O=>{O.button===2&&(0,d.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,S.addDisposableDomListener)(this.element,"contextmenu",O=>{(0,d.rightClickHandler)(O,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),H.isLinux&&this.register((0,S.addDisposableDomListener)(this.element,"auxclick",O=>{O.button===1&&(0,d.moveTextAreaUnderMouseCursor)(O,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,S.addDisposableDomListener)(this.textarea,"keyup",L=>this._keyUp(L),!0)),this.register((0,S.addDisposableDomListener)(this.textarea,"keydown",L=>this._keyDown(L),!0)),this.register((0,S.addDisposableDomListener)(this.textarea,"keypress",L=>this._keyPress(L),!0)),this.register((0,S.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,S.addDisposableDomListener)(this.textarea,"compositionupdate",L=>this._compositionHelper.compositionupdate(L))),this.register((0,S.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,S.addDisposableDomListener)(this.textarea,"input",L=>this._inputEvent(L),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(L){var O;if(!L)throw new Error("Terminal requires a parent element.");L.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=L.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),L.appendChild(this.element);const z=V.createDocumentFragment();this._viewportElement=V.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),z.appendChild(this._viewportElement),this._viewportScrollArea=V.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=V.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=V.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),z.appendChild(this.screenElement),this.textarea=V.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",g.promptLabel),H.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(m.CoreBrowserService,this.textarea,(O=this._document.defaultView)!==null&&O!==void 0?O:window),this._instantiationService.setService(k.ICoreBrowserService,this._coreBrowserService),this.register((0,S.addDisposableDomListener)(this.textarea,"focus",$=>this._handleTextAreaFocus($))),this.register((0,S.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(a.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(D.ThemeService),this._instantiationService.setService(k.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(_.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(b.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange($=>this._onRender.fire($))),this.onResize($=>this._renderService.resize($.cols,$.rows)),this._compositionView=V.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(z);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(x.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines($=>this.scrollLines($.amount,$.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw($=>this._renderService.handleSelectionChanged($.start,$.end,$.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection($=>{this.textarea.value=$,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event($=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,S.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,S.addDisposableDomListener)(this.element,"mousedown",$=>this._selectionService.handleMouseDown($))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(N.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",$=>this._handleScreenReaderModeOptionChange($))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",$=>{!this._overviewRulerRenderer&&$&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(n.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const L=this,O=this.element;function z(q){const te=L._mouseService.getMouseReportCoords(q,L.screenElement);if(!te)return!1;let ye,Ae;switch(q.overrideType||q.type){case"mousemove":Ae=32,q.buttons===void 0?(ye=3,q.button!==void 0&&(ye=q.button<3?q.button:3)):ye=1&q.buttons?0:4&q.buttons?1:2&q.buttons?2:3;break;case"mouseup":Ae=0,ye=q.button<3?q.button:3;break;case"mousedown":Ae=1,ye=q.button<3?q.button:3;break;case"wheel":if(L.viewport.getLinesScrolled(q)===0)return!1;Ae=q.deltaY<0?0:1,ye=4;break;default:return!1}return!(Ae===void 0||ye===void 0||ye>4)&&L.coreMouseService.triggerMouseEvent({col:te.col,row:te.row,x:te.x,y:te.y,button:ye,action:Ae,ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey})}const $={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q={mouseup:q=>(z(q),q.buttons||(this._document.removeEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.removeEventListener("mousemove",$.mousedrag)),this.cancel(q)),wheel:q=>(z(q),this.cancel(q,!0)),mousedrag:q=>{q.buttons&&z(q)},mousemove:q=>{q.buttons||z(q)}};this.register(this.coreMouseService.onProtocolChange(q=>{q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&q?$.mousemove||(O.addEventListener("mousemove",Q.mousemove),$.mousemove=Q.mousemove):(O.removeEventListener("mousemove",$.mousemove),$.mousemove=null),16&q?$.wheel||(O.addEventListener("wheel",Q.wheel,{passive:!1}),$.wheel=Q.wheel):(O.removeEventListener("wheel",$.wheel),$.wheel=null),2&q?$.mouseup||(O.addEventListener("mouseup",Q.mouseup),$.mouseup=Q.mouseup):(this._document.removeEventListener("mouseup",$.mouseup),O.removeEventListener("mouseup",$.mouseup),$.mouseup=null),4&q?$.mousedrag||($.mousedrag=Q.mousedrag):(this._document.removeEventListener("mousemove",$.mousedrag),$.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,S.addDisposableDomListener)(O,"mousedown",q=>{if(q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(q))return z(q),$.mouseup&&this._document.addEventListener("mouseup",$.mouseup),$.mousedrag&&this._document.addEventListener("mousemove",$.mousedrag),this.cancel(q)})),this.register((0,S.addDisposableDomListener)(O,"wheel",q=>{if(!$.wheel){if(!this.buffer.hasScrollback){const te=this.viewport.getLinesScrolled(q);if(te===0)return;const ye=W.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(q.deltaY<0?"A":"B");let Ae="";for(let nr=0;nr<Math.abs(te);nr++)Ae+=ye;return this.coreService.triggerDataEvent(Ae,!0),this.cancel(q,!0)}return this.viewport.handleWheel(q)?this.cancel(q):void 0}},{passive:!1})),this.register((0,S.addDisposableDomListener)(O,"touchstart",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(q),this.cancel(q)},{passive:!0})),this.register((0,S.addDisposableDomListener)(O,"touchmove",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(q)?void 0:this.cancel(q)},{passive:!1}))}refresh(L,O){var z;(z=this._renderService)===null||z===void 0||z.refreshRows(L,O)}updateCursorStyle(L){var O;!((O=this._selectionService)===null||O===void 0)&&O.shouldColumnSelect(L)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(L,O,z=0){var $;z===1?(super.scrollLines(L,O,z),this.refresh(0,this.rows-1)):($=this.viewport)===null||$===void 0||$.scrollLines(L)}paste(L){(0,d.paste)(L,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(L){this._customKeyEventHandler=L}registerLinkProvider(L){return this.linkifier2.registerLinkProvider(L)}registerCharacterJoiner(L){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const O=this._characterJoinerService.register(L);return this.refresh(0,this.rows-1),O}deregisterCharacterJoiner(L){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(L)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(L){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+L)}registerDecoration(L){return this._decorationService.registerDecoration(L)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(L,O,z){this._selectionService.setSelection(L,O,z)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var L;(L=this._selectionService)===null||L===void 0||L.clearSelection()}selectAll(){var L;(L=this._selectionService)===null||L===void 0||L.selectAll()}selectLines(L,O){var z;(z=this._selectionService)===null||z===void 0||z.selectLines(L,O)}_keyDown(L){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(L)===!1)return!1;const O=this.browser.isMac&&this.options.macOptionIsMeta&&L.altKey;if(!O&&!this._compositionHelper.keydown(L))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;O||L.key!=="Dead"&&L.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const z=(0,E.evaluateKeyboardEvent)(L,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(L),z.type===3||z.type===2){const $=this.rows-1;return this.scrollLines(z.type===2?-$:$),this.cancel(L,!0)}return z.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,L)||(z.cancel&&this.cancel(L,!0),!z.key||!!(L.key&&!L.ctrlKey&&!L.altKey&&!L.metaKey&&L.key.length===1&&L.key.charCodeAt(0)>=65&&L.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(z.key!==W.C0.ETX&&z.key!==W.C0.CR||(this.textarea.value=""),this._onKey.fire({key:z.key,domEvent:L}),this._showCursor(),this.coreService.triggerDataEvent(z.key,!0),!this.optionsService.rawOptions.screenReaderMode||L.altKey||L.ctrlKey?this.cancel(L,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(L,O){const z=L.isMac&&!this.options.macOptionIsMeta&&O.altKey&&!O.ctrlKey&&!O.metaKey||L.isWindows&&O.altKey&&O.ctrlKey&&!O.metaKey||L.isWindows&&O.getModifierState("AltGraph");return O.type==="keypress"?z:z&&(!O.keyCode||O.keyCode>47)}_keyUp(L){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(L)===!1||(function(O){return O.keyCode===16||O.keyCode===17||O.keyCode===18}(L)||this.focus(),this.updateCursorStyle(L),this._keyPressHandled=!1)}_keyPress(L){let O;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(L)===!1)return!1;if(this.cancel(L),L.charCode)O=L.charCode;else if(L.which===null||L.which===void 0)O=L.keyCode;else{if(L.which===0||L.charCode===0)return!1;O=L.which}return!(!O||(L.altKey||L.ctrlKey||L.metaKey)&&!this._isThirdLevelShift(this.browser,L)||(O=String.fromCharCode(O),this._onKey.fire({key:O,domEvent:L}),this._showCursor(),this.coreService.triggerDataEvent(O,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(L){if(L.data&&L.inputType==="insertText"&&(!L.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const O=L.data;return this.coreService.triggerDataEvent(O,!0),this.cancel(L),!0}return!1}resize(L,O){L!==this.cols||O!==this.rows?super.resize(L,O):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(L,O){var z,$;(z=this._charSizeService)===null||z===void 0||z.measure(),($=this.viewport)===null||$===void 0||$.syncScrollArea(!0)}clear(){var L;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let O=1;O<this.rows;O++)this.buffer.lines.push(this.buffer.getBlankLine(U.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(L=this.viewport)===null||L===void 0||L.reset(),this.refresh(0,this.rows-1)}}reset(){var L,O;this.options.rows=this.rows,this.options.cols=this.cols;const z=this._customKeyEventHandler;this._setup(),super.reset(),(L=this._selectionService)===null||L===void 0||L.reset(),this._decorationService.reset(),(O=this.viewport)===null||O===void 0||O.reset(),this._customKeyEventHandler=z,this.refresh(0,this.rows-1)}clearTextureAtlas(){var L;(L=this._renderService)===null||L===void 0||L.clearTextureAtlas()}_reportFocus(){var L;!((L=this.element)===null||L===void 0)&&L.classList.contains("focus")?this.coreService.triggerDataEvent(W.C0.ESC+"[I"):this.coreService.triggerDataEvent(W.C0.ESC+"[O")}_reportWindowsOptions(L){if(this._renderService)switch(L){case F.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const O=this._renderService.dimensions.css.canvas.width.toFixed(0),z=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[4;${z};${O}t`);break;case F.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const $=this._renderService.dimensions.css.cell.width.toFixed(0),Q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[6;${Q};${$}t`)}}cancel(L,O){if(this.options.cancelEvents||O)return L.preventDefault(),L.stopPropagation(),!1}}s.Terminal=G},9924:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(u,d=1e3){this._renderCallback=u,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(u,d,S){this._rowCount=S,u=u!==void 0?u:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,u):u,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const g=f-this._lastRefreshMs,C=this._debounceThresholdMS-g;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const u=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(u,d)}}},1680:function(p,s,u){var d=this&&this.__decorate||function(l,n,a,_){var m,x=arguments.length,b=x<3?n:_===null?_=Object.getOwnPropertyDescriptor(n,a):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,n,a,_);else for(var v=l.length-1;v>=0;v--)(m=l[v])&&(b=(x<3?m(b):x>3?m(n,a,b):m(n,a))||b);return x>3&&b&&Object.defineProperty(n,a,b),b},S=this&&this.__param||function(l,n){return function(a,_){n(a,_,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;const f=u(3656),g=u(4725),C=u(8460),w=u(844),y=u(2585);let c=s.Viewport=class extends w.Disposable{constructor(l,n,a,_,m,x,b,v){super(),this._viewportElement=l,this._scrollArea=n,this._bufferService=a,this._optionsService=_,this._charSizeService=m,this._renderService=x,this._coreBrowserService=b,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(k=>this._activeBuffer=k.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(k=>this._renderDimensions=k)),this._handleThemeChange(v.colors),this.register(v.onChangeColors(k=>this._handleThemeChange(k))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const n=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==n&&(this._lastRecordedBufferHeight=n,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const n=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:n,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,n){const a=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(n<0&&this._viewportElement.scrollTop!==0||n>0&&a<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const n=this._getPixelsScrolled(l);return n!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+n:this._smoothScrollState.target+=n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=n,this._bubbleScroll(l,n))}scrollLines(l){if(l!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const n=l*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!1})}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let n=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?n*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._currentRowHeight*this._bufferService.rows),n}getBufferElements(l,n){var a;let _,m="";const x=[],b=n??this._bufferService.buffer.lines.length,v=this._bufferService.buffer.lines;for(let k=l;k<b;k++){const D=v.get(k);if(!D)continue;const R=(a=v.get(k+1))===null||a===void 0?void 0:a.isWrapped;if(m+=D.translateToString(!R),!R||k===v.length-1){const T=document.createElement("div");T.textContent=m,x.push(T),m.length>0&&(_=T),m=""}}return{bufferElements:x,cursorElement:_}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let n=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(n/=this._currentRowHeight+0,this._wheelPartialScroll+=n,n=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._bufferService.rows),n}_applyScrollModifier(l,n){const a=this._optionsService.rawOptions.fastScrollModifier;return a==="alt"&&n.altKey||a==="ctrl"&&n.ctrlKey||a==="shift"&&n.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const n=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,n!==0&&(this._viewportElement.scrollTop+=n,this._bubbleScroll(l,n))}};s.Viewport=c=d([S(2,y.IBufferService),S(3,y.IOptionsService),S(4,g.ICharSizeService),S(5,g.IRenderService),S(6,g.ICoreBrowserService),S(7,g.IThemeService)],c)},3107:function(p,s,u){var d=this&&this.__decorate||function(c,l,n,a){var _,m=arguments.length,x=m<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,l,n,a);else for(var b=c.length-1;b>=0;b--)(_=c[b])&&(x=(m<3?_(x):m>3?_(l,n,x):_(l,n))||x);return m>3&&x&&Object.defineProperty(l,n,x),x},S=this&&this.__param||function(c,l){return function(n,a){l(n,a,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;const f=u(3656),g=u(4725),C=u(844),w=u(2585);let y=s.BufferDecorationRenderer=class extends C.Disposable{constructor(c,l,n,a){super(),this._screenElement=c,this._bufferService=l,this._decorationService=n,this._renderService=a,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(_=>this._removeDecoration(_))),this.register((0,C.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var l,n;const a=document.createElement("div");a.classList.add("xterm-decoration"),a.classList.toggle("xterm-decoration-top-layer",((l=c==null?void 0:c.options)===null||l===void 0?void 0:l.layer)==="top"),a.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,a.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",a.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",a.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const _=(n=c.options.x)!==null&&n!==void 0?n:0;return _&&_>this._bufferService.cols&&(a.style.display="none"),this._refreshXPosition(c,a),a}_refreshStyle(c){const l=c.marker.line-this._bufferService.buffers.active.ydisp;if(l<0||l>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let n=this._decorationElements.get(c);n||(n=this._createElement(c),c.element=n,this._decorationElements.set(c,n),this._container.appendChild(n),c.onDispose(()=>{this._decorationElements.delete(c),n.remove()})),n.style.top=l*this._renderService.dimensions.css.cell.height+"px",n.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(n)}}_refreshXPosition(c,l=c.element){var n;if(!l)return;const a=(n=c.options.x)!==null&&n!==void 0?n:0;(c.options.anchor||"left")==="right"?l.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":l.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var l;(l=this._decorationElements.get(c))===null||l===void 0||l.remove(),this._decorationElements.delete(c),c.dispose()}};s.BufferDecorationRenderer=y=d([S(1,w.IBufferService),S(2,w.IDecorationService),S(3,g.IRenderService)],y)},5871:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(u){if(u.options.overviewRulerOptions){for(const d of this._zones)if(d.color===u.options.overviewRulerOptions.color&&d.position===u.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,u.marker.line))return;if(this._lineAdjacentToZone(d,u.marker.line,u.options.overviewRulerOptions.position))return void this._addLineToZone(d,u.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=u.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=u.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=u.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=u.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:u.options.overviewRulerOptions.color,position:u.options.overviewRulerOptions.position,startBufferLine:u.marker.line,endBufferLine:u.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(u){this._linePadding=u}_lineIntersectsZone(u,d){return d>=u.startBufferLine&&d<=u.endBufferLine}_lineAdjacentToZone(u,d,S){return d>=u.startBufferLine-this._linePadding[S||"full"]&&d<=u.endBufferLine+this._linePadding[S||"full"]}_addLineToZone(u,d){u.startBufferLine=Math.min(u.startBufferLine,d),u.endBufferLine=Math.max(u.endBufferLine,d)}}},5744:function(p,s,u){var d=this&&this.__decorate||function(_,m,x,b){var v,k=arguments.length,D=k<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,x):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,m,x,b);else for(var R=_.length-1;R>=0;R--)(v=_[R])&&(D=(k<3?v(D):k>3?v(m,x,D):v(m,x))||D);return k>3&&D&&Object.defineProperty(m,x,D),D},S=this&&this.__param||function(_,m){return function(x,b){m(x,b,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;const f=u(5871),g=u(3656),C=u(4725),w=u(844),y=u(2585),c={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0};let a=s.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(_,m,x,b,v,k,D){var R;super(),this._viewportElement=_,this._screenElement=m,this._bufferService=x,this._decorationService=b,this._renderService=v,this._optionsService=k,this._coreBrowseService=D,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)===null||R===void 0||R.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var B;(B=this._canvas)===null||B===void 0||B.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,g.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const _=Math.floor(this._canvas.width/3),m=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=_,l.center=m,l.right=_,this._refreshDrawHeightConstants(),n.full=0,n.left=0,n.center=l.left,n.right=l.left+l.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);const _=this._canvas.height/this._bufferService.buffer.lines.length,m=Math.round(Math.max(Math.min(_,12),6)*this._coreBrowseService.dpr);c.left=m,c.center=m,c.right=m}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const m of this._decorationService.decorations)this._colorZoneStore.addDecoration(m);this._ctx.lineWidth=1;const _=this._colorZoneStore.zones;for(const m of _)m.position!=="full"&&this._renderColorZone(m);for(const m of _)m.position==="full"&&this._renderColorZone(m);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(_){this._ctx.fillStyle=_.color,this._ctx.fillRect(n[_.position||"full"],Math.round((this._canvas.height-1)*(_.startBufferLine/this._bufferService.buffers.active.lines.length)-c[_.position||"full"]/2),l[_.position||"full"],Math.round((this._canvas.height-1)*((_.endBufferLine-_.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[_.position||"full"]))}_queueRefresh(_,m){this._shouldUpdateDimensions=_||this._shouldUpdateDimensions,this._shouldUpdateAnchor=m||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=a=d([S(2,y.IBufferService),S(3,y.IDecorationService),S(4,C.IRenderService),S(5,y.IOptionsService),S(6,C.ICoreBrowserService)],a)},2950:function(p,s,u){var d=this&&this.__decorate||function(y,c,l,n){var a,_=arguments.length,m=_<3?c:n===null?n=Object.getOwnPropertyDescriptor(c,l):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(y,c,l,n);else for(var x=y.length-1;x>=0;x--)(a=y[x])&&(m=(_<3?a(m):_>3?a(c,l,m):a(c,l))||m);return _>3&&m&&Object.defineProperty(c,l,m),m},S=this&&this.__param||function(y,c){return function(l,n){c(l,n,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;const f=u(4725),g=u(2585),C=u(2584);let w=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,c,l,n,a,_){this._textarea=y,this._compositionView=c,this._bufferService=l,this._optionsService=n,this._coreService=a,this._renderService=_,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){const c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let l;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,l=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),l.length>0&&this._coreService.triggerDataEvent(l,!0)}},0)}else{this._isSendingComposition=!1;const c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){const y=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const c=this._textarea.value,l=c.replace(y,"");this._dataAlreadySent=l,c.length>y.length?this._coreService.triggerDataEvent(l,!0):c.length<y.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):c.length===y.length&&c!==y&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,a=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=a+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const _=this._compositionView.getBoundingClientRect();this._textarea.style.left=a+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(_.width,1)+"px",this._textarea.style.height=Math.max(_.height,1)+"px",this._textarea.style.lineHeight=_.height+"px"}y||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=w=d([S(2,g.IBufferService),S(3,g.IOptionsService),S(4,g.ICoreService),S(5,f.IRenderService)],w)},9806:(p,s)=>{function u(d,S,f){const g=f.getBoundingClientRect(),C=d.getComputedStyle(f),w=parseInt(C.getPropertyValue("padding-left")),y=parseInt(C.getPropertyValue("padding-top"));return[S.clientX-g.left-w,S.clientY-g.top-y]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=u,s.getCoords=function(d,S,f,g,C,w,y,c,l){if(!w)return;const n=u(d,S,f);return n?(n[0]=Math.ceil((n[0]+(l?y/2:0))/y),n[1]=Math.ceil(n[1]/c),n[0]=Math.min(Math.max(n[0],1),g+(l?1:0)),n[1]=Math.min(Math.max(n[1],1),C),n):void 0}},9504:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;const d=u(2584);function S(c,l,n,a){const _=c-f(c,n),m=l-f(l,n),x=Math.abs(_-m)-function(b,v,k){let D=0;const R=b-f(b,k),T=v-f(v,k);for(let B=0;B<Math.abs(R-T);B++){const j=g(b,v)==="A"?-1:1,H=k.buffer.lines.get(R+j*B);H!=null&&H.isWrapped&&D++}return D}(c,l,n);return y(x,w(g(c,l),a))}function f(c,l){let n=0,a=l.buffer.lines.get(c),_=a==null?void 0:a.isWrapped;for(;_&&c>=0&&c<l.rows;)n++,a=l.buffer.lines.get(--c),_=a==null?void 0:a.isWrapped;return n}function g(c,l){return c>l?"A":"B"}function C(c,l,n,a,_,m){let x=c,b=l,v="";for(;x!==n||b!==a;)x+=_?1:-1,_&&x>m.cols-1?(v+=m.buffer.translateBufferLineToString(b,!1,c,x),x=0,c=0,b++):!_&&x<0&&(v+=m.buffer.translateBufferLineToString(b,!1,0,c+1),x=m.cols-1,c=x,b--);return v+m.buffer.translateBufferLineToString(b,!1,c,x)}function w(c,l){const n=l?"O":"[";return d.C0.ESC+n+c}function y(c,l){c=Math.floor(c);let n="";for(let a=0;a<c;a++)n+=l;return n}s.moveToCellSequence=function(c,l,n,a){const _=n.buffer.x,m=n.buffer.y;if(!n.buffer.hasScrollback)return function(v,k,D,R,T,B){return S(k,R,T,B).length===0?"":y(C(v,k,v,k-f(k,T),!1,T).length,w("D",B))}(_,m,0,l,n,a)+S(m,l,n,a)+function(v,k,D,R,T,B){let j;j=S(k,R,T,B).length>0?R-f(R,T):k;const H=R,U=function(W,E,M,P,I,F){let N;return N=S(M,P,I,F).length>0?P-f(P,I):E,W<M&&N<=P||W>=M&&N<P?"C":"D"}(v,k,D,R,T,B);return y(C(v,j,D,H,U==="C",T).length,w(U,B))}(_,m,c,l,n,a);let x;if(m===l)return x=_>c?"D":"C",y(Math.abs(_-c),w(x,a));x=m>l?"D":"C";const b=Math.abs(m-l);return y(function(v,k){return k.cols-v}(m>l?c:_,n)+(b-1)*n.cols+1+((m>l?_:c)-1),w(x,a))}},1296:function(p,s,u){var d=this&&this.__decorate||function(T,B,j,H){var U,W=arguments.length,E=W<3?B:H===null?H=Object.getOwnPropertyDescriptor(B,j):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(T,B,j,H);else for(var M=T.length-1;M>=0;M--)(U=T[M])&&(E=(W<3?U(E):W>3?U(B,j,E):U(B,j))||E);return W>3&&E&&Object.defineProperty(B,j,E),E},S=this&&this.__param||function(T,B){return function(j,H){B(j,H,T)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;const f=u(3787),g=u(2550),C=u(2223),w=u(6171),y=u(4725),c=u(8055),l=u(8460),n=u(844),a=u(2585),_="xterm-dom-renderer-owner-",m="xterm-rows",x="xterm-fg-",b="xterm-bg-",v="xterm-focus",k="xterm-selection";let D=1,R=s.DomRenderer=class extends n.Disposable{constructor(T,B,j,H,U,W,E,M,P,I){super(),this._element=T,this._screenElement=B,this._viewportElement=j,this._linkifier2=H,this._charSizeService=W,this._optionsService=E,this._bufferService=M,this._coreBrowserService=P,this._themeService=I,this._terminalClass=D++,this._rowElements=[],this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(m),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(k),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(F=>this._injectCss(F))),this._injectCss(this._themeService.colors),this._rowFactory=U.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(_+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(F=>this._handleLinkHover(F))),this.register(this._linkifier2.onHideLinkUnderline(F=>this._handleLinkLeave(F))),this.register((0,n.toDisposable)(()=>{this._element.classList.remove(_+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new g.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const j of this._rowElements)j.style.width=`${this.dimensions.css.canvas.width}px`,j.style.height=`${this.dimensions.css.cell.height}px`,j.style.lineHeight=`${this.dimensions.css.cell.height}px`,j.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const B=`${this._terminalSelector} .${m} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=B,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let B=`${this._terminalSelector} .${m} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;B+=`${this._terminalSelector} .${m} .xterm-dim { color: ${c.color.multiplyOpacity(T.foreground,.5).css};}`,B+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,B+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",B+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,B+=`${this._terminalSelector} .${m}.${v} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${m}.${v} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${m} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,B+=`${this._terminalSelector} .${k} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(const[j,H]of T.ansi.entries())B+=`${this._terminalSelector} .${x}${j} { color: ${H.css}; }${this._terminalSelector} .${x}${j}.xterm-dim { color: ${c.color.multiplyOpacity(H,.5).css}; }${this._terminalSelector} .${b}${j} { background-color: ${H.css}; }`;B+=`${this._terminalSelector} .${x}${C.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(T.background).css}; }${this._terminalSelector} .${x}${C.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${b}${C.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=B}_setDefaultSpacing(){const T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,B){for(let j=this._rowElements.length;j<=B;j++){const H=document.createElement("div");this._rowContainer.appendChild(H),this._rowElements.push(H)}for(;this._rowElements.length>B;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,B){this._refreshRowElements(T,B),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(v)}handleFocus(){this._rowContainer.classList.add(v),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,B,j){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,B,j),this.renderRows(0,this._bufferService.rows-1),!T||!B)return;const H=T[1]-this._bufferService.buffer.ydisp,U=B[1]-this._bufferService.buffer.ydisp,W=Math.max(H,0),E=Math.min(U,this._bufferService.rows-1);if(W>=this._bufferService.rows||E<0)return;const M=document.createDocumentFragment();if(j){const P=T[0]>B[0];M.appendChild(this._createSelectionElement(W,P?B[0]:T[0],P?T[0]:B[0],E-W+1))}else{const P=H===W?T[0]:0,I=W===U?B[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(W,P,I));const F=E-W-1;if(M.appendChild(this._createSelectionElement(W+1,0,this._bufferService.cols,F)),W!==E){const N=U===E?B[0]:this._bufferService.cols;M.appendChild(this._createSelectionElement(E,0,N))}}this._selectionContainer.appendChild(M)}_createSelectionElement(T,B,j,H=1){const U=document.createElement("div");return U.style.height=H*this.dimensions.css.cell.height+"px",U.style.top=T*this.dimensions.css.cell.height+"px",U.style.left=B*this.dimensions.css.cell.width+"px",U.style.width=this.dimensions.css.cell.width*(j-B)+"px",U}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const T of this._rowElements)T.replaceChildren()}renderRows(T,B){const j=this._bufferService.buffer,H=j.ybase+j.y,U=Math.min(j.x,this._bufferService.cols-1),W=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,M=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=T;P<=B;P++){const I=P+j.ydisp,F=this._rowElements[P],N=j.lines.get(I);if(!F||!N)break;F.replaceChildren(...this._rowFactory.createRow(N,I,I===H,E,M,U,W,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${_}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,B,j,H,U,W){j<0&&(T=0),H<0&&(B=0);const E=this._bufferService.rows-1;j=Math.max(Math.min(j,E),0),H=Math.max(Math.min(H,E),0),U=Math.min(U,this._bufferService.cols);const M=this._bufferService.buffer,P=M.ybase+M.y,I=Math.min(M.x,U-1),F=this._optionsService.rawOptions.cursorBlink,N=this._optionsService.rawOptions.cursorStyle,V=this._optionsService.rawOptions.cursorInactiveStyle;for(let G=j;G<=H;++G){const Y=G+M.ydisp,L=this._rowElements[G],O=M.lines.get(Y);if(!L||!O)break;L.replaceChildren(...this._rowFactory.createRow(O,Y,Y===P,N,V,I,F,this.dimensions.css.cell.width,this._widthCache,W?G===j?T:0:-1,W?(G===H?B:U)-1:-1))}}};s.DomRenderer=R=d([S(4,a.IInstantiationService),S(5,y.ICharSizeService),S(6,a.IOptionsService),S(7,a.IBufferService),S(8,y.ICoreBrowserService),S(9,y.IThemeService)],R)},3787:function(p,s,u){var d=this&&this.__decorate||function(x,b,v,k){var D,R=arguments.length,T=R<3?b:k===null?k=Object.getOwnPropertyDescriptor(b,v):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(x,b,v,k);else for(var B=x.length-1;B>=0;B--)(D=x[B])&&(T=(R<3?D(T):R>3?D(b,v,T):D(b,v))||T);return R>3&&T&&Object.defineProperty(b,v,T),T},S=this&&this.__param||function(x,b){return function(v,k){b(v,k,x)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;const f=u(2223),g=u(643),C=u(511),w=u(2585),y=u(8055),c=u(4725),l=u(4269),n=u(6171),a=u(3734);let _=s.DomRendererRowFactory=class{constructor(x,b,v,k,D,R,T){this._document=x,this._characterJoinerService=b,this._optionsService=v,this._coreBrowserService=k,this._coreService=D,this._decorationService=R,this._themeService=T,this._workCell=new C.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(x,b,v){this._selectionStart=x,this._selectionEnd=b,this._columnSelectMode=v}createRow(x,b,v,k,D,R,T,B,j,H,U){const W=[],E=this._characterJoinerService.getJoinedCharacters(b),M=this._themeService.colors;let P,I=x.getNoBgTrimmedLength();v&&I<R+1&&(I=R+1);let F=0,N="",V=0,G=0,Y=0,L=!1,O=0,z=!1,$=0;const Q=[],q=H!==-1&&U!==-1;for(let te=0;te<I;te++){x.loadCell(te,this._workCell);let ye=this._workCell.getWidth();if(ye===0)continue;let Ae=!1,nr=te,J=this._workCell;if(E.length>0&&te===E[0][0]){Ae=!0;const ae=E.shift();J=new l.JoinedCellData(this._workCell,x.translateToString(!0,ae[0],ae[1]),ae[1]-ae[0]),nr=ae[1]-1,ye=J.getWidth()}const Nr=this._isCellInSelection(te,b),qs=v&&te===R,Xs=q&&te>=H&&te<=U;let Qs=!1;this._decorationService.forEachDecorationAtCell(te,b,void 0,ae=>{Qs=!0});let Ti=J.getChars()||g.WHITESPACE_CELL_CHAR;if(Ti===" "&&(J.isUnderline()||J.isOverline())&&(Ti=""),$=ye*B-j.get(Ti,J.isBold(),J.isItalic()),P){if(F&&(Nr&&z||!Nr&&!z&&J.bg===V)&&(Nr&&z&&M.selectionForeground||J.fg===G)&&J.extended.ext===Y&&Xs===L&&$===O&&!qs&&!Ae&&!Qs){N+=Ti,F++;continue}F&&(P.textContent=N),P=this._document.createElement("span"),F=0,N=""}else P=this._document.createElement("span");if(V=J.bg,G=J.fg,Y=J.extended.ext,L=Xs,O=$,z=Nr,Ae&&R>=te&&R<=nr&&(R=te),!this._coreService.isCursorHidden&&qs){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&Q.push("xterm-cursor-blink"),Q.push(k==="bar"?"xterm-cursor-bar":k==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(D)switch(D){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline")}}if(J.isBold()&&Q.push("xterm-bold"),J.isItalic()&&Q.push("xterm-italic"),J.isDim()&&Q.push("xterm-dim"),N=J.isInvisible()?g.WHITESPACE_CELL_CHAR:J.getChars()||g.WHITESPACE_CELL_CHAR,J.isUnderline()&&(Q.push(`xterm-underline-${J.extended.underlineStyle}`),N===" "&&(N=""),!J.isUnderlineColorDefault()))if(J.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${a.AttributeData.toColorRGB(J.getUnderlineColor()).join(",")})`;else{let ae=J.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&J.isBold()&&ae<8&&(ae+=8),P.style.textDecorationColor=M.ansi[ae].css}J.isOverline()&&(Q.push("xterm-overline"),N===" "&&(N="")),J.isStrikethrough()&&Q.push("xterm-strikethrough"),Xs&&(P.style.textDecoration="underline");let Ue=J.getFgColor(),jr=J.getFgColorMode(),st=J.getBgColor(),Hr=J.getBgColorMode();const Ys=!!J.isInverse();if(Ys){const ae=Ue;Ue=st,st=ae;const lh=jr;jr=Hr,Hr=lh}let yt,Js,wt,Fr=!1;switch(this._decorationService.forEachDecorationAtCell(te,b,void 0,ae=>{ae.options.layer!=="top"&&Fr||(ae.backgroundColorRGB&&(Hr=50331648,st=ae.backgroundColorRGB.rgba>>8&16777215,yt=ae.backgroundColorRGB),ae.foregroundColorRGB&&(jr=50331648,Ue=ae.foregroundColorRGB.rgba>>8&16777215,Js=ae.foregroundColorRGB),Fr=ae.options.layer==="top")}),!Fr&&Nr&&(yt=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,st=yt.rgba>>8&16777215,Hr=50331648,Fr=!0,M.selectionForeground&&(jr=50331648,Ue=M.selectionForeground.rgba>>8&16777215,Js=M.selectionForeground)),Fr&&Q.push("xterm-decoration-top"),Hr){case 16777216:case 33554432:wt=M.ansi[st],Q.push(`xterm-bg-${st}`);break;case 50331648:wt=y.rgba.toColor(st>>16,st>>8&255,255&st),this._addStyle(P,`background-color:#${m((st>>>0).toString(16),"0",6)}`);break;default:Ys?(wt=M.foreground,Q.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):wt=M.background}switch(yt||J.isDim()&&(yt=y.color.multiplyOpacity(wt,.5)),jr){case 16777216:case 33554432:J.isBold()&&Ue<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ue+=8),this._applyMinimumContrast(P,wt,M.ansi[Ue],J,yt,void 0)||Q.push(`xterm-fg-${Ue}`);break;case 50331648:const ae=y.rgba.toColor(Ue>>16&255,Ue>>8&255,255&Ue);this._applyMinimumContrast(P,wt,ae,J,yt,Js)||this._addStyle(P,`color:#${m(Ue.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,wt,M.foreground,J,yt,void 0)||Ys&&Q.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}Q.length&&(P.className=Q.join(" "),Q.length=0),qs||Ae||Qs?P.textContent=N:F++,$!==this.defaultSpacing&&(P.style.letterSpacing=`${$}px`),W.push(P),te=nr}return P&&F&&(P.textContent=N),W}_applyMinimumContrast(x,b,v,k,D,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,n.excludeFromContrastRatioDemands)(k.getCode()))return!1;const T=this._getContrastCache(k);let B;if(D||R||(B=T.getColor(b.rgba,v.rgba)),B===void 0){const j=this._optionsService.rawOptions.minimumContrastRatio/(k.isDim()?2:1);B=y.color.ensureContrastRatio(D||b,R||v,j),T.setColor((D||b).rgba,(R||v).rgba,B??null)}return!!B&&(this._addStyle(x,`color:${B.css}`),!0)}_getContrastCache(x){return x.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(x,b){x.setAttribute("style",`${x.getAttribute("style")||""}${b};`)}_isCellInSelection(x,b){const v=this._selectionStart,k=this._selectionEnd;return!(!v||!k)&&(this._columnSelectMode?v[0]<=k[0]?x>=v[0]&&b>=v[1]&&x<k[0]&&b<=k[1]:x<v[0]&&b>=v[1]&&x>=k[0]&&b<=k[1]:b>v[1]&&b<k[1]||v[1]===k[1]&&b===v[1]&&x>=v[0]&&x<k[0]||v[1]<k[1]&&b===k[1]&&x<k[0]||v[1]<k[1]&&b===v[1]&&x>=v[0])}};function m(x,b,v){for(;x.length<v;)x=b+x;return x}s.DomRendererRowFactory=_=d([S(1,c.ICharacterJoinerService),S(2,w.IOptionsService),S(3,c.ICoreBrowserService),S(4,w.ICoreService),S(5,w.IDecorationService),S(6,c.IThemeService)],_)},2550:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(u){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=u.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=u.createElement("span"),S=u.createElement("span");S.style.fontWeight="bold";const f=u.createElement("span");f.style.fontStyle="italic";const g=u.createElement("span");g.style.fontWeight="bold",g.style.fontStyle="italic",this._measureElements=[d,S,f,g],this._container.appendChild(d),this._container.appendChild(S),this._container.appendChild(f),this._container.appendChild(g),u.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(u,d,S,f){u===this._font&&d===this._fontSize&&S===this._weight&&f===this._weightBold||(this._font=u,this._fontSize=d,this._weight=S,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${S}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${S}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(u,d,S){let f=0;if(!d&&!S&&u.length===1&&(f=u.charCodeAt(0))<256)return this._flat[f]!==-9999?this._flat[f]:this._flat[f]=this._measure(u,0);let g=u;d&&(g+="B"),S&&(g+="I");let C=this._holey.get(g);if(C===void 0){let w=0;d&&(w|=1),S&&(w|=2),C=this._measure(u,w),this._holey.set(g,C)}return C}_measure(u,d){const S=this._measureElements[d];return S.textContent=u.repeat(32),S.offsetWidth/32}}},2223:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;const d=u(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(p,s)=>{function u(d){return 57508<=d&&d<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},s.isPowerlineGlyph=u,s.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},s.excludeFromContrastRatioDemands=function(d){return u(d)||function(S){return 9472<=S&&S<=9631}(d)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(u){this._bufferService=u,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?u%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)-1]:[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[u,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const u=this.selectionStart[0]+this.selectionStartLength;return u>this._bufferService.cols?[u%this._bufferService.cols,this.selectionStart[1]+Math.floor(u/this._bufferService.cols)]:[Math.max(u,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const u=this.selectionStart,d=this.selectionEnd;return!(!u||!d)&&(u[1]>d[1]||u[1]===d[1]&&u[0]>d[0])}handleTrim(u){return this.selectionStart&&(this.selectionStart[1]-=u),this.selectionEnd&&(this.selectionEnd[1]-=u),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(p,s,u){var d=this&&this.__decorate||function(c,l,n,a){var _,m=arguments.length,x=m<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,l,n,a);else for(var b=c.length-1;b>=0;b--)(_=c[b])&&(x=(m<3?_(x):m>3?_(l,n,x):_(l,n))||x);return m>3&&x&&Object.defineProperty(l,n,x),x},S=this&&this.__param||function(c,l){return function(n,a){l(n,a,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;const f=u(2585),g=u(8460),C=u(844);let w=s.CharSizeService=class extends C.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,l,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this.register(new g.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new y(c,l,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};s.CharSizeService=w=d([S(2,f.IOptionsService)],w);class y{constructor(l,n,a){this._document=l,this._parentElement=n,this._optionsService=a,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const l={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return l.width!==0&&l.height!==0&&(this._result.width=l.width/32,this._result.height=Math.ceil(l.height)),this._result}}},4269:function(p,s,u){var d=this&&this.__decorate||function(l,n,a,_){var m,x=arguments.length,b=x<3?n:_===null?_=Object.getOwnPropertyDescriptor(n,a):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,n,a,_);else for(var v=l.length-1;v>=0;v--)(m=l[v])&&(b=(x<3?m(b):x>3?m(n,a,b):m(n,a))||b);return x>3&&b&&Object.defineProperty(n,a,b),b},S=this&&this.__param||function(l,n){return function(a,_){n(a,_,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;const f=u(3734),g=u(643),C=u(511),w=u(2585);class y extends f.AttributeData{constructor(n,a,_){super(),this.content=0,this.combinedData="",this.fg=n.fg,this.bg=n.bg,this.combinedData=a,this._width=_}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(n){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=y;let c=s.CharacterJoinerService=class Zu{constructor(n){this._bufferService=n,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(n){const a={id:this._nextCharacterJoinerId++,handler:n};return this._characterJoiners.push(a),a.id}deregister(n){for(let a=0;a<this._characterJoiners.length;a++)if(this._characterJoiners[a].id===n)return this._characterJoiners.splice(a,1),!0;return!1}getJoinedCharacters(n){if(this._characterJoiners.length===0)return[];const a=this._bufferService.buffer.lines.get(n);if(!a||a.length===0)return[];const _=[],m=a.translateToString(!0);let x=0,b=0,v=0,k=a.getFg(0),D=a.getBg(0);for(let R=0;R<a.getTrimmedLength();R++)if(a.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==D){if(R-x>1){const T=this._getJoinedRanges(m,v,b,a,x);for(let B=0;B<T.length;B++)_.push(T[B])}x=R,v=b,k=this._workCell.fg,D=this._workCell.bg}b+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-x>1){const R=this._getJoinedRanges(m,v,b,a,x);for(let T=0;T<R.length;T++)_.push(R[T])}return _}_getJoinedRanges(n,a,_,m,x){const b=n.substring(a,_);let v=[];try{v=this._characterJoiners[0].handler(b)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const D=this._characterJoiners[k].handler(b);for(let R=0;R<D.length;R++)Zu._mergeRanges(v,D[R])}catch(D){console.error(D)}return this._stringRangesToCellRanges(v,m,x),v}_stringRangesToCellRanges(n,a,_){let m=0,x=!1,b=0,v=n[m];if(v){for(let k=_;k<this._bufferService.cols;k++){const D=a.getWidth(k),R=a.getString(k).length||g.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!x&&v[0]<=b&&(v[0]=k,x=!0),v[1]<=b){if(v[1]=k,v=n[++m],!v)break;v[0]<=b?(v[0]=k,x=!0):x=!1}b+=R}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(n,a){let _=!1;for(let m=0;m<n.length;m++){const x=n[m];if(_){if(a[1]<=x[0])return n[m-1][1]=a[1],n;if(a[1]<=x[1])return n[m-1][1]=Math.max(a[1],x[1]),n.splice(m,1),n;n.splice(m,1),m--}else{if(a[1]<=x[0])return n.splice(m,0,a),n;if(a[1]<=x[1])return x[0]=Math.min(a[0],x[0]),n;a[0]<x[1]&&(x[0]=Math.min(a[0],x[0]),_=!0)}}return _?n[n.length-1][1]=a[1]:n.push(a),n}};s.CharacterJoinerService=c=d([S(0,w.IBufferService)],c)},5114:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(u,d){this._textarea=u,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(p,s,u){var d=this&&this.__decorate||function(w,y,c,l){var n,a=arguments.length,_=a<3?y:l===null?l=Object.getOwnPropertyDescriptor(y,c):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(w,y,c,l);else for(var m=w.length-1;m>=0;m--)(n=w[m])&&(_=(a<3?n(_):a>3?n(y,c,_):n(y,c))||_);return a>3&&_&&Object.defineProperty(y,c,_),_},S=this&&this.__param||function(w,y){return function(c,l){y(c,l,w)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;const f=u(4725),g=u(9806);let C=s.MouseService=class{constructor(w,y){this._renderService=w,this._charSizeService=y}getCoords(w,y,c,l,n){return(0,g.getCoords)(window,w,y,c,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,n)}getMouseReportCoords(w,y){const c=(0,g.getCoordsRelativeToElement)(window,w,y);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};s.MouseService=C=d([S(0,f.IRenderService),S(1,f.ICharSizeService)],C)},3230:function(p,s,u){var d=this&&this.__decorate||function(_,m,x,b){var v,k=arguments.length,D=k<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,x):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(_,m,x,b);else for(var R=_.length-1;R>=0;R--)(v=_[R])&&(D=(k<3?v(D):k>3?v(m,x,D):v(m,x))||D);return k>3&&D&&Object.defineProperty(m,x,D),D},S=this&&this.__param||function(_,m){return function(x,b){m(x,b,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;const f=u(3656),g=u(6193),C=u(5596),w=u(4725),y=u(8460),c=u(844),l=u(7226),n=u(2585);let a=s.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(_,m,x,b,v,k,D,R){if(super(),this._rowCount=_,this._charSizeService=b,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new l.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new g.RenderDebouncer(D.window,(T,B)=>this._renderRows(T,B)),this.register(this._renderDebouncer),this._screenDprMonitor=new C.ScreenDprMonitor(D.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(x.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(v.onDecorationRegistered(()=>this._fullRefresh())),this.register(v.onDecorationRemoved(()=>this._fullRefresh())),this.register(x.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(x.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register((0,f.addDisposableDomListener)(D.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(R.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in D.window){const T=new D.window.IntersectionObserver(B=>this._handleIntersectionChange(B[B.length-1]),{threshold:0});T.observe(m),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(_){this._isPaused=_.isIntersecting===void 0?_.intersectionRatio===0:!_.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(_,m,x=!1){this._isPaused?this._needsFullRefresh=!0:(x||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(_,m,this._rowCount))}_renderRows(_,m){this._renderer.value&&(_=Math.min(_,this._rowCount-1),m=Math.min(m,this._rowCount-1),this._renderer.value.renderRows(_,m),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:_,end:m}),this._onRender.fire({start:_,end:m}),this._isNextRenderRedrawOnly=!0)}resize(_,m){this._rowCount=m,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(_){this._renderer.value=_,this._renderer.value.onRequestRedraw(m=>this.refreshRows(m.start,m.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(_){return this._renderDebouncer.addRefreshCallback(_)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var _,m;this._renderer.value&&((m=(_=this._renderer.value).clearTextureAtlas)===null||m===void 0||m.call(_),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(_,m){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(_,m)):this._renderer.value.handleResize(_,m),this._fullRefresh())}handleCharSizeChanged(){var _;(_=this._renderer.value)===null||_===void 0||_.handleCharSizeChanged()}handleBlur(){var _;(_=this._renderer.value)===null||_===void 0||_.handleBlur()}handleFocus(){var _;(_=this._renderer.value)===null||_===void 0||_.handleFocus()}handleSelectionChanged(_,m,x){var b;this._selectionState.start=_,this._selectionState.end=m,this._selectionState.columnSelectMode=x,(b=this._renderer.value)===null||b===void 0||b.handleSelectionChanged(_,m,x)}handleCursorMove(){var _;(_=this._renderer.value)===null||_===void 0||_.handleCursorMove()}clear(){var _;(_=this._renderer.value)===null||_===void 0||_.clear()}};s.RenderService=a=d([S(2,n.IOptionsService),S(3,w.ICharSizeService),S(4,n.IDecorationService),S(5,n.IBufferService),S(6,w.ICoreBrowserService),S(7,w.IThemeService)],a)},9312:function(p,s,u){var d=this&&this.__decorate||function(v,k,D,R){var T,B=arguments.length,j=B<3?k:R===null?R=Object.getOwnPropertyDescriptor(k,D):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(v,k,D,R);else for(var H=v.length-1;H>=0;H--)(T=v[H])&&(j=(B<3?T(j):B>3?T(k,D,j):T(k,D))||j);return B>3&&j&&Object.defineProperty(k,D,j),j},S=this&&this.__param||function(v,k){return function(D,R){k(D,R,v)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;const f=u(9806),g=u(9504),C=u(456),w=u(4725),y=u(8460),c=u(844),l=u(6114),n=u(4841),a=u(511),_=u(2585),m="",x=new RegExp(m,"g");let b=s.SelectionService=class extends c.Disposable{constructor(v,k,D,R,T,B,j,H,U){super(),this._element=v,this._screenElement=k,this._linkifier=D,this._bufferService=R,this._coreService=T,this._mouseService=B,this._optionsService=j,this._renderService=H,this._coreBrowserService=U,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new a.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=W=>this._handleMouseMove(W),this._mouseUpListener=W=>this._handleMouseUp(W),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(W=>this._handleTrim(W)),this.register(this._bufferService.buffers.onBufferActivate(W=>this._handleBufferActivate(W))),this.enable(),this._model=new C.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const v=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!v||!k||v[0]===k[0]&&v[1]===k[1])}get selectionText(){const v=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!v||!k)return"";const D=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(v[0]===k[0])return"";const T=v[0]<k[0]?v[0]:k[0],B=v[0]<k[0]?k[0]:v[0];for(let j=v[1];j<=k[1];j++){const H=D.translateBufferLineToString(j,!0,T,B);R.push(H)}}else{const T=v[1]===k[1]?k[0]:void 0;R.push(D.translateBufferLineToString(v[1],!0,v[0],T));for(let B=v[1]+1;B<=k[1]-1;B++){const j=D.lines.get(B),H=D.translateBufferLineToString(B,!0);j!=null&&j.isWrapped?R[R.length-1]+=H:R.push(H)}if(v[1]!==k[1]){const B=D.lines.get(k[1]),j=D.translateBufferLineToString(k[1],!0,0,k[0]);B&&B.isWrapped?R[R.length-1]+=j:R.push(j)}}return R.map(T=>T.replace(x," ")).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),l.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){const k=this._getMouseBufferCoords(v),D=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(D&&R&&k)&&this._areCoordsInSelection(k,D,R)}isCellInSelection(v,k){const D=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!D||!R)&&this._areCoordsInSelection([v,k],D,R)}_areCoordsInSelection(v,k,D){return v[1]>k[1]&&v[1]<D[1]||k[1]===D[1]&&v[1]===k[1]&&v[0]>=k[0]&&v[0]<D[0]||k[1]<D[1]&&v[1]===D[1]&&v[0]<D[0]||k[1]<D[1]&&v[1]===k[1]&&v[0]>=k[0]}_selectWordAtCursor(v,k){var D,R;const T=(R=(D=this._linkifier.currentLink)===null||D===void 0?void 0:D.link)===null||R===void 0?void 0:R.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,n.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const B=this._getMouseBufferCoords(v);return!!B&&(this._selectWordAt(B,k),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,k){this._model.clearSelection(),v=Math.max(v,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){const k=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k}_getMouseEventScrollAmount(v){let k=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return k>=0&&k<=D?0:(k>D&&(k-=D),k=Math.min(Math.max(k,-50),50),k/=50,k/Math.abs(k)+Math.round(14*k))}shouldForceSelection(v){return l.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){const k=this._getMouseBufferCoords(v);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))}shouldColumnSelect(v){return v.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;const k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const R=D.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){const k=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const R=(0,g.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const v=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,D=!(!v||!k||v[0]===k[0]&&v[1]===k[1]);D?v&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,k,D)):this._oldHasSelection&&this._fireOnSelectionChange(v,k,D)}_fireOnSelectionChange(v,k,D){this._oldSelectionStart=v,this._oldSelectionEnd=k,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(k=>this._handleTrim(k))}_convertViewportColToCharacterIndex(v,k){let D=k;for(let R=0;k>=R;R++){const T=v.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:T>1&&k!==R&&(D+=T-1)}return D}setSelection(v,k,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,k],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,k,D=!0,R=!0){if(v[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,B=T.lines.get(v[1]);if(!B)return;const j=T.translateBufferLineToString(v[1],!1);let H=this._convertViewportColToCharacterIndex(B,v[0]),U=H;const W=v[0]-H;let E=0,M=0,P=0,I=0;if(j.charAt(H)===" "){for(;H>0&&j.charAt(H-1)===" ";)H--;for(;U<j.length&&j.charAt(U+1)===" ";)U++}else{let V=v[0],G=v[0];B.getWidth(V)===0&&(E++,V--),B.getWidth(G)===2&&(M++,G++);const Y=B.getString(G).length;for(Y>1&&(I+=Y-1,U+=Y-1);V>0&&H>0&&!this._isCharWordSeparator(B.loadCell(V-1,this._workCell));){B.loadCell(V-1,this._workCell);const L=this._workCell.getChars().length;this._workCell.getWidth()===0?(E++,V--):L>1&&(P+=L-1,H-=L-1),H--,V--}for(;G<B.length&&U+1<j.length&&!this._isCharWordSeparator(B.loadCell(G+1,this._workCell));){B.loadCell(G+1,this._workCell);const L=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,G++):L>1&&(I+=L-1,U+=L-1),U++,G++}}U++;let F=H+W-E+P,N=Math.min(this._bufferService.cols,U-H+E+M-P-I);if(k||j.slice(H,U).trim()!==""){if(D&&F===0&&B.getCodePoint(0)!==32){const V=T.lines.get(v[1]-1);if(V&&B.isWrapped&&V.getCodePoint(this._bufferService.cols-1)!==32){const G=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(G){const Y=this._bufferService.cols-G.start;F-=Y,N+=Y}}}if(R&&F+N===this._bufferService.cols&&B.getCodePoint(this._bufferService.cols-1)!==32){const V=T.lines.get(v[1]+1);if(V!=null&&V.isWrapped&&V.getCodePoint(0)!==32){const G=this._getWordAt([0,v[1]+1],!1,!1,!0);G&&(N+=G.length)}}return{start:F,length:N}}}_selectWordAt(v,k){const D=this._getWordAt(v,k);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[D.start,v[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(v){const k=this._getWordAt(v,!0);if(k){let D=v[1];for(;k.start<0;)k.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,D]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){const k=this._bufferService.buffer.getWrappedRangeForLine(v),D={start:{x:0,y:k.first},end:{x:this._bufferService.cols-1,y:k.last}};this._model.selectionStart=[0,k.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,n.getRangeLength)(D,this._bufferService.cols)}};s.SelectionService=b=d([S(3,_.IBufferService),S(4,_.ICoreService),S(5,w.IMouseService),S(6,_.IOptionsService),S(7,w.IRenderService),S(8,w.ICoreBrowserService)],b)},4725:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;const d=u(8343);s.ICharSizeService=(0,d.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),s.IMouseService=(0,d.createDecorator)("MouseService"),s.IRenderService=(0,d.createDecorator)("RenderService"),s.ISelectionService=(0,d.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(p,s,u){var d=this&&this.__decorate||function(b,v,k,D){var R,T=arguments.length,B=T<3?v:D===null?D=Object.getOwnPropertyDescriptor(v,k):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(b,v,k,D);else for(var j=b.length-1;j>=0;j--)(R=b[j])&&(B=(T<3?R(B):T>3?R(v,k,B):R(v,k))||B);return T>3&&B&&Object.defineProperty(v,k,B),B},S=this&&this.__param||function(b,v){return function(k,D){v(k,D,b)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;const f=u(7239),g=u(8055),C=u(8460),w=u(844),y=u(2585),c=g.css.toColor("#ffffff"),l=g.css.toColor("#000000"),n=g.css.toColor("#ffffff"),a=g.css.toColor("#000000"),_={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const b=[g.css.toColor("#2e3436"),g.css.toColor("#cc0000"),g.css.toColor("#4e9a06"),g.css.toColor("#c4a000"),g.css.toColor("#3465a4"),g.css.toColor("#75507b"),g.css.toColor("#06989a"),g.css.toColor("#d3d7cf"),g.css.toColor("#555753"),g.css.toColor("#ef2929"),g.css.toColor("#8ae234"),g.css.toColor("#fce94f"),g.css.toColor("#729fcf"),g.css.toColor("#ad7fa8"),g.css.toColor("#34e2e2"),g.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let k=0;k<216;k++){const D=v[k/36%6|0],R=v[k/6%6|0],T=v[k%6];b.push({css:g.channels.toCss(D,R,T),rgba:g.channels.toRgba(D,R,T)})}for(let k=0;k<24;k++){const D=8+10*k;b.push({css:g.channels.toCss(D,D,D),rgba:g.channels.toRgba(D,D,D)})}return b})());let m=s.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(b){super(),this._optionsService=b,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:l,cursor:n,cursorAccent:a,selectionForeground:void 0,selectionBackgroundTransparent:_,selectionBackgroundOpaque:g.color.blend(l,_),selectionInactiveBackgroundTransparent:_,selectionInactiveBackgroundOpaque:g.color.blend(l,_),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(b={}){const v=this._colors;if(v.foreground=x(b.foreground,c),v.background=x(b.background,l),v.cursor=x(b.cursor,n),v.cursorAccent=x(b.cursorAccent,a),v.selectionBackgroundTransparent=x(b.selectionBackground,_),v.selectionBackgroundOpaque=g.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=x(b.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=g.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=b.selectionForeground?x(b.selectionForeground,g.NULL_COLOR):void 0,v.selectionForeground===g.NULL_COLOR&&(v.selectionForeground=void 0),g.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=g.color.opacity(v.selectionBackgroundTransparent,.3)),g.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=g.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=s.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=x(b.black,s.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=x(b.red,s.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=x(b.green,s.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=x(b.yellow,s.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=x(b.blue,s.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=x(b.magenta,s.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=x(b.cyan,s.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=x(b.white,s.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=x(b.brightBlack,s.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=x(b.brightRed,s.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=x(b.brightGreen,s.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=x(b.brightYellow,s.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=x(b.brightBlue,s.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=x(b.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=x(b.brightCyan,s.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=x(b.brightWhite,s.DEFAULT_ANSI_COLORS[15]),b.extendedAnsi){const k=Math.min(v.ansi.length-16,b.extendedAnsi.length);for(let D=0;D<k;D++)v.ansi[D+16]=x(b.extendedAnsi[D],s.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(b){this._restoreColor(b),this._onChangeColors.fire(this.colors)}_restoreColor(b){if(b!==void 0)switch(b){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[b]=this._restoreColors.ansi[b]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(b){b(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function x(b,v){if(b!==void 0)try{return g.css.toColor(b)}catch{}return v}s.ThemeService=m=d([S(0,y.IOptionsService)],m)},6349:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;const d=u(8460),S=u(844);class f extends S.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const w=new Array(C);for(let y=0;y<Math.min(C,this.length);y++)w[y]=this._array[this._getCyclicIndex(y)];this._array=w,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let w=this._length;w<C;w++)this._array[w]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,w){this._array[this._getCyclicIndex(C)]=w}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,w,...y){if(w){for(let c=C;c<this._length-w;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+w)];this._length-=w,this.onDeleteEmitter.fire({index:C,amount:w})}for(let c=this._length-1;c>=C;c--)this._array[this._getCyclicIndex(c+y.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<y.length;c++)this._array[this._getCyclicIndex(C+c)]=y[c];if(y.length&&this.onInsertEmitter.fire({index:C,amount:y.length}),this._length+y.length>this._maxLength){const c=this._length+y.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=y.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,w,y){if(!(w<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let l=w-1;l>=0;l--)this.set(C+l+y,this.get(C+l));const c=C+w+y-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<w;c++)this.set(C+c+y,this.get(C+c))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}s.CircularList=f},1439:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function u(d,S=5){if(typeof d!="object")return d;const f=Array.isArray(d)?[]:{};for(const g in d)f[g]=S<=1?d[g]:d[g]&&u(d[g],S-1);return f}},8055:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;const d=u(6114);let S=0,f=0,g=0,C=0;var w,y,c,l,n;function a(m){const x=m.toString(16);return x.length<2?"0"+x:x}function _(m,x){return m<x?(x+.05)/(m+.05):(m+.05)/(x+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(m){m.toCss=function(x,b,v,k){return k!==void 0?`#${a(x)}${a(b)}${a(v)}${a(k)}`:`#${a(x)}${a(b)}${a(v)}`},m.toRgba=function(x,b,v,k=255){return(x<<24|b<<16|v<<8|k)>>>0}}(w||(s.channels=w={})),function(m){function x(b,v){return C=Math.round(255*v),[S,f,g]=n.toChannels(b.rgba),{css:w.toCss(S,f,g,C),rgba:w.toRgba(S,f,g,C)}}m.blend=function(b,v){if(C=(255&v.rgba)/255,C===1)return{css:v.css,rgba:v.rgba};const k=v.rgba>>24&255,D=v.rgba>>16&255,R=v.rgba>>8&255,T=b.rgba>>24&255,B=b.rgba>>16&255,j=b.rgba>>8&255;return S=T+Math.round((k-T)*C),f=B+Math.round((D-B)*C),g=j+Math.round((R-j)*C),{css:w.toCss(S,f,g),rgba:w.toRgba(S,f,g)}},m.isOpaque=function(b){return(255&b.rgba)==255},m.ensureContrastRatio=function(b,v,k){const D=n.ensureContrastRatio(b.rgba,v.rgba,k);if(D)return n.toColor(D>>24&255,D>>16&255,D>>8&255)},m.opaque=function(b){const v=(255|b.rgba)>>>0;return[S,f,g]=n.toChannels(v),{css:w.toCss(S,f,g),rgba:v}},m.opacity=x,m.multiplyOpacity=function(b,v){return C=255&b.rgba,x(b,C*v/255)},m.toColorRGB=function(b){return[b.rgba>>24&255,b.rgba>>16&255,b.rgba>>8&255]}}(y||(s.color=y={})),function(m){let x,b;if(!d.isNode){const v=document.createElement("canvas");v.width=1,v.height=1;const k=v.getContext("2d",{willReadFrequently:!0});k&&(x=k,x.globalCompositeOperation="copy",b=x.createLinearGradient(0,0,1,1))}m.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return S=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),g=parseInt(v.slice(3,4).repeat(2),16),n.toColor(S,f,g);case 5:return S=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),g=parseInt(v.slice(3,4).repeat(2),16),C=parseInt(v.slice(4,5).repeat(2),16),n.toColor(S,f,g,C);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const k=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return S=parseInt(k[1]),f=parseInt(k[2]),g=parseInt(k[3]),C=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),n.toColor(S,f,g,C);if(!x||!b)throw new Error("css.toColor: Unsupported css format");if(x.fillStyle=b,x.fillStyle=v,typeof x.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(x.fillRect(0,0,1,1),[S,f,g,C]=x.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(S,f,g,C),css:v}}}(c||(s.css=c={})),function(m){function x(b,v,k){const D=b/255,R=v/255,T=k/255;return .2126*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))+.7152*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}m.relativeLuminance=function(b){return x(b>>16&255,b>>8&255,255&b)},m.relativeLuminance2=x}(l||(s.rgb=l={})),function(m){function x(v,k,D){const R=v>>24&255,T=v>>16&255,B=v>>8&255;let j=k>>24&255,H=k>>16&255,U=k>>8&255,W=_(l.relativeLuminance2(j,H,U),l.relativeLuminance2(R,T,B));for(;W<D&&(j>0||H>0||U>0);)j-=Math.max(0,Math.ceil(.1*j)),H-=Math.max(0,Math.ceil(.1*H)),U-=Math.max(0,Math.ceil(.1*U)),W=_(l.relativeLuminance2(j,H,U),l.relativeLuminance2(R,T,B));return(j<<24|H<<16|U<<8|255)>>>0}function b(v,k,D){const R=v>>24&255,T=v>>16&255,B=v>>8&255;let j=k>>24&255,H=k>>16&255,U=k>>8&255,W=_(l.relativeLuminance2(j,H,U),l.relativeLuminance2(R,T,B));for(;W<D&&(j<255||H<255||U<255);)j=Math.min(255,j+Math.ceil(.1*(255-j))),H=Math.min(255,H+Math.ceil(.1*(255-H))),U=Math.min(255,U+Math.ceil(.1*(255-U))),W=_(l.relativeLuminance2(j,H,U),l.relativeLuminance2(R,T,B));return(j<<24|H<<16|U<<8|255)>>>0}m.ensureContrastRatio=function(v,k,D){const R=l.relativeLuminance(v>>8),T=l.relativeLuminance(k>>8);if(_(R,T)<D){if(T<R){const H=x(v,k,D),U=_(R,l.relativeLuminance(H>>8));if(U<D){const W=b(v,k,D);return U>_(R,l.relativeLuminance(W>>8))?H:W}return H}const B=b(v,k,D),j=_(R,l.relativeLuminance(B>>8));if(j<D){const H=x(v,k,D);return j>_(R,l.relativeLuminance(H>>8))?B:H}return B}},m.reduceLuminance=x,m.increaseLuminance=b,m.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},m.toColor=function(v,k,D,R){return{css:w.toCss(v,k,D,R),rgba:w.toRgba(v,k,D,R)}}}(n||(s.rgba=n={})),s.toPaddedHex=a,s.contrastRatio=_},8969:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;const d=u(844),S=u(2585),f=u(4348),g=u(7866),C=u(744),w=u(7302),y=u(6975),c=u(8460),l=u(1753),n=u(1480),a=u(7994),_=u(9282),m=u(5435),x=u(5981),b=u(2660);let v=!1;class k extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(R=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(const T in R)this.optionsService.options[T]=R[T]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new w.OptionsService(R)),this._instantiationService.setService(S.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(S.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(g.LogService)),this._instantiationService.setService(S.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(S.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(l.CoreMouseService)),this._instantiationService.setService(S.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(n.UnicodeService)),this._instantiationService.setService(S.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(a.CharsetService),this._instantiationService.setService(S.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(b.OscLinkService),this._instantiationService.setService(S.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new m.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new x.WriteBuffer((T,B)=>this._inputHandler.parse(T,B))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,T){this._writeBuffer.write(R,T)}writeSync(R,T){this._logService.logLevel<=S.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(R,T)}resize(R,T){isNaN(R)||isNaN(T)||(R=Math.max(R,C.MINIMUM_COLS),T=Math.max(T,C.MINIMUM_ROWS),this._bufferService.resize(R,T))}scroll(R,T=!1){this._bufferService.scroll(R,T)}scrollLines(R,T,B){this._bufferService.scrollLines(R,T,B)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){const T=R-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(R,T){return this._inputHandler.registerEscHandler(R,T)}registerDcsHandler(R,T){return this._inputHandler.registerDcsHandler(R,T)}registerCsiHandler(R,T){return this._inputHandler.registerCsiHandler(R,T)}registerOscHandler(R,T){return this._inputHandler.registerOscHandler(R,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1;const T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?R=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const R=[];R.push(this.onLineFeed(_.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,_.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const T of R)T.dispose()})}}}s.CoreTerminal=k},8460:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=u=>(this._listeners.push(u),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===u)return void this._listeners.splice(d,1)}}})),this._event}fire(u,d){const S=[];for(let f=0;f<this._listeners.length;f++)S.push(this._listeners[f]);for(let f=0;f<S.length;f++)S[f].call(void 0,u,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(u,d){return u(S=>d.fire(S))}},5435:function(p,s,u){var d=this&&this.__decorate||function(W,E,M,P){var I,F=arguments.length,N=F<3?E:P===null?P=Object.getOwnPropertyDescriptor(E,M):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(W,E,M,P);else for(var V=W.length-1;V>=0;V--)(I=W[V])&&(N=(F<3?I(N):F>3?I(E,M,N):I(E,M))||N);return F>3&&N&&Object.defineProperty(E,M,N),N},S=this&&this.__param||function(W,E){return function(M,P){E(M,P,W)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;const f=u(2584),g=u(7116),C=u(2015),w=u(844),y=u(482),c=u(8437),l=u(8460),n=u(643),a=u(511),_=u(3734),m=u(2585),x=u(6242),b=u(6351),v=u(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},D=131072;function R(W,E){if(W>24)return E.setWinLines||!1;switch(W){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var T;(function(W){W[W.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",W[W.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(s.WindowsOptionsReportType=T={}));let B=0;class j extends w.Disposable{getAttrData(){return this._curAttrData}constructor(E,M,P,I,F,N,V,G,Y=new C.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=M,this._coreService=P,this._logService=I,this._optionsService=F,this._oscLinkService=N,this._coreMouseService=V,this._unicodeService=G,this._parser=Y,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new a.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new l.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new l.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new l.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new l.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new l.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new l.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new l.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new l.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new l.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new l.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new l.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new H(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._parser.setCsiHandlerFallback((L,O)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(L),params:O.toArray()})}),this._parser.setEscHandlerFallback(L=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(L)})}),this._parser.setExecuteHandlerFallback(L=>{this._logService.debug("Unknown EXECUTE code: ",{code:L})}),this._parser.setOscHandlerFallback((L,O,z)=>{this._logService.debug("Unknown OSC code: ",{identifier:L,action:O,data:z})}),this._parser.setDcsHandlerFallback((L,O,z)=>{O==="HOOK"&&(z=z.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(L),action:O,payload:z})}),this._parser.setPrintHandler((L,O,z)=>this.print(L,O,z)),this._parser.registerCsiHandler({final:"@"},L=>this.insertChars(L)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},L=>this.scrollLeft(L)),this._parser.registerCsiHandler({final:"A"},L=>this.cursorUp(L)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},L=>this.scrollRight(L)),this._parser.registerCsiHandler({final:"B"},L=>this.cursorDown(L)),this._parser.registerCsiHandler({final:"C"},L=>this.cursorForward(L)),this._parser.registerCsiHandler({final:"D"},L=>this.cursorBackward(L)),this._parser.registerCsiHandler({final:"E"},L=>this.cursorNextLine(L)),this._parser.registerCsiHandler({final:"F"},L=>this.cursorPrecedingLine(L)),this._parser.registerCsiHandler({final:"G"},L=>this.cursorCharAbsolute(L)),this._parser.registerCsiHandler({final:"H"},L=>this.cursorPosition(L)),this._parser.registerCsiHandler({final:"I"},L=>this.cursorForwardTab(L)),this._parser.registerCsiHandler({final:"J"},L=>this.eraseInDisplay(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},L=>this.eraseInDisplay(L,!0)),this._parser.registerCsiHandler({final:"K"},L=>this.eraseInLine(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},L=>this.eraseInLine(L,!0)),this._parser.registerCsiHandler({final:"L"},L=>this.insertLines(L)),this._parser.registerCsiHandler({final:"M"},L=>this.deleteLines(L)),this._parser.registerCsiHandler({final:"P"},L=>this.deleteChars(L)),this._parser.registerCsiHandler({final:"S"},L=>this.scrollUp(L)),this._parser.registerCsiHandler({final:"T"},L=>this.scrollDown(L)),this._parser.registerCsiHandler({final:"X"},L=>this.eraseChars(L)),this._parser.registerCsiHandler({final:"Z"},L=>this.cursorBackwardTab(L)),this._parser.registerCsiHandler({final:"`"},L=>this.charPosAbsolute(L)),this._parser.registerCsiHandler({final:"a"},L=>this.hPositionRelative(L)),this._parser.registerCsiHandler({final:"b"},L=>this.repeatPrecedingCharacter(L)),this._parser.registerCsiHandler({final:"c"},L=>this.sendDeviceAttributesPrimary(L)),this._parser.registerCsiHandler({prefix:">",final:"c"},L=>this.sendDeviceAttributesSecondary(L)),this._parser.registerCsiHandler({final:"d"},L=>this.linePosAbsolute(L)),this._parser.registerCsiHandler({final:"e"},L=>this.vPositionRelative(L)),this._parser.registerCsiHandler({final:"f"},L=>this.hVPosition(L)),this._parser.registerCsiHandler({final:"g"},L=>this.tabClear(L)),this._parser.registerCsiHandler({final:"h"},L=>this.setMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"h"},L=>this.setModePrivate(L)),this._parser.registerCsiHandler({final:"l"},L=>this.resetMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"l"},L=>this.resetModePrivate(L)),this._parser.registerCsiHandler({final:"m"},L=>this.charAttributes(L)),this._parser.registerCsiHandler({final:"n"},L=>this.deviceStatus(L)),this._parser.registerCsiHandler({prefix:"?",final:"n"},L=>this.deviceStatusPrivate(L)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},L=>this.softReset(L)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},L=>this.setCursorStyle(L)),this._parser.registerCsiHandler({final:"r"},L=>this.setScrollRegion(L)),this._parser.registerCsiHandler({final:"s"},L=>this.saveCursor(L)),this._parser.registerCsiHandler({final:"t"},L=>this.windowOptions(L)),this._parser.registerCsiHandler({final:"u"},L=>this.restoreCursor(L)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},L=>this.insertColumns(L)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},L=>this.deleteColumns(L)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},L=>this.selectProtected(L)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},L=>this.requestMode(L,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},L=>this.requestMode(L,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new x.OscHandler(L=>(this.setTitle(L),this.setIconName(L),!0))),this._parser.registerOscHandler(1,new x.OscHandler(L=>this.setIconName(L))),this._parser.registerOscHandler(2,new x.OscHandler(L=>this.setTitle(L))),this._parser.registerOscHandler(4,new x.OscHandler(L=>this.setOrReportIndexedColor(L))),this._parser.registerOscHandler(8,new x.OscHandler(L=>this.setHyperlink(L))),this._parser.registerOscHandler(10,new x.OscHandler(L=>this.setOrReportFgColor(L))),this._parser.registerOscHandler(11,new x.OscHandler(L=>this.setOrReportBgColor(L))),this._parser.registerOscHandler(12,new x.OscHandler(L=>this.setOrReportCursorColor(L))),this._parser.registerOscHandler(104,new x.OscHandler(L=>this.restoreIndexedColor(L))),this._parser.registerOscHandler(110,new x.OscHandler(L=>this.restoreFgColor(L))),this._parser.registerOscHandler(111,new x.OscHandler(L=>this.restoreBgColor(L))),this._parser.registerOscHandler(112,new x.OscHandler(L=>this.restoreCursorColor(L))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const L in g.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:L},()=>this.selectCharset("("+L)),this._parser.registerEscHandler({intermediates:")",final:L},()=>this.selectCharset(")"+L)),this._parser.registerEscHandler({intermediates:"*",final:L},()=>this.selectCharset("*"+L)),this._parser.registerEscHandler({intermediates:"+",final:L},()=>this.selectCharset("+"+L)),this._parser.registerEscHandler({intermediates:"-",final:L},()=>this.selectCharset("-"+L)),this._parser.registerEscHandler({intermediates:".",final:L},()=>this.selectCharset("."+L)),this._parser.registerEscHandler({intermediates:"/",final:L},()=>this.selectCharset("/"+L));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(L=>(this._logService.error("Parsing error: ",L),L)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new b.DcsHandler((L,O)=>this.requestStatusString(L,O)))}_preserveStack(E,M,P,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=M,this._parseStack.decodedLength=P,this._parseStack.position=I}_logSlowResolvingAsync(E){this._logService.logLevel<=m.LogLevelEnum.WARN&&Promise.race([E,new Promise((M,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(M=>{if(M!=="#SLOW_TIMEOUT")throw M;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,M){let P,I=this._activeBuffer.x,F=this._activeBuffer.y,N=0;const V=this._parseStack.paused;if(V){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,M))return this._logSlowResolvingAsync(P),P;I=this._parseStack.cursorStartX,F=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>D&&(N=this._parseStack.position+D)}if(this._logService.logLevel<=m.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,G=>String.fromCharCode(G)).join("")}"`),typeof E=="string"?E.split("").map(G=>G.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<D&&(this._parseBuffer=new Uint32Array(Math.min(E.length,D))),V||this._dirtyRowTracker.clearRange(),E.length>D)for(let G=N;G<E.length;G+=D){const Y=G+D<E.length?G+D:E.length,L=typeof E=="string"?this._stringDecoder.decode(E.substring(G,Y),this._parseBuffer):this._utf8Decoder.decode(E.subarray(G,Y),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,L))return this._preserveStack(I,F,L,G),this._logSlowResolvingAsync(P),P}else if(!V){const G=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,G))return this._preserveStack(I,F,G,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===I&&this._activeBuffer.y===F||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,M,P){let I,F;const N=this._charsetService.charset,V=this._optionsService.rawOptions.screenReaderMode,G=this._bufferService.cols,Y=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,O=this._curAttrData;let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-M>0&&z.getWidth(this._activeBuffer.x-1)===2&&z.setCellFromCodePoint(this._activeBuffer.x-1,0,1,O.fg,O.bg,O.extended);for(let $=M;$<P;++$){if(I=E[$],F=this._unicodeService.wcwidth(I),I<127&&N){const Q=N[String.fromCharCode(I)];Q&&(I=Q.charCodeAt(0))}if(V&&this._onA11yChar.fire((0,y.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),F||!this._activeBuffer.x){if(this._activeBuffer.x+F-1>=G){if(Y){for(;this._activeBuffer.x<G;)z.setCellFromCodePoint(this._activeBuffer.x++,0,1,O.fg,O.bg,O.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=G-1,F===2)continue}if(L&&(z.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(O),O),z.getWidth(G-1)===2&&z.setCellFromCodePoint(G-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,O.fg,O.bg,O.extended)),z.setCellFromCodePoint(this._activeBuffer.x++,I,F,O.fg,O.bg,O.extended),F>0)for(;--F;)z.setCellFromCodePoint(this._activeBuffer.x++,0,0,O.fg,O.bg,O.extended)}else z.getWidth(this._activeBuffer.x-1)?z.addCodepointToCell(this._activeBuffer.x-1,I):z.addCodepointToCell(this._activeBuffer.x-2,I)}P-M>0&&(z.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<G&&P-M>0&&z.getWidth(this._activeBuffer.x)===0&&!z.hasContent(this._activeBuffer.x)&&z.setCellFromCodePoint(this._activeBuffer.x,0,1,O.fg,O.bg,O.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,M){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,M):this._parser.registerCsiHandler(E,P=>!R(P.params[0],this._optionsService.rawOptions.windowOptions)||M(P))}registerDcsHandler(E,M){return this._parser.registerDcsHandler(E,new b.DcsHandler(M))}registerEscHandler(E,M){return this._parser.registerEscHandler(E,M)}registerOscHandler(E,M){return this._parser.registerOscHandler(E,new x.OscHandler(M))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);M.hasWidth(this._activeBuffer.x)&&!M.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,M){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+M):(this._activeBuffer.x=E,this._activeBuffer.y=M),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,M){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+M)}cursorUp(E){const M=this._activeBuffer.y-this._activeBuffer.scrollTop;return M>=0?this._moveCursor(0,-Math.min(M,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){const M=this._activeBuffer.scrollBottom-this._activeBuffer.y;return M>=0?this._moveCursor(0,Math.min(M,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){const M=E.params[0];return M===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:M===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=E.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let M=E.params[0]||1;for(;M--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){const M=E.params[0];return M===1&&(this._curAttrData.bg|=536870912),M!==2&&M!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,M,P,I=!1,F=!1){const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);N.replaceCells(M,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),F),I&&(N.isWrapped=!1)}_resetBufferLine(E,M=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),M),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),P.isWrapped=!1)}eraseInDisplay(E,M=!1){let P;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);P<this._bufferService.rows;P++)this._resetBufferLine(P,M);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,M),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,M);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,M);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(E,M=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,M);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,M);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,M)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let M=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;M--;)this._activeBuffer.lines.splice(F-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let M=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;M--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let M=E.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let M=E.params[0]||1;for(;M--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=E.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);I.deleteCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=E.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);I.insertCells(0,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=E.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);I.insertCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const M=E.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);I.deleteCells(this._activeBuffer.x,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return M&&(M.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;const M=E.params[0]||1,P=new Uint32Array(M);for(let I=0;I<M;++I)P[I]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let M=0;M<E.length;M++)switch(E.params[M]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let M=0;M<E.length;M++)switch(E.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),this._charsetService.setgCharset(1,g.DEFAULT_CHARSET),this._charsetService.setgCharset(2,g.DEFAULT_CHARSET),this._charsetService.setgCharset(3,g.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let M=0;M<E.length;M++)switch(E.params[M]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let M=0;M<E.length;M++)switch(E.params[M]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[M]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,M){const P=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:F}=this._coreMouseService,N=this._coreService,{buffers:V,cols:G}=this._bufferService,{active:Y,alt:L}=V,O=this._optionsService.rawOptions,z=te=>te?1:2,$=E.params[0];return Q=$,q=M?$===2?4:$===4?z(N.modes.insertMode):$===12?3:$===20?z(O.convertEol):0:$===1?z(P.applicationCursorKeys):$===3?O.windowOptions.setWinLines?G===80?2:G===132?1:0:0:$===6?z(P.origin):$===7?z(P.wraparound):$===8?3:$===9?z(I==="X10"):$===12?z(O.cursorBlink):$===25?z(!N.isCursorHidden):$===45?z(P.reverseWraparound):$===66?z(P.applicationKeypad):$===67?4:$===1e3?z(I==="VT200"):$===1002?z(I==="DRAG"):$===1003?z(I==="ANY"):$===1004?z(P.sendFocus):$===1005?4:$===1006?z(F==="SGR"):$===1015?4:$===1016?z(F==="SGR_PIXELS"):$===1048?1:$===47||$===1047||$===1049?z(Y===L):$===2004?z(P.bracketedPasteMode):0,N.triggerDataEvent(`${f.C0.ESC}[${M?"":"?"}${Q};${q}$y`),!0;var Q,q}_updateAttrColor(E,M,P,I,F){return M===2?(E|=50331648,E&=-16777216,E|=_.AttributeData.fromColorRGB([P,I,F])):M===5&&(E&=-50331904,E|=33554432|255&P),E}_extractColor(E,M,P){const I=[0,0,-1,0,0,0];let F=0,N=0;do{if(I[N+F]=E.params[M+N],E.hasSubParams(M+N)){const V=E.getSubParams(M+N);let G=0;do I[1]===5&&(F=1),I[N+G+1+F]=V[G];while(++G<V.length&&G+N+1+F<I.length);break}if(I[1]===5&&N+F>=2||I[1]===2&&N+F>=5)break;I[1]&&(F=1)}while(++N+M<E.length&&N+F<I.length);for(let V=2;V<I.length;++V)I[V]===-1&&(I[V]=0);switch(I[0]){case 38:P.fg=this._updateAttrColor(P.fg,I[1],I[3],I[4],I[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,I[1],I[3],I[4],I[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,I[1],I[3],I[4],I[5])}return N}_processUnderline(E,M){M.extended=M.extended.clone(),(!~E||E>5)&&(E=1),M.extended.underlineStyle=E,M.fg|=268435456,E===0&&(M.fg&=-268435457),M.updateExtended()}_processSGR0(E){E.fg=c.DEFAULT_ATTR_DATA.fg,E.bg=c.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;const M=E.length;let P;const I=this._curAttrData;for(let F=0;F<M;F++)P=E.params[F],P>=30&&P<=37?(I.fg&=-50331904,I.fg|=16777216|P-30):P>=40&&P<=47?(I.bg&=-50331904,I.bg|=16777216|P-40):P>=90&&P<=97?(I.fg&=-50331904,I.fg|=16777224|P-90):P>=100&&P<=107?(I.bg&=-50331904,I.bg|=16777224|P-100):P===0?this._processSGR0(I):P===1?I.fg|=134217728:P===3?I.bg|=67108864:P===4?(I.fg|=268435456,this._processUnderline(E.hasSubParams(F)?E.getSubParams(F)[0]:1,I)):P===5?I.fg|=536870912:P===7?I.fg|=67108864:P===8?I.fg|=1073741824:P===9?I.fg|=2147483648:P===2?I.bg|=134217728:P===21?this._processUnderline(2,I):P===22?(I.fg&=-134217729,I.bg&=-134217729):P===23?I.bg&=-67108865:P===24?(I.fg&=-268435457,this._processUnderline(0,I)):P===25?I.fg&=-536870913:P===27?I.fg&=-67108865:P===28?I.fg&=-1073741825:P===29?I.fg&=2147483647:P===39?(I.fg&=-67108864,I.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):P===49?(I.bg&=-67108864,I.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?F+=this._extractColor(E,F,I):P===53?I.bg|=1073741824:P===55?I.bg&=-1073741825:P===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):P===100?(I.fg&=-67108864,I.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const M=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${M};${P}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){const M=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${M};${P}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){const M=E.params[0]||1;switch(M){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=M%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(E){const M=E.params[0]||1;let P;return(E.length<2||(P=E.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>M&&(this._activeBuffer.scrollTop=M-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(E){if(!R(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;const M=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:M!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:M!==0&&M!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),M!==0&&M!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:M!==0&&M!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),M!==0&&M!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){const M=[],P=E.split(";");for(;P.length>1;){const I=P.shift(),F=P.shift();if(/^\d+$/.exec(I)){const N=parseInt(I);if(U(N))if(F==="?")M.push({type:0,index:N});else{const V=(0,v.parseColor)(F);V&&M.push({type:1,index:N,color:V})}}}return M.length&&this._onColor.fire(M),!0}setHyperlink(E){const M=E.split(";");return!(M.length<2)&&(M[1]?this._createHyperlink(M[0],M[1]):!M[0]&&this._finishHyperlink())}_createHyperlink(E,M){this._getCurrentLinkId()&&this._finishHyperlink();const P=E.split(":");let I;const F=P.findIndex(N=>N.startsWith("id="));return F!==-1&&(I=P[F].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:M}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,M){const P=E.split(";");for(let I=0;I<P.length&&!(M>=this._specialColors.length);++I,++M)if(P[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[M]}]);else{const F=(0,v.parseColor)(P[I]);F&&this._onColor.fire([{type:1,index:this._specialColors[M],color:F}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;const M=[],P=E.split(";");for(let I=0;I<P.length;++I)if(/^\d+$/.exec(P[I])){const F=parseInt(P[I]);U(F)&&M.push({type:2,index:F})}return M.length&&this._onColor.fire(M),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,g.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(k[E[0]],g.CHARSETS[E[1]]||g.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){const E=new a.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let M=0;M<this._bufferService.rows;++M){const P=this._activeBuffer.ybase+this._activeBuffer.y+M,I=this._activeBuffer.lines.get(P);I&&(I.fill(E),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,M){const P=this._bufferService.buffer,I=this._optionsService.rawOptions;return(F=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${F}${f.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,M){this._dirtyRowTracker.markRangeDirty(E,M)}}s.InputHandler=j;let H=class{constructor(W){this._bufferService=W,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(W){W<this.start?this.start=W:W>this.end&&(this.end=W)}markRangeDirty(W,E){W>E&&(B=W,W=E,E=B),W<this.start&&(this.start=W),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function U(W){return 0<=W&&W<256}H=d([S(0,m.IBufferService)],H)},844:(p,s)=>{function u(d){for(const S of d)S.dispose();d.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const S=this._disposables.indexOf(d);S!==-1&&this._disposables.splice(S,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var S;this._isDisposed||d===this._value||((S=this._value)===null||S===void 0||S.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},s.toDisposable=function(d){return{dispose:d}},s.disposeArray=u,s.getDisposeArrayDisposable=function(d){return{dispose:()=>u(d)}}},1505:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class u{constructor(){this._data={}}set(S,f,g){this._data[S]||(this._data[S]={}),this._data[S][f]=g}get(S,f){return this._data[S]?this._data[S][f]:void 0}clear(){this._data={}}}s.TwoKeyMap=u,s.FourKeyMap=class{constructor(){this._data=new u}set(d,S,f,g,C){this._data.get(d,S)||this._data.set(d,S,new u),this._data.get(d,S).set(f,g,C)}get(d,S,f,g){var C;return(C=this._data.get(d,S))===null||C===void 0?void 0:C.get(f,g)}clear(){this._data.clear()}}},6114:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";const u=s.isNode?"node":navigator.userAgent,d=s.isNode?"node":navigator.platform;s.isFirefox=u.includes("Firefox"),s.isLegacyEdge=u.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(u),s.getSafariVersion=function(){if(!s.isSafari)return 0;const S=u.match(/Version\/(\d+)/);return S===null||S.length<2?0:parseInt(S[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),s.isIpad=d==="iPad",s.isIphone=d==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),s.isLinux=d.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(u)},6106:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let u=0;s.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(u=this._search(this._getKey(d)),this._array.splice(u,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const S=this._getKey(d);if(S===void 0||(u=this._search(S),u===-1)||this._getKey(this._array[u])!==S)return!1;do if(this._array[u]===d)return this._array.splice(u,1),!0;while(++u<this._array.length&&this._getKey(this._array[u])===S);return!1}*getKeyIterator(d){if(this._array.length!==0&&(u=this._search(d),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===d))do yield this._array[u];while(++u<this._array.length&&this._getKey(this._array[u])===d)}forEachByKey(d,S){if(this._array.length!==0&&(u=this._search(d),!(u<0||u>=this._array.length)&&this._getKey(this._array[u])===d))do S(this._array[u]);while(++u<this._array.length&&this._getKey(this._array[u])===d)}values(){return[...this._array].values()}_search(d){let S=0,f=this._array.length-1;for(;f>=S;){let g=S+f>>1;const C=this._getKey(this._array[g]);if(C>d)f=g-1;else{if(!(C<d)){for(;g>0&&this._getKey(this._array[g-1])===d;)g--;return g}S=g+1}}return S}}},7226:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;const d=u(6114);class S{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let w=0,y=0,c=C.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),y=Math.max(w,y),l=C.timeRemaining(),1.5*y>l)return c-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-w))}ms`),void this._start();c=l}this.clear()}}class f extends S{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const w=Date.now()+C;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}s.PriorityTaskQueue=f,s.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends S{_requestCallback(g){return requestIdleCallback(g)}_cancelCallback(g){cancelIdleCallback(g)}}:f,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(g){this._queue.clear(),this._queue.enqueue(g)}flush(){this._queue.flush()}}},9282:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;const d=u(643);s.updateWindowsModeWrappedState=function(S){const f=S.buffer.lines.get(S.buffer.ybase+S.buffer.y-1),g=f==null?void 0:f.get(S.cols-1),C=S.buffer.lines.get(S.buffer.ybase+S.buffer.y);C&&g&&(C.isWrapped=g[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&g[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class u{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new u;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=u;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}constructor(f=0,g=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=g}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=d},9092:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;const d=u(6349),S=u(7226),f=u(3734),g=u(8437),C=u(4634),w=u(511),y=u(643),c=u(4863),l=u(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(n,a,_){this._hasScrollback=n,this._optionsService=a,this._bufferService=_,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=g.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new S.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg,this._nullCell.extended=n.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg,this._whitespaceCell.extended=n.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(n,a){return new g.BufferLine(this._bufferService.cols,this.getNullCell(n),a)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows}_getCorrectBufferLength(n){if(!this._hasScrollback)return n;const a=n+this._optionsService.rawOptions.scrollback;return a>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:a}fillViewportRows(n){if(this.lines.length===0){n===void 0&&(n=g.DEFAULT_ATTR_DATA);let a=this._rows;for(;a--;)this.lines.push(this.getBlankLine(n))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(n,a){const _=this.getNullCell(g.DEFAULT_ATTR_DATA);let m=0;const x=this._getCorrectBufferLength(a);if(x>this.lines.maxLength&&(this.lines.maxLength=x),this.lines.length>0){if(this._cols<n)for(let v=0;v<this.lines.length;v++)m+=+this.lines.get(v).resize(n,_);let b=0;if(this._rows<a)for(let v=this._rows;v<a;v++)this.lines.length<a+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new g.BufferLine(n,_)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new g.BufferLine(n,_)));else for(let v=this._rows;v>a;v--)this.lines.length>a+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(x<this.lines.maxLength){const v=this.lines.length-x;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=x}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,a-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=a-1,this._isReflowEnabled&&(this._reflow(n,a),this._cols>n))for(let b=0;b<this.lines.length;b++)m+=+this.lines.get(b).resize(n,_);this._cols=n,this._rows=a,this._memoryCleanupQueue.clear(),m>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let n=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,n=!1);let a=0;for(;this._memoryCleanupPosition<this.lines.length;)if(a+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),a>100)return!0;return n}get _isReflowEnabled(){const n=this._optionsService.rawOptions.windowsPty;return n&&n.buildNumber?this._hasScrollback&&n.backend==="conpty"&&n.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(n,a){this._cols!==n&&(n>this._cols?this._reflowLarger(n,a):this._reflowSmaller(n,a))}_reflowLarger(n,a){const _=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(g.DEFAULT_ATTR_DATA));if(_.length>0){const m=(0,C.reflowLargerCreateNewLayout)(this.lines,_);(0,C.reflowLargerApplyNewLayout)(this.lines,m.layout),this._reflowLargerAdjustViewport(n,a,m.countRemoved)}}_reflowLargerAdjustViewport(n,a,_){const m=this.getNullCell(g.DEFAULT_ATTR_DATA);let x=_;for(;x-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<a&&this.lines.push(new g.BufferLine(n,m))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-_,0)}_reflowSmaller(n,a){const _=this.getNullCell(g.DEFAULT_ATTR_DATA),m=[];let x=0;for(let b=this.lines.length-1;b>=0;b--){let v=this.lines.get(b);if(!v||!v.isWrapped&&v.getTrimmedLength()<=n)continue;const k=[v];for(;v.isWrapped&&b>0;)v=this.lines.get(--b),k.unshift(v);const D=this.ybase+this.y;if(D>=b&&D<b+k.length)continue;const R=k[k.length-1].getTrimmedLength(),T=(0,C.reflowSmallerGetNewLineLengths)(k,this._cols,n),B=T.length-k.length;let j;j=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+B):Math.max(0,this.lines.length-this.lines.maxLength+B);const H=[];for(let I=0;I<B;I++){const F=this.getBlankLine(g.DEFAULT_ATTR_DATA,!0);H.push(F)}H.length>0&&(m.push({start:b+k.length+x,newLines:H}),x+=H.length),k.push(...H);let U=T.length-1,W=T[U];W===0&&(U--,W=T[U]);let E=k.length-B-1,M=R;for(;E>=0;){const I=Math.min(M,W);if(k[U]===void 0)break;if(k[U].copyCellsFrom(k[E],M-I,W-I,I,!0),W-=I,W===0&&(U--,W=T[U]),M-=I,M===0){E--;const F=Math.max(E,0);M=(0,C.getWrappedLineTrimmedLength)(k,F,this._cols)}}for(let I=0;I<k.length;I++)T[I]<n&&k[I].setCell(T[I],_);let P=B-j;for(;P-- >0;)this.ybase===0?this.y<a-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+x)-a&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+B,this.ybase+a-1)}if(m.length>0){const b=[],v=[];for(let U=0;U<this.lines.length;U++)v.push(this.lines.get(U));const k=this.lines.length;let D=k-1,R=0,T=m[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+x);let B=0;for(let U=Math.min(this.lines.maxLength-1,k+x-1);U>=0;U--)if(T&&T.start>D+B){for(let W=T.newLines.length-1;W>=0;W--)this.lines.set(U--,T.newLines[W]);U++,b.push({index:D+1,amount:T.newLines.length}),B+=T.newLines.length,T=m[++R]}else this.lines.set(U,v[D--]);let j=0;for(let U=b.length-1;U>=0;U--)b[U].index+=j,this.lines.onInsertEmitter.fire(b[U]),j+=b[U].amount;const H=Math.max(0,k+x-this.lines.maxLength);H>0&&this.lines.onTrimEmitter.fire(H)}}translateBufferLineToString(n,a,_=0,m){const x=this.lines.get(n);return x?x.translateToString(a,_,m):""}getWrappedRangeForLine(n){let a=n,_=n;for(;a>0&&this.lines.get(a).isWrapped;)a--;for(;_+1<this.lines.length&&this.lines.get(_+1).isWrapped;)_++;return{first:a,last:_}}setupTabStops(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.rawOptions.tabStopWidth)this.tabs[n]=!0}prevStop(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n}nextStop(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n}clearMarkers(n){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].line===n&&(this.markers[a].dispose(),this.markers.splice(a--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].dispose(),this.markers.splice(n--,1);this._isClearing=!1}addMarker(n){const a=new c.Marker(n);return this.markers.push(a),a.register(this.lines.onTrim(_=>{a.line-=_,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(_=>{a.line>=_.index&&(a.line+=_.amount)})),a.register(this.lines.onDelete(_=>{a.line>=_.index&&a.line<_.index+_.amount&&a.dispose(),a.line>_.index&&(a.line-=_.amount)})),a.register(a.onDispose(()=>this._removeMarker(a))),a}_removeMarker(n){this._isClearing||this.markers.splice(this.markers.indexOf(n),1)}}},8437:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;const d=u(3734),S=u(511),f=u(643),g=u(482);s.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let C=0;class w{constructor(c,l,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);const a=l||S.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let _=0;_<c;++_)this.setCell(_,a);this.length=c}get(c){const l=this._data[3*c+0],n=2097151&l;return[this._data[3*c+1],2097152&l?this._combined[c]:n?(0,g.stringFromCodePoint)(n):"",l>>22,2097152&l?this._combined[c].charCodeAt(this._combined[c].length-1):n]}set(c,l){this._data[3*c+1]=l[f.CHAR_DATA_ATTR_INDEX],l[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=l[1],this._data[3*c+0]=2097152|c|l[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=l[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){const l=this._data[3*c+0];return 2097152&l?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&l}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){const l=this._data[3*c+0];return 2097152&l?this._combined[c]:2097151&l?(0,g.stringFromCodePoint)(2097151&l):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,l){return C=3*c,l.content=this._data[C+0],l.fg=this._data[C+1],l.bg=this._data[C+2],2097152&l.content&&(l.combinedData=this._combined[c]),268435456&l.bg&&(l.extended=this._extendedAttrs[c]),l}setCell(c,l){2097152&l.content&&(this._combined[c]=l.combinedData),268435456&l.bg&&(this._extendedAttrs[c]=l.extended),this._data[3*c+0]=l.content,this._data[3*c+1]=l.fg,this._data[3*c+2]=l.bg}setCellFromCodePoint(c,l,n,a,_,m){268435456&_&&(this._extendedAttrs[c]=m),this._data[3*c+0]=l|n<<22,this._data[3*c+1]=a,this._data[3*c+2]=_}addCodepointToCell(c,l){let n=this._data[3*c+0];2097152&n?this._combined[c]+=(0,g.stringFromCodePoint)(l):(2097151&n?(this._combined[c]=(0,g.stringFromCodePoint)(2097151&n)+(0,g.stringFromCodePoint)(l),n&=-2097152,n|=2097152):n=l|4194304,this._data[3*c+0]=n)}insertCells(c,l,n,a){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs),l<this.length-c){const _=new S.CellData;for(let m=this.length-c-l-1;m>=0;--m)this.setCell(c+l+m,this.loadCell(c+m,_));for(let m=0;m<l;++m)this.setCell(c+m,n)}else for(let _=c;_<this.length;++_)this.setCell(_,n);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs)}deleteCells(c,l,n,a){if(c%=this.length,l<this.length-c){const _=new S.CellData;for(let m=0;m<this.length-c-l;++m)this.setCell(c+m,this.loadCell(c+l+m,_));for(let m=this.length-l;m<this.length;++m)this.setCell(m,n)}else for(let _=c;_<this.length;++_)this.setCell(_,n);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs)}replaceCells(c,l,n,a,_=!1){if(_)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&!this.isProtected(l)&&this.setCellFromCodePoint(l,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs);c<l&&c<this.length;)this.isProtected(c)||this.setCell(c,n),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs);c<l&&c<this.length;)this.setCell(c++,n)}resize(c,l){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const n=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*n)this._data=new Uint32Array(this._data.buffer,0,n);else{const a=new Uint32Array(n);a.set(this._data),this._data=a}for(let a=this.length;a<c;++a)this.setCell(a,l)}else{this._data=this._data.subarray(0,n);const a=Object.keys(this._combined);for(let m=0;m<a.length;m++){const x=parseInt(a[m],10);x>=c&&delete this._combined[x]}const _=Object.keys(this._extendedAttrs);for(let m=0;m<_.length;m++){const x=parseInt(_[m],10);x>=c&&delete this._extendedAttrs[x]}}return this.length=c,4*n*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,l=!1){if(l)for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,c);else{this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(const l in c._combined)this._combined[l]=c._combined[l];this._extendedAttrs={};for(const l in c._extendedAttrs)this._extendedAttrs[l]=c._extendedAttrs[l];this.isWrapped=c.isWrapped}clone(){const c=new w(0);c._data=new Uint32Array(this._data),c.length=this.length;for(const l in this._combined)c._combined[l]=this._combined[l];for(const l in this._extendedAttrs)c._extendedAttrs[l]=this._extendedAttrs[l];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,l,n,a,_){const m=c._data;if(_)for(let b=a-1;b>=0;b--){for(let v=0;v<3;v++)this._data[3*(n+b)+v]=m[3*(l+b)+v];268435456&m[3*(l+b)+2]&&(this._extendedAttrs[n+b]=c._extendedAttrs[l+b])}else for(let b=0;b<a;b++){for(let v=0;v<3;v++)this._data[3*(n+b)+v]=m[3*(l+b)+v];268435456&m[3*(l+b)+2]&&(this._extendedAttrs[n+b]=c._extendedAttrs[l+b])}const x=Object.keys(c._combined);for(let b=0;b<x.length;b++){const v=parseInt(x[b],10);v>=l&&(this._combined[v-l+n]=c._combined[v])}}translateToString(c=!1,l=0,n=this.length){c&&(n=Math.min(n,this.getTrimmedLength()));let a="";for(;l<n;){const _=this._data[3*l+0],m=2097151&_;a+=2097152&_?this._combined[l]:m?(0,g.stringFromCodePoint)(m):f.WHITESPACE_CELL_CHAR,l+=_>>22||1}return a}}s.BufferLine=w},4841:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(u,d){if(u.start.y>u.end.y)throw new Error(`Buffer range end (${u.end.x}, ${u.end.y}) cannot be before start (${u.start.x}, ${u.start.y})`);return d*(u.end.y-u.start.y)+(u.end.x-u.start.x+1)}},4634:(p,s)=>{function u(d,S,f){if(S===d.length-1)return d[S].getTrimmedLength();const g=!d[S].hasContent(f-1)&&d[S].getWidth(f-1)===1,C=d[S+1].getWidth(0)===2;return g&&C?f-1:f}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(d,S,f,g,C){const w=[];for(let y=0;y<d.length-1;y++){let c=y,l=d.get(++c);if(!l.isWrapped)continue;const n=[d.get(y)];for(;c<d.length&&l.isWrapped;)n.push(l),l=d.get(++c);if(g>=y&&g<c){y+=n.length-1;continue}let a=0,_=u(n,a,S),m=1,x=0;for(;m<n.length;){const v=u(n,m,S),k=v-x,D=f-_,R=Math.min(k,D);n[a].copyCellsFrom(n[m],x,_,R,!1),_+=R,_===f&&(a++,_=0),x+=R,x===v&&(m++,x=0),_===0&&a!==0&&n[a-1].getWidth(f-1)===2&&(n[a].copyCellsFrom(n[a-1],f-1,_++,1,!1),n[a-1].setCell(f-1,C))}n[a].replaceCells(_,f,C);let b=0;for(let v=n.length-1;v>0&&(v>a||n[v].getTrimmedLength()===0);v--)b++;b>0&&(w.push(y+n.length-b),w.push(b)),y+=n.length-1}return w},s.reflowLargerCreateNewLayout=function(d,S){const f=[];let g=0,C=S[g],w=0;for(let y=0;y<d.length;y++)if(C===y){const c=S[++g];d.onDeleteEmitter.fire({index:y-w,amount:c}),y+=c-1,w+=c,C=S[++g]}else f.push(y);return{layout:f,countRemoved:w}},s.reflowLargerApplyNewLayout=function(d,S){const f=[];for(let g=0;g<S.length;g++)f.push(d.get(S[g]));for(let g=0;g<f.length;g++)d.set(g,f[g]);d.length=S.length},s.reflowSmallerGetNewLineLengths=function(d,S,f){const g=[],C=d.map((l,n)=>u(d,n,S)).reduce((l,n)=>l+n);let w=0,y=0,c=0;for(;c<C;){if(C-c<f){g.push(C-c);break}w+=f;const l=u(d,y,S);w>l&&(w-=l,y++);const n=d[y].getWidth(w-1)===2;n&&w--;const a=n?f-1:f;g.push(a),c+=a}return g},s.getWrappedLineTrimmedLength=u},5295:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;const d=u(8460),S=u(844),f=u(9092);class g extends S.Disposable{constructor(w,y){super(),this._optionsService=w,this._bufferService=y,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,y){this._normal.resize(w,y),this._alt.resize(w,y),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}s.BufferSet=g},511:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;const d=u(482),S=u(643),f=u(3734);class g extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const y=new g;return y.setFromCharData(w),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[S.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(w[S.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(w[S.CHAR_DATA_CHAR_INDEX].length===2){const c=w[S.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){const l=w[S.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(c-55296)+l-56320+65536|w[S.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=w[S.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[S.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=w[S.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[S.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=g},643:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;const d=u(8460),S=u(844);class f{get id(){return this._id}constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,S.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}s.Marker=f,f._nextId=1},7116:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},s.CHARSETS.A={"#":""},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},s.CHARSETS.C=s.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},s.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.E=s.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},s.CHARSETS.H=s.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},s.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(p,s)=>{var u,d,S;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(u||(s.C0=u={})),function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""}(d||(s.C1=d={})),function(f){f.ST=`${u.ESC}\\`}(S||(s.C1_ESCAPED=S={}))},7399:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;const d=u(2584),S={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(f,g,C,w){const y={type:0,cancel:!1,key:void 0},c=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?y.key=g?d.C0.ESC+"OA":d.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?y.key=g?d.C0.ESC+"OD":d.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?y.key=g?d.C0.ESC+"OC":d.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(y.key=g?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(f.altKey){y.key=d.C0.ESC+d.C0.DEL;break}y.key=d.C0.DEL;break;case 9:if(f.shiftKey){y.key=d.C0.ESC+"[Z";break}y.key=d.C0.HT,y.cancel=!0;break;case 13:y.key=f.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,y.cancel=!0;break;case 27:y.key=d.C0.ESC,f.altKey&&(y.key=d.C0.ESC+d.C0.ESC),y.cancel=!0;break;case 37:if(f.metaKey)break;c?(y.key=d.C0.ESC+"[1;"+(c+1)+"D",y.key===d.C0.ESC+"[1;3D"&&(y.key=d.C0.ESC+(C?"b":"[1;5D"))):y.key=g?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(f.metaKey)break;c?(y.key=d.C0.ESC+"[1;"+(c+1)+"C",y.key===d.C0.ESC+"[1;3C"&&(y.key=d.C0.ESC+(C?"f":"[1;5C"))):y.key=g?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(f.metaKey)break;c?(y.key=d.C0.ESC+"[1;"+(c+1)+"A",C||y.key!==d.C0.ESC+"[1;3A"||(y.key=d.C0.ESC+"[1;5A")):y.key=g?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(f.metaKey)break;c?(y.key=d.C0.ESC+"[1;"+(c+1)+"B",C||y.key!==d.C0.ESC+"[1;3B"||(y.key=d.C0.ESC+"[1;5B")):y.key=g?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(y.key=d.C0.ESC+"[2~");break;case 46:y.key=c?d.C0.ESC+"[3;"+(c+1)+"~":d.C0.ESC+"[3~";break;case 36:y.key=c?d.C0.ESC+"[1;"+(c+1)+"H":g?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:y.key=c?d.C0.ESC+"[1;"+(c+1)+"F":g?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:f.shiftKey?y.type=2:f.ctrlKey?y.key=d.C0.ESC+"[5;"+(c+1)+"~":y.key=d.C0.ESC+"[5~";break;case 34:f.shiftKey?y.type=3:f.ctrlKey?y.key=d.C0.ESC+"[6;"+(c+1)+"~":y.key=d.C0.ESC+"[6~";break;case 112:y.key=c?d.C0.ESC+"[1;"+(c+1)+"P":d.C0.ESC+"OP";break;case 113:y.key=c?d.C0.ESC+"[1;"+(c+1)+"Q":d.C0.ESC+"OQ";break;case 114:y.key=c?d.C0.ESC+"[1;"+(c+1)+"R":d.C0.ESC+"OR";break;case 115:y.key=c?d.C0.ESC+"[1;"+(c+1)+"S":d.C0.ESC+"OS";break;case 116:y.key=c?d.C0.ESC+"[15;"+(c+1)+"~":d.C0.ESC+"[15~";break;case 117:y.key=c?d.C0.ESC+"[17;"+(c+1)+"~":d.C0.ESC+"[17~";break;case 118:y.key=c?d.C0.ESC+"[18;"+(c+1)+"~":d.C0.ESC+"[18~";break;case 119:y.key=c?d.C0.ESC+"[19;"+(c+1)+"~":d.C0.ESC+"[19~";break;case 120:y.key=c?d.C0.ESC+"[20;"+(c+1)+"~":d.C0.ESC+"[20~";break;case 121:y.key=c?d.C0.ESC+"[21;"+(c+1)+"~":d.C0.ESC+"[21~";break;case 122:y.key=c?d.C0.ESC+"[23;"+(c+1)+"~":d.C0.ESC+"[23~";break;case 123:y.key=c?d.C0.ESC+"[24;"+(c+1)+"~":d.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(C&&!w||!f.altKey||f.metaKey)!C||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?y.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(y.key=d.C0.US),f.key==="@"&&(y.key=d.C0.NUL)):f.keyCode===65&&(y.type=1);else{const l=S[f.keyCode],n=l==null?void 0:l[f.shiftKey?1:0];if(n)y.key=d.C0.ESC+n;else if(f.keyCode>=65&&f.keyCode<=90){const a=f.ctrlKey?f.keyCode-64:f.keyCode+32;let _=String.fromCharCode(a);f.shiftKey&&(_=_.toUpperCase()),y.key=d.C0.ESC+_}else if(f.keyCode===32)y.key=d.C0.ESC+(f.ctrlKey?d.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let a=f.code.slice(3,4);f.shiftKey||(a=a.toLowerCase()),y.key=d.C0.ESC+a,y.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?y.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?y.key=d.C0.NUL:f.keyCode>=51&&f.keyCode<=55?y.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?y.key=d.C0.DEL:f.keyCode===219?y.key=d.C0.ESC:f.keyCode===220?y.key=d.C0.FS:f.keyCode===221&&(y.key=d.C0.GS)}return y}},482:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(u){return u>65535?(u-=65536,String.fromCharCode(55296+(u>>10))+String.fromCharCode(u%1024+56320)):String.fromCharCode(u)},s.utf32ToString=function(u,d=0,S=u.length){let f="";for(let g=d;g<S;++g){let C=u[g];C>65535?(C-=65536,f+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):f+=String.fromCharCode(C)}return f},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(u,d){const S=u.length;if(!S)return 0;let f=0,g=0;if(this._interim){const C=u.charCodeAt(g++);56320<=C&&C<=57343?d[f++]=1024*(this._interim-55296)+C-56320+65536:(d[f++]=this._interim,d[f++]=C),this._interim=0}for(let C=g;C<S;++C){const w=u.charCodeAt(C);if(55296<=w&&w<=56319){if(++C>=S)return this._interim=w,f;const y=u.charCodeAt(C);56320<=y&&y<=57343?d[f++]=1024*(w-55296)+y-56320+65536:(d[f++]=w,d[f++]=y)}else w!==65279&&(d[f++]=w)}return f}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(u,d){const S=u.length;if(!S)return 0;let f,g,C,w,y=0,c=0,l=0;if(this.interim[0]){let _=!1,m=this.interim[0];m&=(224&m)==192?31:(240&m)==224?15:7;let x,b=0;for(;(x=63&this.interim[++b])&&b<4;)m<<=6,m|=x;const v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=v-b;for(;l<k;){if(l>=S)return 0;if(x=u[l++],(192&x)!=128){l--,_=!0;break}this.interim[b++]=x,m<<=6,m|=63&x}_||(v===2?m<128?l--:d[y++]=m:v===3?m<2048||m>=55296&&m<=57343||m===65279||(d[y++]=m):m<65536||m>1114111||(d[y++]=m)),this.interim.fill(0)}const n=S-4;let a=l;for(;a<S;){for(;!(!(a<n)||128&(f=u[a])||128&(g=u[a+1])||128&(C=u[a+2])||128&(w=u[a+3]));)d[y++]=f,d[y++]=g,d[y++]=C,d[y++]=w,a+=4;if(f=u[a++],f<128)d[y++]=f;else if((224&f)==192){if(a>=S)return this.interim[0]=f,y;if(g=u[a++],(192&g)!=128){a--;continue}if(c=(31&f)<<6|63&g,c<128){a--;continue}d[y++]=c}else if((240&f)==224){if(a>=S)return this.interim[0]=f,y;if(g=u[a++],(192&g)!=128){a--;continue}if(a>=S)return this.interim[0]=f,this.interim[1]=g,y;if(C=u[a++],(192&C)!=128){a--;continue}if(c=(15&f)<<12|(63&g)<<6|63&C,c<2048||c>=55296&&c<=57343||c===65279)continue;d[y++]=c}else if((248&f)==240){if(a>=S)return this.interim[0]=f,y;if(g=u[a++],(192&g)!=128){a--;continue}if(a>=S)return this.interim[0]=f,this.interim[1]=g,y;if(C=u[a++],(192&C)!=128){a--;continue}if(a>=S)return this.interim[0]=f,this.interim[1]=g,this.interim[2]=C,y;if(w=u[a++],(192&w)!=128){a--;continue}if(c=(7&f)<<18|(63&g)<<12|(63&C)<<6|63&w,c<65536||c>1114111)continue;d[y++]=c}}return y}}},225:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;const u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let S;s.UnicodeV6=class{constructor(){if(this.version="6",!S){S=new Uint8Array(65536),S.fill(1),S[0]=0,S.fill(0,1,32),S.fill(0,127,160),S.fill(2,4352,4448),S[9001]=2,S[9002]=2,S.fill(2,11904,42192),S[12351]=1,S.fill(2,44032,55204),S.fill(2,63744,64256),S.fill(2,65040,65050),S.fill(2,65072,65136),S.fill(2,65280,65377),S.fill(2,65504,65511);for(let f=0;f<u.length;++f)S.fill(0,u[f][0],u[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?S[f]:function(g,C){let w,y=0,c=C.length-1;if(g<C[0][0]||g>C[c][1])return!1;for(;c>=y;)if(w=y+c>>1,g>C[w][1])y=w+1;else{if(!(g<C[w][0]))return!0;c=w-1}return!1}(f,d)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;const d=u(8460),S=u(844);class f extends S.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);const c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(w)}_innerWrite(C=0,w=!0){const y=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const c=this._writeBuffer[this._bufferOffset],l=this._action(c,w);if(l){const a=_=>Date.now()-y>=12?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(y,_);return void l.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(a)}const n=this._callbacks[this._bufferOffset];if(n&&n(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=f},5941:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;const u=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function S(f,g){const C=f.toString(16),w=C.length<2?"0"+C:C;switch(g){case 4:return C[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}s.parseColor=function(f){if(!f)return;let g=f.toLowerCase();if(g.indexOf("rgb:")===0){g=g.slice(4);const C=u.exec(g);if(C){const w=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/w*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/w*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/w*255)]}}else if(g.indexOf("#")===0&&(g=g.slice(1),d.exec(g)&&[3,6,9,12].includes(g.length))){const C=g.length/3,w=[0,0,0];for(let y=0;y<3;++y){const c=parseInt(g.slice(C*y,C*y+C),16);w[y]=C===1?c<<4:C===2?c:C===3?c>>4:c>>8}return w}},s.toRgbString=function(f,g=16){const[C,w,y]=f;return`rgb:${S(C,g)}/${S(w,g)}/${S(y,g)}`}},5770:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;const d=u(482),S=u(8742),f=u(5770),g=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}registerHandler(w,y){this._handlers[w]===void 0&&(this._handlers[w]=[]);const c=this._handlers[w];return c.push(y),{dispose:()=>{const l=c.indexOf(y);l!==-1&&c.splice(l,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=g,this._ident=0}hook(w,y){if(this.reset(),this._ident=w,this._active=this._handlers[w]||g,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(w,y,c){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(w,y,c);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(w,y,c))}unhook(w,y=!0){if(this._active.length){let c=!1,l=this._active.length-1,n=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,c=y,n=this._stack.fallThrough,this._stack.paused=!1),!n&&c===!1){for(;l>=0&&(c=this._active[l].unhook(w),c!==!0);l--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,c;l--}for(;l>=0;l--)if(c=this._active[l].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",w);this._active=g,this._ident=0}};const C=new S.Params;C.addParam(0),s.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=C,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():C,this._data="",this._hitLimit=!1}put(w,y,c){this._hitLimit||(this._data+=(0,d.utf32ToString)(w,y,c),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let y=!1;if(this._hitLimit)y=!1;else if(w&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then(c=>(this._params=C,this._data="",this._hitLimit=!1,c));return this._params=C,this._data="",this._hitLimit=!1,y}}},2015:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;const d=u(844),S=u(8742),f=u(6242),g=u(6351);class C{constructor(l){this.table=new Uint8Array(l)}setDefault(l,n){this.table.fill(l<<4|n)}add(l,n,a,_){this.table[n<<8|l]=a<<4|_}addMany(l,n,a,_){for(let m=0;m<l.length;m++)this.table[n<<8|l[m]]=a<<4|_}}s.TransitionTable=C;const w=160;s.VT500_TRANSITION_TABLE=function(){const c=new C(4095),l=Array.apply(null,Array(256)).map((b,v)=>v),n=(b,v)=>l.slice(b,v),a=n(32,127),_=n(0,24);_.push(25),_.push.apply(_,n(28,32));const m=n(0,14);let x;for(x in c.setDefault(1,0),c.addMany(a,0,2,0),m)c.addMany([24,26,153,154],x,3,0),c.addMany(n(128,144),x,3,0),c.addMany(n(144,152),x,3,0),c.add(156,x,0,0),c.add(27,x,11,1),c.add(157,x,4,8),c.addMany([152,158,159],x,0,7),c.add(155,x,11,3),c.add(144,x,11,9);return c.addMany(_,0,3,0),c.addMany(_,1,3,1),c.add(127,1,0,1),c.addMany(_,8,0,8),c.addMany(_,3,3,3),c.add(127,3,0,3),c.addMany(_,4,3,4),c.add(127,4,0,4),c.addMany(_,6,3,6),c.addMany(_,5,3,5),c.add(127,5,0,5),c.addMany(_,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(a,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(n(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(a,7,0,7),c.addMany(_,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(n(64,127),3,7,0),c.addMany(n(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(n(48,60),4,8,4),c.addMany(n(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(n(32,64),6,0,6),c.add(127,6,0,6),c.addMany(n(64,127),6,0,0),c.addMany(n(32,48),3,9,5),c.addMany(n(32,48),5,9,5),c.addMany(n(48,64),5,0,6),c.addMany(n(64,127),5,7,0),c.addMany(n(32,48),4,9,5),c.addMany(n(32,48),1,9,2),c.addMany(n(32,48),2,9,2),c.addMany(n(48,127),2,10,0),c.addMany(n(48,80),1,10,0),c.addMany(n(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(n(96,127),1,10,0),c.add(80,1,11,9),c.addMany(_,9,0,9),c.add(127,9,0,9),c.addMany(n(28,32),9,0,9),c.addMany(n(32,48),9,9,12),c.addMany(n(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(_,11,0,11),c.addMany(n(32,128),11,0,11),c.addMany(n(28,32),11,0,11),c.addMany(_,10,0,10),c.add(127,10,0,10),c.addMany(n(28,32),10,0,10),c.addMany(n(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(n(32,48),10,9,12),c.addMany(_,12,0,12),c.add(127,12,0,12),c.addMany(n(28,32),12,0,12),c.addMany(n(32,48),12,9,12),c.addMany(n(48,64),12,0,11),c.addMany(n(64,127),12,12,13),c.addMany(n(64,127),10,12,13),c.addMany(n(64,127),9,12,13),c.addMany(_,13,13,13),c.addMany(a,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(w,0,2,0),c.add(w,8,5,8),c.add(w,6,0,6),c.add(w,11,0,11),c.add(w,13,13,13),c}();class y extends d.Disposable{constructor(l=s.VT500_TRANSITION_TABLE){super(),this._transitions=l,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new S.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(n,a,_)=>{},this._executeHandlerFb=n=>{},this._csiHandlerFb=(n,a)=>{},this._escHandlerFb=n=>{},this._errorHandlerFb=n=>n,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new g.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(l,n=[64,126]){let a=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if(a=l.prefix.charCodeAt(0),a&&60>a||a>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let m=0;m<l.intermediates.length;++m){const x=l.intermediates.charCodeAt(m);if(32>x||x>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");a<<=8,a|=x}}if(l.final.length!==1)throw new Error("final must be a single byte");const _=l.final.charCodeAt(0);if(n[0]>_||_>n[1])throw new Error(`final must be in range ${n[0]} .. ${n[1]}`);return a<<=8,a|=_,a}identToString(l){const n=[];for(;l;)n.push(String.fromCharCode(255&l)),l>>=8;return n.reverse().join("")}setPrintHandler(l){this._printHandler=l}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(l,n){const a=this._identifier(l,[48,126]);this._escHandlers[a]===void 0&&(this._escHandlers[a]=[]);const _=this._escHandlers[a];return _.push(n),{dispose:()=>{const m=_.indexOf(n);m!==-1&&_.splice(m,1)}}}clearEscHandler(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]}setEscHandlerFallback(l){this._escHandlerFb=l}setExecuteHandler(l,n){this._executeHandlers[l.charCodeAt(0)]=n}clearExecuteHandler(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]}setExecuteHandlerFallback(l){this._executeHandlerFb=l}registerCsiHandler(l,n){const a=this._identifier(l);this._csiHandlers[a]===void 0&&(this._csiHandlers[a]=[]);const _=this._csiHandlers[a];return _.push(n),{dispose:()=>{const m=_.indexOf(n);m!==-1&&_.splice(m,1)}}}clearCsiHandler(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]}setCsiHandlerFallback(l){this._csiHandlerFb=l}registerDcsHandler(l,n){return this._dcsParser.registerHandler(this._identifier(l),n)}clearDcsHandler(l){this._dcsParser.clearHandler(this._identifier(l))}setDcsHandlerFallback(l){this._dcsParser.setHandlerFallback(l)}registerOscHandler(l,n){return this._oscParser.registerHandler(l,n)}clearOscHandler(l){this._oscParser.clearHandler(l)}setOscHandlerFallback(l){this._oscParser.setHandlerFallback(l)}setErrorHandler(l){this._errorHandler=l}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(l,n,a,_,m){this._parseStack.state=l,this._parseStack.handlers=n,this._parseStack.handlerPos=a,this._parseStack.transition=_,this._parseStack.chunkPos=m}parse(l,n,a){let _,m=0,x=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(a===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const v=this._parseStack.handlers;let k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(a===!1&&k>-1){for(;k>=0&&(_=v[k](this._params),_!==!0);k--)if(_ instanceof Promise)return this._parseStack.handlerPos=k,_}this._parseStack.handlers=[];break;case 4:if(a===!1&&k>-1){for(;k>=0&&(_=v[k](),_!==!0);k--)if(_ instanceof Promise)return this._parseStack.handlerPos=k,_}this._parseStack.handlers=[];break;case 6:if(m=l[this._parseStack.chunkPos],_=this._dcsParser.unhook(m!==24&&m!==26,a),_)return _;m===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(m=l[this._parseStack.chunkPos],_=this._oscParser.end(m!==24&&m!==26,a),_)return _;m===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let v=b;v<n;++v){switch(m=l[v],x=this._transitions.table[this.currentState<<8|(m<160?m:w)],x>>4){case 2:for(let B=v+1;;++B){if(B>=n||(m=l[B])<32||m>126&&m<w){this._printHandler(l,v,B),v=B-1;break}if(++B>=n||(m=l[B])<32||m>126&&m<w){this._printHandler(l,v,B),v=B-1;break}if(++B>=n||(m=l[B])<32||m>126&&m<w){this._printHandler(l,v,B),v=B-1;break}if(++B>=n||(m=l[B])<32||m>126&&m<w){this._printHandler(l,v,B),v=B-1;break}}break;case 3:this._executeHandlers[m]?this._executeHandlers[m]():this._executeHandlerFb(m),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:m,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const k=this._csiHandlers[this._collect<<8|m];let D=k?k.length-1:-1;for(;D>=0&&(_=k[D](this._params),_!==!0);D--)if(_ instanceof Promise)return this._preserveStack(3,k,D,x,v),_;D<0&&this._csiHandlerFb(this._collect<<8|m,this._params),this.precedingCodepoint=0;break;case 8:do switch(m){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(m-48)}while(++v<n&&(m=l[v])>47&&m<60);v--;break;case 9:this._collect<<=8,this._collect|=m;break;case 10:const R=this._escHandlers[this._collect<<8|m];let T=R?R.length-1:-1;for(;T>=0&&(_=R[T](),_!==!0);T--)if(_ instanceof Promise)return this._preserveStack(4,R,T,x,v),_;T<0&&this._escHandlerFb(this._collect<<8|m),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|m,this._params);break;case 13:for(let B=v+1;;++B)if(B>=n||(m=l[B])===24||m===26||m===27||m>127&&m<w){this._dcsParser.put(l,v,B),v=B-1;break}break;case 14:if(_=this._dcsParser.unhook(m!==24&&m!==26),_)return this._preserveStack(6,[],0,x,v),_;m===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let B=v+1;;B++)if(B>=n||(m=l[B])<32||m>127&&m<w){this._oscParser.put(l,v,B),v=B-1;break}break;case 6:if(_=this._oscParser.end(m!==24&&m!==26),_)return this._preserveStack(5,[],0,x,v),_;m===27&&(x|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&x}}}s.EscapeSequenceParser=y},6242:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;const d=u(5770),S=u(482),f=[];s.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(g,C){this._handlers[g]===void 0&&(this._handlers[g]=[]);const w=this._handlers[g];return w.push(C),{dispose:()=>{const y=w.indexOf(C);y!==-1&&w.splice(y,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].start();else this._handlerFb(this._id,"START")}_put(g,C,w){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(g,C,w);else this._handlerFb(this._id,"PUT",(0,S.utf32ToString)(g,C,w))}start(){this.reset(),this._state=1}put(g,C,w){if(this._state!==3){if(this._state===1)for(;C<w;){const y=g[C++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&w-C>0&&this._put(g,C,w)}}end(g,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,y=this._active.length-1,c=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,w=C,c=this._stack.fallThrough,this._stack.paused=!1),!c&&w===!1){for(;y>=0&&(w=this._active[y].end(g),w!==!0);y--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,w;y--}for(;y>=0;y--)if(w=this._active[y].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",g);this._active=f,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(g){this._handler=g,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(g,C,w){this._hitLimit||(this._data+=(0,S.utf32ToString)(g,C,w),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(g){let C=!1;if(this._hitLimit)C=!1;else if(g&&(C=this._handler(this._data),C instanceof Promise))return C.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,C}}},8742:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;const u=2147483647;class d{static fromArray(f){const g=new d;if(!f.length)return g;for(let C=Array.isArray(f[0])?1:0;C<f.length;++C){const w=f[C];if(Array.isArray(w))for(let y=0;y<w.length;++y)g.addSubParam(w[y]);else g.addParam(w)}return g}constructor(f=32,g=32){if(this.maxLength=f,this.maxSubParamsLength=g,g>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(g),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new d(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let g=0;g<this.length;++g){f.push(this.params[g]);const C=this._subParamsIdx[g]>>8,w=255&this._subParamsIdx[g];w-C>0&&f.push(Array.prototype.slice.call(this._subParams,C,w))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>u?u:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>u?u:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const g=this._subParamsIdx[f]>>8,C=255&this._subParamsIdx[f];return C-g>0?this._subParams.subarray(g,C):null}getSubParamsAll(){const f={};for(let g=0;g<this.length;++g){const C=this._subParamsIdx[g]>>8,w=255&this._subParamsIdx[g];w-C>0&&(f[g]=this._subParams.slice(C,w))}return f}addDigit(f){let g;if(this._rejectDigits||!(g=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,w=C[g-1];C[g-1]=~w?Math.min(10*w+f,u):f}}s.Params=d},5741:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let u=this._addons.length-1;u>=0;u--)this._addons[u].instance.dispose()}loadAddon(u,d){const S={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(S),d.dispose=()=>this._wrappedAddonDispose(S),d.activate(u)}_wrappedAddonDispose(u){if(u.isDisposed)return;let d=-1;for(let S=0;S<this._addons.length;S++)if(this._addons[S]===u){d=S;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");u.isDisposed=!0,u.dispose.apply(u.instance),this._addons.splice(d,1)}}},8771:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;const d=u(3785),S=u(511);s.BufferApiView=class{constructor(f,g){this._buffer=f,this.type=g}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const g=this._buffer.lines.get(f);if(g)return new d.BufferLineApiView(g)}getNullCell(){return new S.CellData}}},3785:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;const d=u(511);s.BufferLineApiView=class{constructor(S){this._line=S}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(S,f){if(!(S<0||S>=this._line.length))return f?(this._line.loadCell(S,f),f):this._line.loadCell(S,new d.CellData)}translateToString(S,f,g){return this._line.translateToString(S,f,g)}}},8285:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;const d=u(8771),S=u(8460),f=u(844);class g extends f.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new S.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=g},7975:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(u){this._core=u}registerCsiHandler(u,d){return this._core.registerCsiHandler(u,S=>d(S.toArray()))}addCsiHandler(u,d){return this.registerCsiHandler(u,d)}registerDcsHandler(u,d){return this._core.registerDcsHandler(u,(S,f)=>d(S,f.toArray()))}addDcsHandler(u,d){return this.registerDcsHandler(u,d)}registerEscHandler(u,d){return this._core.registerEscHandler(u,d)}addEscHandler(u,d){return this.registerEscHandler(u,d)}registerOscHandler(u,d){return this._core.registerOscHandler(u,d)}addOscHandler(u,d){return this.registerOscHandler(u,d)}}},7090:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(u){this._core=u}register(u){this._core.unicodeService.register(u)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(u){this._core.unicodeService.activeVersion=u}}},744:function(p,s,u){var d=this&&this.__decorate||function(c,l,n,a){var _,m=arguments.length,x=m<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,l,n,a);else for(var b=c.length-1;b>=0;b--)(_=c[b])&&(x=(m<3?_(x):m>3?_(l,n,x):_(l,n))||x);return m>3&&x&&Object.defineProperty(l,n,x),x},S=this&&this.__param||function(c,l){return function(n,a){l(n,a,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;const f=u(8460),g=u(844),C=u(5295),w=u(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let y=s.BufferService=class extends g.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new C.BufferSet(c,this))}resize(c,l){this.cols=c,this.rows=l,this.buffers.resize(c,l),this._onResize.fire({cols:c,rows:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,l=!1){const n=this.buffer;let a;a=this._cachedBlankLine,a&&a.length===this.cols&&a.getFg(0)===c.fg&&a.getBg(0)===c.bg||(a=n.getBlankLine(c,l),this._cachedBlankLine=a),a.isWrapped=l;const _=n.ybase+n.scrollTop,m=n.ybase+n.scrollBottom;if(n.scrollTop===0){const x=n.lines.isFull;m===n.lines.length-1?x?n.lines.recycle().copyFrom(a):n.lines.push(a.clone()):n.lines.splice(m+1,0,a.clone()),x?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{const x=m-_+1;n.lines.shiftElements(_+1,x-1,-1),n.lines.set(m,a.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(c,l,n){const a=this.buffer;if(c<0){if(a.ydisp===0)return;this.isUserScrolling=!0}else c+a.ydisp>=a.ybase&&(this.isUserScrolling=!1);const _=a.ydisp;a.ydisp=Math.max(Math.min(a.ydisp+c,a.ybase),0),_!==a.ydisp&&(l||this._onScroll.fire(a.ydisp))}};s.BufferService=y=d([S(0,w.IOptionsService)],y)},7994:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(u){this.glevel=u,this.charset=this._charsets[u]}setgCharset(u,d){this._charsets[u]=d,this.glevel===u&&(this.charset=d)}}},1753:function(p,s,u){var d=this&&this.__decorate||function(a,_,m,x){var b,v=arguments.length,k=v<3?_:x===null?x=Object.getOwnPropertyDescriptor(_,m):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(a,_,m,x);else for(var D=a.length-1;D>=0;D--)(b=a[D])&&(k=(v<3?b(k):v>3?b(_,m,k):b(_,m))||k);return v>3&&k&&Object.defineProperty(_,m,k),k},S=this&&this.__param||function(a,_){return function(m,x){_(m,x,a)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;const f=u(2585),g=u(8460),C=u(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:a=>a.button!==4&&a.action===1&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)},VT200:{events:19,restrict:a=>a.action!==32},DRAG:{events:23,restrict:a=>a.action!==32||a.button!==3},ANY:{events:31,restrict:a=>!0}};function y(a,_){let m=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return a.button===4?(m|=64,m|=a.action):(m|=3&a.button,4&a.button&&(m|=64),8&a.button&&(m|=128),a.action===32?m|=32:a.action!==0||_||(m|=3)),m}const c=String.fromCharCode,l={DEFAULT:a=>{const _=[y(a,!1)+32,a.col+32,a.row+32];return _[0]>255||_[1]>255||_[2]>255?"":`\x1B[M${c(_[0])}${c(_[1])}${c(_[2])}`},SGR:a=>{const _=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${y(a,!0)};${a.col};${a.row}${_}`},SGR_PIXELS:a=>{const _=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${y(a,!0)};${a.x};${a.y}${_}`}};let n=s.CoreMouseService=class extends C.Disposable{constructor(a,_){super(),this._bufferService=a,this._coreService=_,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new g.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const m of Object.keys(w))this.addProtocol(m,w[m]);for(const m of Object.keys(l))this.addEncoding(m,l[m]);this.reset()}addProtocol(a,_){this._protocols[a]=_}addEncoding(a,_){this._encodings[a]=_}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(a){if(!this._protocols[a])throw new Error(`unknown protocol "${a}"`);this._activeProtocol=a,this._onProtocolChange.fire(this._protocols[a].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(a){if(!this._encodings[a])throw new Error(`unknown encoding "${a}"`);this._activeEncoding=a}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(a){if(a.col<0||a.col>=this._bufferService.cols||a.row<0||a.row>=this._bufferService.rows||a.button===4&&a.action===32||a.button===3&&a.action!==32||a.button!==4&&(a.action===2||a.action===3)||(a.col++,a.row++,a.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,a,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(a))return!1;const _=this._encodings[this._activeEncoding](a);return _&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(_):this._coreService.triggerDataEvent(_,!0)),this._lastEvent=a,!0}explainEvents(a){return{down:!!(1&a),up:!!(2&a),drag:!!(4&a),move:!!(8&a),wheel:!!(16&a)}}_equalEvents(a,_,m){if(m){if(a.x!==_.x||a.y!==_.y)return!1}else if(a.col!==_.col||a.row!==_.row)return!1;return a.button===_.button&&a.action===_.action&&a.ctrl===_.ctrl&&a.alt===_.alt&&a.shift===_.shift}};s.CoreMouseService=n=d([S(0,f.IBufferService),S(1,f.ICoreService)],n)},6975:function(p,s,u){var d=this&&this.__decorate||function(n,a,_,m){var x,b=arguments.length,v=b<3?a:m===null?m=Object.getOwnPropertyDescriptor(a,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(n,a,_,m);else for(var k=n.length-1;k>=0;k--)(x=n[k])&&(v=(b<3?x(v):b>3?x(a,_,v):x(a,_))||v);return b>3&&v&&Object.defineProperty(a,_,v),v},S=this&&this.__param||function(n,a){return function(_,m){a(_,m,n)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;const f=u(1439),g=u(8460),C=u(844),w=u(2585),y=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let l=s.CoreService=class extends C.Disposable{constructor(n,a,_){super(),this._bufferService=n,this._logService=a,this._optionsService=_,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new g.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new g.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new g.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new g.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(y),this.decPrivateModes=(0,f.clone)(c)}reset(){this.modes=(0,f.clone)(y),this.decPrivateModes=(0,f.clone)(c)}triggerDataEvent(n,a=!1){if(this._optionsService.rawOptions.disableStdin)return;const _=this._bufferService.buffer;a&&this._optionsService.rawOptions.scrollOnUserInput&&_.ybase!==_.ydisp&&this._onRequestScrollToBottom.fire(),a&&this._onUserInput.fire(),this._logService.debug(`sending data "${n}"`,()=>n.split("").map(m=>m.charCodeAt(0))),this._onData.fire(n)}triggerBinaryEvent(n){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${n}"`,()=>n.split("").map(a=>a.charCodeAt(0))),this._onBinary.fire(n))}};s.CoreService=l=d([S(0,w.IBufferService),S(1,w.ILogService),S(2,w.IOptionsService)],l)},9074:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;const d=u(8055),S=u(8460),f=u(844),g=u(6106);let C=0,w=0;class y extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new g.SortedList(n=>n==null?void 0:n.marker.line),this._onDecorationRegistered=this.register(new S.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new S.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>this.reset()))}registerDecoration(n){if(n.marker.isDisposed)return;const a=new c(n);if(a){const _=a.marker.onDispose(()=>a.dispose());a.onDispose(()=>{a&&(this._decorations.delete(a)&&this._onDecorationRemoved.fire(a),_.dispose())}),this._decorations.insert(a),this._onDecorationRegistered.fire(a)}return a}reset(){for(const n of this._decorations.values())n.dispose();this._decorations.clear()}*getDecorationsAtCell(n,a,_){var m,x,b;let v=0,k=0;for(const D of this._decorations.getKeyIterator(a))v=(m=D.options.x)!==null&&m!==void 0?m:0,k=v+((x=D.options.width)!==null&&x!==void 0?x:1),n>=v&&n<k&&(!_||((b=D.options.layer)!==null&&b!==void 0?b:"bottom")===_)&&(yield D)}forEachDecorationAtCell(n,a,_,m){this._decorations.forEachByKey(a,x=>{var b,v,k;C=(b=x.options.x)!==null&&b!==void 0?b:0,w=C+((v=x.options.width)!==null&&v!==void 0?v:1),n>=C&&n<w&&(!_||((k=x.options.layer)!==null&&k!==void 0?k:"bottom")===_)&&m(x)})}}s.DecorationService=y;class c extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(n){super(),this.options=n,this.onRenderEmitter=this.register(new S.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new S.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=n.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;const d=u(2585),S=u(8343);class f{constructor(...C){this._entries=new Map;for(const[w,y]of C)this.set(w,y)}set(C,w){const y=this._entries.get(C);return this._entries.set(C,w),y}forEach(C){for(const[w,y]of this._entries.entries())C(w,y)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}s.ServiceCollection=f,s.InstantiationService=class{constructor(){this._services=new f,this._services.set(d.IInstantiationService,this)}setService(g,C){this._services.set(g,C)}getService(g){return this._services.get(g)}createInstance(g,...C){const w=(0,S.getServiceDependencies)(g).sort((l,n)=>l.index-n.index),y=[];for(const l of w){const n=this._services.get(l.id);if(!n)throw new Error(`[createInstance] ${g.name} depends on UNKNOWN service ${l.id}.`);y.push(n)}const c=w.length>0?w[0].index:C.length;if(C.length!==c)throw new Error(`[createInstance] First service dependency of ${g.name} at position ${c+1} conflicts with ${C.length} static arguments`);return new g(...C,...y)}}},7866:function(p,s,u){var d=this&&this.__decorate||function(c,l,n,a){var _,m=arguments.length,x=m<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(c,l,n,a);else for(var b=c.length-1;b>=0;b--)(_=c[b])&&(x=(m<3?_(x):m>3?_(l,n,x):_(l,n))||x);return m>3&&x&&Object.defineProperty(l,n,x),x},S=this&&this.__param||function(c,l){return function(n,a){l(n,a,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;const f=u(844),g=u(2585),C={trace:g.LogLevelEnum.TRACE,debug:g.LogLevelEnum.DEBUG,info:g.LogLevelEnum.INFO,warn:g.LogLevelEnum.WARN,error:g.LogLevelEnum.ERROR,off:g.LogLevelEnum.OFF};let w,y=s.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=g.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let l=0;l<c.length;l++)typeof c[l]=="function"&&(c[l]=c[l]())}_log(c,l,n){this._evalLazyOptionalParams(n),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...n)}trace(c,...l){var n,a;this._logLevel<=g.LogLevelEnum.TRACE&&this._log((a=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.trace.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.log,c,l)}debug(c,...l){var n,a;this._logLevel<=g.LogLevelEnum.DEBUG&&this._log((a=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.debug.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.log,c,l)}info(c,...l){var n,a;this._logLevel<=g.LogLevelEnum.INFO&&this._log((a=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.info.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.info,c,l)}warn(c,...l){var n,a;this._logLevel<=g.LogLevelEnum.WARN&&this._log((a=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.warn.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.warn,c,l)}error(c,...l){var n,a;this._logLevel<=g.LogLevelEnum.ERROR&&this._log((a=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.error.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.error,c,l)}};s.LogService=y=d([S(0,g.IOptionsService)],y),s.setTraceLogger=function(c){w=c},s.traceCall=function(c,l,n){if(typeof n.value!="function")throw new Error("not supported");const a=n.value;n.value=function(..._){if(w.logLevel!==g.LogLevelEnum.TRACE)return a.apply(this,_);w.trace(`GlyphRenderer#${a.name}(${_.map(x=>JSON.stringify(x)).join(", ")})`);const m=a.apply(this,_);return w.trace(`GlyphRenderer#${a.name} return`,m),m}}},7302:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;const d=u(8460),S=u(844),f=u(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const g=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends S.Disposable{constructor(y){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const c=Object.assign({},s.DEFAULT_OPTIONS);for(const l in y)if(l in c)try{const n=y[l];c[l]=this._sanitizeAndValidateOption(l,n)}catch(n){console.error(n)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(y,c){return this.onOptionChange(l=>{l===y&&c(this.rawOptions[y])})}onMultipleOptionChange(y,c){return this.onOptionChange(l=>{y.indexOf(l)!==-1&&c()})}_setupOptions(){const y=l=>{if(!(l in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);return this.rawOptions[l]},c=(l,n)=>{if(!(l in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);n=this._sanitizeAndValidateOption(l,n),this.rawOptions[l]!==n&&(this.rawOptions[l]=n,this._onOptionChange.fire(l))};for(const l in this.rawOptions){const n={get:y.bind(this,l),set:c.bind(this,l)};Object.defineProperty(this.options,l,n)}}_sanitizeAndValidateOption(y,c){switch(y){case"cursorStyle":if(c||(c=s.DEFAULT_OPTIONS[y]),!function(l){return l==="block"||l==="underline"||l==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${y}`);break;case"wordSeparator":c||(c=s.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=g.includes(c)?c:s.DEFAULT_OPTIONS[y];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${y} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${y} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}s.OptionsService=C},2660:function(p,s,u){var d=this&&this.__decorate||function(C,w,y,c){var l,n=arguments.length,a=n<3?w:c===null?c=Object.getOwnPropertyDescriptor(w,y):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(C,w,y,c);else for(var _=C.length-1;_>=0;_--)(l=C[_])&&(a=(n<3?l(a):n>3?l(w,y,a):l(w,y))||a);return n>3&&a&&Object.defineProperty(w,y,a),a},S=this&&this.__param||function(C,w){return function(y,c){w(y,c,C)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;const f=u(2585);let g=s.OscLinkService=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const w=this._bufferService.buffer;if(C.id===void 0){const _=w.addMarker(w.ybase+w.y),m={data:C,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(m,_)),this._dataByLinkId.set(m.id,m),m.id}const y=C,c=this._getEntryIdKey(y),l=this._entriesWithId.get(c);if(l)return this.addLineToLink(l.id,w.ybase+w.y),l.id;const n=w.addMarker(w.ybase+w.y),a={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[n]};return n.onDispose(()=>this._removeMarkerFromLink(a,n)),this._entriesWithId.set(a.key,a),this._dataByLinkId.set(a.id,a),a.id}addLineToLink(C,w){const y=this._dataByLinkId.get(C);if(y&&y.lines.every(c=>c.line!==w)){const c=this._bufferService.buffer.addMarker(w);y.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(y,c))}}getLinkData(C){var w;return(w=this._dataByLinkId.get(C))===null||w===void 0?void 0:w.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,w){const y=C.lines.indexOf(w);y!==-1&&(C.lines.splice(y,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};s.OscLinkService=g=d([S(0,f.IBufferService)],g)},8343:(p,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;const u="di$target",d="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(S){return S[d]||[]},s.createDecorator=function(S){if(s.serviceRegistry.has(S))return s.serviceRegistry.get(S);const f=function(g,C,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,c,l){c[u]===c?c[d].push({id:y,index:l}):(c[d]=[{id:y,index:l}],c[u]=c)})(f,g,w)};return f.toString=()=>S,s.serviceRegistry.set(S,f),f}},2585:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;const d=u(8343);var S;s.IBufferService=(0,d.createDecorator)("BufferService"),s.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),s.ICoreService=(0,d.createDecorator)("CoreService"),s.ICharsetService=(0,d.createDecorator)("CharsetService"),s.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"}(S||(s.LogLevelEnum=S={})),s.ILogService=(0,d.createDecorator)("LogService"),s.IOptionsService=(0,d.createDecorator)("OptionsService"),s.IOscLinkService=(0,d.createDecorator)("OscLinkService"),s.IUnicodeService=(0,d.createDecorator)("UnicodeService"),s.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(p,s,u)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;const d=u(8460),S=u(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const f=new S.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let g=0;const C=f.length;for(let w=0;w<C;++w){let y=f.charCodeAt(w);if(55296<=y&&y<=56319){if(++w>=C)return g+this.wcwidth(y);const c=f.charCodeAt(w);56320<=c&&c<=57343?y=1024*(y-55296)+c-56320+65536:g+=this.wcwidth(c)}g+=this.wcwidth(y)}return g}}}},i={};function o(p){var s=i[p];if(s!==void 0)return s.exports;var u=i[p]={exports:{}};return r[p].call(u.exports,u,u.exports,o),u.exports}var h={};return(()=>{var p=h;Object.defineProperty(p,"__esModule",{value:!0}),p.Terminal=void 0;const s=o(9042),u=o(3236),d=o(844),S=o(5741),f=o(8285),g=o(7975),C=o(7090),w=["cols","rows"];class y extends d.Disposable{constructor(l){super(),this._core=this.register(new u.Terminal(l)),this._addonManager=this.register(new S.AddonManager),this._publicOptions=Object.assign({},this._core.options);const n=_=>this._core.options[_],a=(_,m)=>{this._checkReadonlyOptions(_),this._core.options[_]=m};for(const _ in this._core.options){const m={get:n.bind(this,_),set:a.bind(this,_)};Object.defineProperty(this._publicOptions,_,m)}}_checkReadonlyOptions(l){if(w.includes(l))throw new Error(`Option "${l}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new g.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new C.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const l=this._core.coreService.decPrivateModes;let n="none";switch(this._core.coreMouseService.activeProtocol){case"X10":n="x10";break;case"VT200":n="vt200";break;case"DRAG":n="drag";break;case"ANY":n="any"}return{applicationCursorKeysMode:l.applicationCursorKeys,applicationKeypadMode:l.applicationKeypad,bracketedPasteMode:l.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:n,originMode:l.origin,reverseWraparoundMode:l.reverseWraparound,sendFocusMode:l.sendFocus,wraparoundMode:l.wraparound}}get options(){return this._publicOptions}set options(l){for(const n in l)this._publicOptions[n]=l[n]}blur(){this._core.blur()}focus(){this._core.focus()}resize(l,n){this._verifyIntegers(l,n),this._core.resize(l,n)}open(l){this._core.open(l)}attachCustomKeyEventHandler(l){this._core.attachCustomKeyEventHandler(l)}registerLinkProvider(l){return this._core.registerLinkProvider(l)}registerCharacterJoiner(l){return this._checkProposedApi(),this._core.registerCharacterJoiner(l)}deregisterCharacterJoiner(l){this._checkProposedApi(),this._core.deregisterCharacterJoiner(l)}registerMarker(l=0){return this._verifyIntegers(l),this._core.registerMarker(l)}registerDecoration(l){var n,a,_;return this._checkProposedApi(),this._verifyPositiveIntegers((n=l.x)!==null&&n!==void 0?n:0,(a=l.width)!==null&&a!==void 0?a:0,(_=l.height)!==null&&_!==void 0?_:0),this._core.registerDecoration(l)}hasSelection(){return this._core.hasSelection()}select(l,n,a){this._verifyIntegers(l,n,a),this._core.select(l,n,a)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(l,n){this._verifyIntegers(l,n),this._core.selectLines(l,n)}dispose(){super.dispose()}scrollLines(l){this._verifyIntegers(l),this._core.scrollLines(l)}scrollPages(l){this._verifyIntegers(l),this._core.scrollPages(l)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(l){this._verifyIntegers(l),this._core.scrollToLine(l)}clear(){this._core.clear()}write(l,n){this._core.write(l,n)}writeln(l,n){this._core.write(l),this._core.write(`\r
`,n)}paste(l){this._core.paste(l)}refresh(l,n){this._verifyIntegers(l,n),this._core.refresh(l,n)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(l){this._addonManager.loadAddon(this,l)}static get strings(){return s}_verifyIntegers(...l){for(const n of l)if(n===1/0||isNaN(n)||n%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...l){for(const n of l)if(n&&(n===1/0||isNaN(n)||n%1!=0||n<0))throw new Error("This API only accepts positive integers")}}p.Terminal=y})(),h})())})(Ju);var jf=Ju.exports,eh={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(o){this._terminal=o}dispose(){}fit(){const o=this.proposeDimensions();if(!o||!this._terminal||isNaN(o.cols)||isNaN(o.rows))return;const h=this._terminal._core;this._terminal.rows===o.rows&&this._terminal.cols===o.cols||(h._renderService.clear(),this._terminal.resize(o.cols,o.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const o=this._terminal._core,h=o._renderService.dimensions;if(h.css.cell.width===0||h.css.cell.height===0)return;const p=this._terminal.options.scrollback===0?0:o.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),u=parseInt(s.getPropertyValue("height")),d=Math.max(0,parseInt(s.getPropertyValue("width"))),S=window.getComputedStyle(this._terminal.element),f=u-(parseInt(S.getPropertyValue("padding-top"))+parseInt(S.getPropertyValue("padding-bottom"))),g=d-(parseInt(S.getPropertyValue("padding-right"))+parseInt(S.getPropertyValue("padding-left")))-p;return{cols:Math.max(2,Math.floor(g/h.css.cell.width)),rows:Math.max(1,Math.floor(f/h.css.cell.height))}}}})(),r})())})(eh);var Hf=eh.exports;const Ff={},La=e=>{let t;const r=new Set,i=(S,f)=>{const g=typeof S=="function"?S(t):S;if(!Object.is(g,t)){const C=t;t=f??(typeof g!="object"||g===null)?g:Object.assign({},t,g),r.forEach(w=>w(t,C))}},o=()=>t,u={setState:i,getState:o,getInitialState:()=>d,subscribe:S=>(r.add(S),()=>r.delete(S)),destroy:()=>{(Ff?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=t=e(i,o,u);return u},$f=e=>e?La(e):La;var th={exports:{}},rh={},ih={exports:{}},sh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pr=fe;function zf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wf=typeof Object.is=="function"?Object.is:zf,Uf=Pr.useState,Vf=Pr.useEffect,Kf=Pr.useLayoutEffect,Gf=Pr.useDebugValue;function qf(e,t){var r=t(),i=Uf({inst:{value:r,getSnapshot:t}}),o=i[0].inst,h=i[1];return Kf(function(){o.value=r,o.getSnapshot=t,En(o)&&h({inst:o})},[e,r,t]),Vf(function(){return En(o)&&h({inst:o}),e(function(){En(o)&&h({inst:o})})},[e]),Gf(r),r}function En(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Wf(e,r)}catch{return!0}}function Xf(e,t){return t()}var Qf=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Xf:qf;sh.useSyncExternalStore=Pr.useSyncExternalStore!==void 0?Pr.useSyncExternalStore:Qf;ih.exports=sh;var Yf=ih.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gs=fe,Jf=Yf;function Zf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ep=typeof Object.is=="function"?Object.is:Zf,tp=Jf.useSyncExternalStore,rp=Gs.useRef,ip=Gs.useEffect,sp=Gs.useMemo,np=Gs.useDebugValue;rh.useSyncExternalStoreWithSelector=function(e,t,r,i,o){var h=rp(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=sp(function(){function u(C){if(!d){if(d=!0,S=C,C=i(C),o!==void 0&&p.hasValue){var w=p.value;if(o(w,C))return f=w}return f=C}if(w=f,ep(S,C))return w;var y=i(C);return o!==void 0&&o(w,y)?(S=C,w):(S=C,f=y)}var d=!1,S,f,g=r===void 0?null:r;return[function(){return u(t())},g===null?void 0:function(){return u(g())}]},[t,r,i,o]);var s=tp(e,h[0],h[1]);return ip(function(){p.hasValue=!0,p.value=s},[s]),np(s),s};th.exports=rh;var op=th.exports;const lp=Ha(op),nh={},{useDebugValue:ap}=bh,{useSyncExternalStoreWithSelector:cp}=lp;let Ra=!1;const up=e=>e;function hp(e,t=up,r){(nh?"production":void 0)!=="production"&&r&&!Ra&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ra=!0);const i=cp(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return ap(i),i}const Da=e=>{(nh?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?$f(e):e,r=(i,o)=>hp(t,i,o);return Object.assign(r,t),r},dp=e=>e?Da(e):Da;let Ta=0;const Ln={},fp={devices:{R1:{id:"R1",type:"router",x:120,y:100,interfaces:{"GigabitEthernet0/0":{id:"GigabitEthernet0/0",name:"GigabitEthernet0/0",ip:"192.168.1.1",mask:"255.255.255.0",status:"up",mode:"routed"},"GigabitEthernet0/1":{id:"GigabitEthernet0/1",name:"GigabitEthernet0/1",ip:"10.0.0.1",mask:"255.255.255.252",status:"admin_down",mode:"routed"},Loopback0:{id:"Loopback0",name:"Loopback0",ip:"1.1.1.1",mask:"255.255.255.255",status:"up",mode:"routed"}},config:""},SW1:{id:"SW1",type:"switch",x:350,y:100,interfaces:{"GigabitEthernet0/1":{id:"GigabitEthernet0/1",name:"GigabitEthernet0/1",status:"up",mode:"access",accessVlan:1},"GigabitEthernet0/2":{id:"GigabitEthernet0/2",name:"GigabitEthernet0/2",status:"up",mode:"access",accessVlan:1},Vlan1:{id:"Vlan1",name:"Vlan1",ip:"192.168.1.2",mask:"255.255.255.0",status:"admin_down",mode:"routed"}},config:""},R2:{id:"R2",type:"router",x:240,y:280,interfaces:{"GigabitEthernet0/0":{id:"GigabitEthernet0/0",name:"GigabitEthernet0/0",ip:"10.0.0.2",mask:"255.255.255.252",status:"up",mode:"routed"},"GigabitEthernet0/1":{id:"GigabitEthernet0/1",name:"GigabitEthernet0/1",ip:"172.16.1.1",mask:"255.255.255.0",status:"up",mode:"routed"},Loopback0:{id:"Loopback0",name:"Loopback0",ip:"2.2.2.2",mask:"255.255.255.255",status:"up",mode:"routed"}},config:""}},links:[{id:"l1",source:"R1",sourceInt:"GigabitEthernet0/1",target:"SW1",targetInt:"GigabitEthernet0/1",status:"up"},{id:"l2",source:"SW1",sourceInt:"GigabitEthernet0/2",target:"R2",targetInt:"GigabitEthernet0/0",status:"up"}]},Ma=()=>[{id:"f1",title:"R1 Uplink Admin Down",description:"Gi0/1 is administratively shut on R1.",deviceId:"R1",interfaceId:"GigabitEthernet0/1",severity:"major",hint:'Check "show ip int brief" then run: interface gi0/1 -> no shutdown.',reward:250,resolved:!1,check:{kind:"interface_up",interfaceId:"GigabitEthernet0/1"}},{id:"f2",title:"SW1 SVI Down",description:"Vlan1 SVI is administratively down on SW1.",deviceId:"SW1",interfaceId:"Vlan1",severity:"minor",hint:'Open interface vlan1 and use "no shutdown".',reward:200,resolved:!1,check:{kind:"interface_up",interfaceId:"Vlan1"}},{id:"f3",title:"Access VLAN Mismatch",description:"Gi0/2 should be in VLAN 20 on SW1.",deviceId:"SW1",interfaceId:"GigabitEthernet0/2",severity:"major",hint:'Run "show vlan brief". Then: interface gi0/2 -> switchport access vlan 20.',reward:300,resolved:!1,check:{kind:"access_vlan",interfaceId:"GigabitEthernet0/2",vlan:20}},{id:"f4",title:"Wrong R2 LAN IP",description:"Gi0/1 should be 172.16.0.1/24 on R2.",deviceId:"R2",interfaceId:"GigabitEthernet0/1",severity:"critical",hint:'Use "show ip int brief". Then: interface gi0/1 -> ip address 172.16.0.1 255.255.255.0.',reward:400,resolved:!1,check:{kind:"interface_ip",interfaceId:"GigabitEthernet0/1",ip:"172.16.0.1",mask:"255.255.255.0"}}],re=dp((e,t)=>({id:"session-"+Math.random().toString(36).substr(2,9),score:0,sla:100,startTime:Date.now(),topology:fp,linkStats:{},alerts:[],events:[],packetAnims:[],faults:Ma(),missions:[{id:"m1",title:"Restore R1 Uplink",description:"Bring Gi0/1 up on R1",targetDevice:"R1",targetInt:"GigabitEthernet0/1",type:"interface_up",reward:300,completed:!1},{id:"m2",title:"Revive SW1 SVI",description:"Enable interface Vlan1 on SW1",targetDevice:"SW1",targetInt:"Vlan1",type:"interface_up",reward:250,completed:!1},{id:"m3",title:"Fix Access VLAN",description:"Set Gi0/2 access VLAN to 20 on SW1",targetDevice:"SW1",targetInt:"GigabitEthernet0/2",type:"access_vlan",expectedVlan:20,reward:350,completed:!1},{id:"m4",title:"Correct R2 LAN IP",description:"Set Gi0/1 to 172.16.0.1/24 on R2",targetDevice:"R2",targetInt:"GigabitEthernet0/1",type:"configure_ip",expectedIp:"172.16.0.1",expectedMask:"255.255.255.0",reward:400,completed:!1}],initSession:r=>e({topology:r,startTime:Date.now(),score:0,sla:100,alerts:[],events:[],packetAnims:[],linkStats:{},faults:Ma()}),updateScore:r=>e(i=>({score:i.score+r})),triggerPacket:(r,i,o=800)=>{const h=Math.random().toString(36);e(p=>({packetAnims:[...p.packetAnims,{id:h,source:r,target:i,timestamp:Date.now(),durationMs:o}]})),setTimeout(()=>{e(p=>({packetAnims:p.packetAnims.filter(s=>s.id!==h)}))},Math.max(300,o+200))},checkMissions:()=>{const r=t(),i=r.missions.map(o=>{if(o.completed)return o;const h=r.topology.devices[o.targetDevice],p=o.targetInt?h==null?void 0:h.interfaces[o.targetInt]:void 0;let s=!1;return o.type==="configure_ip"?s=!!p&&p.ip===o.expectedIp&&p.mask===o.expectedMask:o.type==="interface_up"||o.type==="restore_link"?s=!!p&&p.status==="up":o.type==="access_vlan"&&(s=!!p&&p.mode==="access"&&p.accessVlan===o.expectedVlan),s?(t().updateScore(o.reward),t().addEvent({type:"system",description:`MISSION COMPLETE: ${o.title}`,source:"SYSTEM"}),{...o,completed:!0}):o});e({missions:i})},checkFaults:()=>{const r=t(),i=[],o=r.faults.map(h=>{if(h.resolved)return h;const p=r.topology.devices[h.deviceId],s=h.interfaceId?p==null?void 0:p.interfaces[h.interfaceId]:void 0;let u=!1;return h.check.kind==="interface_up"?u=!!s&&s.status==="up":h.check.kind==="interface_ip"?u=!!s&&s.ip===h.check.ip&&s.mask===h.check.mask:h.check.kind==="access_vlan"&&(u=!!s&&s.mode==="access"&&s.accessVlan===h.check.vlan),u?(i.push(h),{...h,resolved:!0}):h});if(i.length){const h=i.reduce((p,s)=>p+s.reward,0);i.forEach(p=>{t().addEvent({type:"system",description:`FAULT CLEARED: ${p.title}`,source:"NMS"})}),e({faults:o,score:r.score+h})}else e({faults:o})},addEvent:r=>e(i=>({events:[{...r,id:Math.random().toString(36),timestamp:Date.now()},...i.events.slice(0,49)]})),updateInterface:(r,i,o)=>{e(h=>{const p={...h.topology.devices};return p[r]&&(p[r].interfaces[i]={...p[r].interfaces[i],...o}),{topology:{...h.topology,devices:p}}}),t().checkMissions(),t().checkFaults()},addAlert:(r,i)=>e(o=>({alerts:[{id:Math.random().toString(36),message:r,severity:i,timestamp:Date.now(),active:!0},...o.alerts]})),tick:()=>e(r=>{const i=Date.now(),o=v=>v==="critical"?2.5:v==="major"?1.2:.4,h=r.alerts.filter(v=>v.active),p=h.reduce((v,k)=>v+o(k.severity),0)*.12,s=45e3;let u=!1;const d=r.alerts.map(v=>v.active&&i-v.timestamp>=s?(u=!0,{...v,active:!1}):v),S=h.some(v=>v.severity==="critical"),g=i-Ta>2e4;let C=null,w=null,y=null;if(!S&&g){const v=Math.random(),k=v<.05,D=v>=.05&&v<.07,R=v>=.07&&v<.075;if(k||D||R){Ta=i;const T=R?"critical":D?"major":"minor",B=T==="critical"?"BGP session flap detected on edge (R1)":T==="major"?"Interface errors rising on SW1 uplink":"Latency spike detected on transit path";C={id:Math.random().toString(36),message:B,severity:T,timestamp:i,active:!0},w={id:Math.random().toString(36),type:"system",description:`INCIDENT OPENED: ${T.toUpperCase()} - ${B}`,source:"NMS",timestamp:i}}}if(u){const v=d.filter(k=>!k.active&&i-k.timestamp>=s).length;v>0&&(y={id:Math.random().toString(36),type:"system",description:`INCIDENT UPDATE: Auto-resolved ${v} alert(s)`,source:"NMS",timestamp:i})}const c=u?d:r.alerts,l={...r.linkStats},n=[],a=r.topology.links.map(v=>{const k=l[v.id],D=(k==null?void 0:k.latencyMs)??20+Math.random()*40,R=Math.max(1,((k==null?void 0:k.jitterMs)??3)+(Math.random()-.5)*2),T=Math.max(0,Math.min(6,((k==null?void 0:k.lossPct)??.5)+(Math.random()-.4)));l[v.id]={latencyMs:Math.max(5,Math.min(120,D+(Math.random()-.5)*10)),jitterMs:Math.max(.5,Math.min(30,R)),lossPct:Math.max(0,Math.min(12,T)),lastUpdated:i};const B=v.status==="down",j=!Ln[v.id]||i>Ln[v.id];return!B&&Math.random()<.015?(Ln[v.id]=i+8e3+Math.random()*12e3,n.push({id:Math.random().toString(36),type:"system",description:`LINK DOWN: ${v.source} ${v.sourceInt} -> ${v.target} ${v.targetInt}`,source:"NMS",timestamp:i}),{...v,status:"down"}):B&&j?(n.push({id:Math.random().toString(36),type:"system",description:`LINK UP: ${v.source} ${v.sourceInt} -> ${v.target} ${v.targetInt}`,source:"NMS",timestamp:i}),{...v,status:"up"}):v}),_={...r.topology.devices},m=new Map(a.map(v=>[v.id,v]));r.topology.links.forEach(v=>{const k=m.get(v.id);if(!k||k.status===v.status)return;const D=_[k.source],R=_[k.target],T=D==null?void 0:D.interfaces[k.sourceInt],B=R==null?void 0:R.interfaces[k.targetInt];T&&T.status!=="admin_down"&&(D.interfaces[k.sourceInt]={...T,status:k.status==="down"?"down":"up"}),B&&B.status!=="admin_down"&&(R.interfaces[k.targetInt]={...B,status:k.status==="down"?"down":"up"})});const x={...r.topology,links:a,devices:_},b=[...w?[w]:[],...y?[y]:[],...n,...r.events].slice(0,50);return{sla:Math.max(0,r.sla-p),alerts:C?[C,...c]:c,events:b,linkStats:l,topology:x}})})),Kt=class Kt{constructor(){Ct(this,"devices",{});this.reset()}static getInstance(){return Kt.instance||(Kt.instance=new Kt),Kt.instance}reset(){this.devices={R1:{hostname:"R1",type:"router",interfaces:{"GigabitEthernet0/0":{name:"GigabitEthernet0/0",ip:"192.168.1.1",mask:"255.255.255.0",status:"up",protocol:"up",mode:"routed"},"GigabitEthernet0/1":{name:"GigabitEthernet0/1",ip:"10.0.0.1",mask:"255.255.255.252",status:"admin_down",protocol:"down",mode:"routed"},Loopback0:{name:"Loopback0",ip:"1.1.1.1",mask:"255.255.255.255",status:"up",protocol:"up",mode:"routed"}},staticRoutes:[],ospf:{processId:"1",networks:[{network:"10.0.0.0",wildcard:"0.0.0.3",area:"0"},{network:"192.168.1.0",wildcard:"0.0.0.255",area:"0"}]},bgp:{asn:65001,neighbors:[],networks:[]},arp:{"192.168.1.2":"aabb.cc00.0200","192.168.1.1":"aabb.cc00.0100"}},SW1:{hostname:"SW1",type:"switch",interfaces:{"GigabitEthernet0/1":{name:"GigabitEthernet0/1",status:"up",protocol:"up",mode:"access",accessVlan:1},"GigabitEthernet0/2":{name:"GigabitEthernet0/2",status:"up",protocol:"up",mode:"access",accessVlan:1},Vlan1:{name:"Vlan1",ip:"192.168.1.2",mask:"255.255.255.0",status:"admin_down",protocol:"down",mode:"routed"}},staticRoutes:[],vlans:{1:{id:1,name:"default",status:"active"},20:{id:20,name:"USERS-20",status:"active"}},arp:{"192.168.1.1":"aabb.cc00.0100"}},R2:{hostname:"R2",type:"router",interfaces:{"GigabitEthernet0/0":{name:"GigabitEthernet0/0",ip:"10.0.0.2",mask:"255.255.255.252",status:"up",protocol:"up",mode:"routed"},"GigabitEthernet0/1":{name:"GigabitEthernet0/1",ip:"172.16.1.1",mask:"255.255.255.0",status:"up",protocol:"up",mode:"routed"},Loopback0:{name:"Loopback0",ip:"2.2.2.2",mask:"255.255.255.255",status:"up",protocol:"up",mode:"routed"}},staticRoutes:[],ospf:{processId:"1",networks:[{network:"10.0.0.0",wildcard:"0.0.0.3",area:"0"},{network:"172.16.0.0",wildcard:"0.0.0.255",area:"0"}]},bgp:{asn:65002,neighbors:[],networks:[]},arp:{"10.0.0.1":"aabb.cc00.0100"}}}}};Ct(Kt,"instance");let Co=Kt;class pp{constructor(){Ct(this,"mode","privileged");Ct(this,"currentInterface","");Ct(this,"currentRouter",null);Ct(this,"currentVlan",null);Ct(this,"network",Co.getInstance())}getPrompt(t){var i;const r=((i=this.network.devices[t])==null?void 0:i.hostname)||t;switch(this.mode){case"user":return`${r}>`;case"privileged":return`${r}#`;case"config":return`${r}(config)#`;case"config-if":return`${r}(config-if)#`;case"config-router":return`${r}(config-router)#`;case"config-router-bgp":return`${r}(config-router)#`;case"config-vlan":return`${r}(config-vlan)#`;default:return`${r}>`}}execute(t,r,i){var S,f,g,C,w,y,c,l,n,a,_,m,x,b,v,k,D,R,T,B,j,H,U,W,E,M,P,I,F;const o=r.trim(),h=o.split(/\s+/),p=(S=h[0])==null?void 0:S.toLowerCase(),s=this.network.devices[t],{triggerPacket:u,addEvent:d}=i;if(!s)return{output:"% Device not found",success:!1};if(!p)return{output:"",success:!0};if(o==="?"||p==="help")return{output:this.generateHelp(s),success:!0};if(h.includes("?"))return{output:this.generateContextHelp(s,h),success:!0};if((this.mode==="config"||this.mode==="config-if"||this.mode==="config-router"||this.mode==="config-router-bgp"||this.mode==="config-vlan")&&p==="do"){const N=o.substring(3).trim(),V=this.mode,G=this.currentRouter,Y=this.currentVlan;this.mode="privileged",this.currentRouter=null,this.currentVlan=null;const L=this.execute(t,N,i);return this.mode=V,this.currentRouter=G,this.currentVlan=Y,L}if(p==="exit")return this.mode==="config-if"||this.mode==="config-router"||this.mode==="config-router-bgp"||this.mode==="config-vlan"?(this.mode="config",this.currentInterface="",this.currentRouter=null,this.currentVlan=null,{output:"",success:!0}):this.mode==="config"?(this.mode="privileged",{output:"",success:!0}):this.mode==="privileged"?(this.mode="user",{output:"",success:!0}):{output:"",success:!0};if(p==="end")return this.mode="privileged",this.currentRouter=null,this.currentVlan=null,{output:"",success:!0};if(p==="enable"&&this.mode==="user")return this.mode="privileged",{output:"",success:!0};if(p==="disable"&&this.mode==="privileged")return this.mode="user",{output:"",success:!0};if((p==="configure"||p==="conf")&&(((f=h[1])==null?void 0:f.toLowerCase())==="terminal"||((g=h[1])==null?void 0:g.toLowerCase())==="t")&&this.mode==="privileged")return this.mode="config",{output:"Enter configuration commands, one per line.  End with CNTL/Z.",success:!0};if(p==="write"&&this.mode==="privileged")return{output:`Building configuration...
[OK]`,success:!0};if(p==="copy"&&this.mode==="privileged")return{output:`Destination filename [startup-config]? 
Building configuration...
[OK]`,success:!0};if(this.mode==="privileged"||this.mode==="user"){if(p==="show"){const N=(C=h[1])==null?void 0:C.toLowerCase();if(N==="run"||N==="running-config")return{output:this.generateRunConfig(s),success:!0};if(N==="ip"&&(((w=h[2])==null?void 0:w.toLowerCase())==="int"||((y=h[2])==null?void 0:y.toLowerCase())==="interface")&&((c=h[3])==null?void 0:c.toLowerCase())==="brief")return{output:this.generateIpIntBrief(s,t),success:!0};if(N==="ip"&&((l=h[2])==null?void 0:l.toLowerCase())==="route")return{output:this.generateIpRoute(s,t),success:!0};if(N==="interfaces")return{output:this.generateInterfaces(s,t,h[2]),success:!0};if(N==="vlan")return{output:this.generateVlanBrief(s),success:!0};if(N==="log"||N==="logging")return{output:this.generateLog(),success:!0};if(N==="clock")return{output:new Date().toLocaleString(),success:!0}}if(p==="ping")return{output:this.simulatePing(t,h[1],u,d),success:!0};if(p==="traceroute")return{output:this.simulateTraceroute(t,h[1]),success:!0};if(p==="ssh"||p==="telnet"){const N=h[1];return N?{output:`Connecting to ${N}... [OK]
Type "exit" to return.`,success:!0}:{output:"% Incomplete command",success:!1}}}if(this.mode==="config"){if(p==="hostname"&&h[1]){const N=s.hostname;return s.hostname=h[1],re.getState().addEvent({type:"config",description:`Hostname changed from ${N} to ${h[1]}`,source:t}),{output:"",success:!0}}if((p==="interface"||p==="int")&&h[1]){const N=_p(h[1],s.interfaces);return N?(this.mode="config-if",this.currentInterface=N,{output:"",success:!0}):{output:"% Invalid interface",success:!1}}if(p==="router"&&((n=h[1])==null?void 0:n.toLowerCase())==="ospf"&&h[2])return s.ospf=s.ospf??{processId:h[2],networks:[]},s.ospf.processId=h[2],this.mode="config-router",this.currentRouter="ospf",{output:"",success:!0};if(p==="router"&&((a=h[1])==null?void 0:a.toLowerCase())==="bgp"&&h[2]){const N=Number(h[2]);return Number.isNaN(N)?{output:"% Invalid AS number",success:!1}:(s.bgp=s.bgp??{asn:N,neighbors:[],networks:[]},s.bgp.asn=N,this.mode="config-router-bgp",this.currentRouter="bgp",{output:"",success:!0})}if(p==="vlan"&&h[1]){if(s.type!=="switch")return{output:"% VLAN configuration not supported on this device",success:!1};const N=Number(h[1]);return Number.isNaN(N)||N<1||N>4094?{output:"% Invalid VLAN ID",success:!1}:(s.vlans=s.vlans??{},s.vlans[N]=s.vlans[N]??{id:N,name:`VLAN${N}`,status:"active"},this.mode="config-vlan",this.currentVlan=N,{output:"",success:!0})}if(p==="ip"&&((_=h[1])==null?void 0:_.toLowerCase())==="route"&&h.length>=5){const N=h[2],V=h[3],G=h[4];return s.staticRoutes.push({network:N,mask:V,nextHop:G}),re.getState().addEvent({type:"config",description:`Static route added: ${N} ${V} via ${G}`,source:t}),{output:"",success:!0}}if(p==="no"&&((m=h[1])==null?void 0:m.toLowerCase())==="ip"&&((x=h[2])==null?void 0:x.toLowerCase())==="route"&&h.length>=6){const N=h[3],V=h[4],G=h[5];return s.staticRoutes=s.staticRoutes.filter(Y=>!(Y.network===N&&Y.mask===V&&Y.nextHop===G)),re.getState().addEvent({type:"config",description:`Static route removed: ${N} ${V} via ${G}`,source:t}),{output:"",success:!0}}}if(this.mode==="config-router"&&this.currentRouter==="ospf"&&p==="network"&&h.length>=5&&((b=h[3])==null?void 0:b.toLowerCase())==="area"){const N=h[1],V=h[2],G=h[4];return s.ospf=s.ospf??{processId:"1",networks:[]},s.ospf.networks.push({network:N,wildcard:V,area:G}),{output:"",success:!0}}if(this.mode==="config-router-bgp"&&this.currentRouter==="bgp"){if(p==="neighbor"&&((v=h[2])==null?void 0:v.toLowerCase())==="remote-as"&&h[3]){const N=h[1],V=Number(h[3]);if(Number.isNaN(V))return{output:"% Invalid AS number",success:!1};s.bgp=s.bgp??{asn:65e3,neighbors:[],networks:[]};const G=s.bgp.neighbors.find(Y=>Y.ip===N);return G?G.remoteAs=V:s.bgp.neighbors.push({ip:N,remoteAs:V}),{output:"",success:!0}}if(p==="network"&&((k=h[2])==null?void 0:k.toLowerCase())==="mask"&&h[3]){const N=h[1],V=h[3];return s.bgp=s.bgp??{asn:65e3,neighbors:[],networks:[]},s.bgp.networks.push({network:N,mask:V}),{output:"",success:!0}}}if(this.mode==="config-vlan"&&this.currentVlan&&p==="name"&&h[1]){s.vlans=s.vlans??{};const N=s.vlans[this.currentVlan];return N&&(N.name=h.slice(1).join(" ")),{output:"",success:!0}}if(this.mode==="config-if"){const N=s.interfaces[this.currentInterface];if(!N)return{output:"% Invalid interface",success:!1};if(p==="description"&&h[1])return N.description=h.slice(1).join(" "),{output:"",success:!0};if(p==="ip"&&((D=h[1])==null?void 0:D.toLowerCase())==="address"){const V=h[2],G=h[3];return!V||!G?{output:"% Incomplete command",success:!1}:N.mode!=="routed"&&N.name.toLowerCase().startsWith("vlan")===!1?{output:"% Command rejected: interface is a switchport",success:!1}:(N.ip=V,N.mask=G,re.getState().updateInterface(t,this.currentInterface,{ip:V,mask:G}),{output:"",success:!0})}if(p==="no"&&((R=h[1])==null?void 0:R.toLowerCase())==="ip"&&((T=h[2])==null?void 0:T.toLowerCase())==="address")return N.ip=void 0,N.mask=void 0,re.getState().updateInterface(t,this.currentInterface,{ip:void 0,mask:void 0}),{output:"",success:!0};if(p==="shutdown")return N.status="admin_down",N.protocol="down",re.getState().updateInterface(t,this.currentInterface,{status:"admin_down"}),re.getState().addEvent({type:"system",description:`Interface ${this.currentInterface} administratively down`,source:t}),{output:"Interface changed state to administratively down",success:!0};if(p==="no"&&((B=h[1])==null?void 0:B.toLowerCase())==="shutdown")return N.status="up",N.protocol="up",re.getState().updateInterface(t,this.currentInterface,{status:"up"}),re.getState().addEvent({type:"system",description:`Interface ${this.currentInterface} state to UP`,source:t}),{output:"Interface changed state to up",success:!0};if(p==="switchport"&&s.type==="switch"){if(((j=h[1])==null?void 0:j.toLowerCase())==="mode"&&h[2]){const V=h[2].toLowerCase();if(V==="access"||V==="trunk")return N.mode=V,re.getState().updateInterface(t,this.currentInterface,{mode:V}),{output:"",success:!0}}if(((H=h[1])==null?void 0:H.toLowerCase())==="access"&&((U=h[2])==null?void 0:U.toLowerCase())==="vlan"&&h[3]){const V=Number(h[3]);return Number.isNaN(V)?{output:"% Invalid VLAN ID",success:!1}:(N.accessVlan=V,re.getState().updateInterface(t,this.currentInterface,{accessVlan:V}),{output:"",success:!0})}if(((W=h[1])==null?void 0:W.toLowerCase())==="trunk"&&((E=h[2])==null?void 0:E.toLowerCase())==="allowed"&&((M=h[3])==null?void 0:M.toLowerCase())==="vlan"&&h[4]){const V=gp(h[4]);return N.trunkAllowedVlans=V,re.getState().updateInterface(t,this.currentInterface,{trunkAllowedVlans:V}),{output:"",success:!0}}if(((P=h[1])==null?void 0:P.toLowerCase())==="trunk"&&((I=h[2])==null?void 0:I.toLowerCase())==="native"&&((F=h[3])==null?void 0:F.toLowerCase())==="vlan"&&h[4]){const V=Number(h[4]);return N.trunkNativeVlan=V,re.getState().updateInterface(t,this.currentInterface,{trunkNativeVlan:V}),{output:"",success:!0}}}}return{output:`% Invalid input detected at '^' marker.

${o}
^`,success:!1}}generateHelp(t){return this.mode==="user"?["Exec commands:","  enable","  show","  ping","  traceroute","  ssh","  telnet","  exit","  ?"].join(`
`):this.mode==="privileged"?["Exec commands:","  disable","  show","  ping","  traceroute","  configure terminal","  write","  copy","  exit","  ?"].join(`
`):this.mode==="config"?["Config commands:","  hostname","  interface","  router","  vlan","  ip route","  exit","  end","  do","  ?"].join(`
`):this.mode==="config-if"?["Interface config commands:","  description","  ip address","  shutdown","  no shutdown","  switchport","  exit","  end","  do","  ?"].join(`
`):this.mode==="config-router"||this.mode==="config-router-bgp"?["Router config commands:",this.currentRouter==="ospf"?"  network <ip> <wildcard> area <id>":"  neighbor <ip> remote-as <asn>",this.currentRouter==="bgp"?"  network <ip> mask <mask>":"","  exit","  end","  do","  ?"].filter(Boolean).join(`
`):this.mode==="config-vlan"?["VLAN config commands:","  name <VLAN_NAME>","  exit","  end","  do","  ?"].join(`
`):"help"}generateContextHelp(t,r){const i=r.indexOf("?"),o=r.slice(0,i).map(h=>h.toLowerCase());if(o.length===0)return this.generateHelp(t);if(o[0]==="show")return o.length===1?["  running-config","  interfaces","  ip","  vlan","  logging","  clock"].join(`
`):o[1]==="ip"?["  interface brief","  route"].join(`
`):this.generateHelp(t);if(o[0]==="switchport"&&this.mode==="config-if")return["  access vlan <id>","  mode {access | trunk}","  trunk allowed vlan <list>","  trunk native vlan <id>"].join(`
`);if(o[0]==="interface"&&this.mode==="config"){const h=Object.keys(t.interfaces);return h.length?h.map(p=>`  ${p}`).join(`
`):"  <interface>"}return o[0]==="vlan"&&this.mode==="config"?"  <1-4094>":this.generateHelp(t)}generateRunConfig(t){let r=`!
hostname ${t.hostname}
!
`;return t.type==="switch"&&t.vlans&&Object.values(t.vlans).forEach(i=>{r+=`vlan ${i.id}
 name ${i.name}
!
`}),Object.values(t.interfaces).forEach(i=>{var o;r+=`interface ${i.name}
`,i.description&&(r+=` description ${i.description}
`),(i.mode==="access"||i.mode==="trunk")&&(r+=` switchport
 switchport mode ${i.mode}
`,i.mode==="access"&&i.accessVlan&&(r+=` switchport access vlan ${i.accessVlan}
`),i.mode==="trunk"&&((o=i.trunkAllowedVlans)!=null&&o.length)&&(r+=` switchport trunk allowed vlan ${i.trunkAllowedVlans.join(",")}
`),i.mode==="trunk"&&i.trunkNativeVlan&&(r+=` switchport trunk native vlan ${i.trunkNativeVlan}
`)),i.ip&&i.mask&&(r+=` ip address ${i.ip} ${i.mask}
`),i.status==="admin_down"&&(r+=` shutdown
`),r+=`!
`}),t.ospf&&(r+=`router ospf ${t.ospf.processId}
`,t.ospf.networks.forEach(i=>{r+=` network ${i.network} ${i.wildcard} area ${i.area}
`}),r+=`!
`),t.bgp&&(r+=`router bgp ${t.bgp.asn}
`,t.bgp.neighbors.forEach(i=>{r+=` neighbor ${i.ip} remote-as ${i.remoteAs}
`}),t.bgp.networks.forEach(i=>{r+=` network ${i.network} mask ${i.mask}
`}),r+=`!
`),t.staticRoutes.forEach(i=>{r+=`ip route ${i.network} ${i.mask} ${i.nextHop}
`}),r+"end"}generateIpIntBrief(t,r){const o=re.getState().topology.devices[r];let h=`Interface              IP-Address      OK? Method Status                Protocol
`;return Object.values(t.interfaces).forEach(p=>{const s=o==null?void 0:o.interfaces[p.name],u=(s==null?void 0:s.status)??p.status,d=u==="admin_down"?"administratively down":u,S=(s==null?void 0:s.ip)??p.ip??"unassigned",f=u==="up"?"up":"down",g=S==="unassigned"?"unset":"manual";h+=`${p.name.padEnd(22)} ${S.padEnd(15)} YES ${g.padEnd(6)} ${d.padEnd(20)} ${f}
`}),h}generateInterfaces(t,r,i){const h=re.getState().topology.devices[r],p=Object.values(t.interfaces),s=i?p.filter(d=>d.name.toLowerCase().startsWith(i.toLowerCase())):p;let u="";return s.forEach(d=>{const S=h==null?void 0:h.interfaces[d.name],f=(S==null?void 0:S.status)??d.status,g=f==="admin_down"?"administratively down":f,C=f==="up"?"up":"down",w=(S==null?void 0:S.ip)??d.ip??"unassigned";u+=`${d.name} is ${g}, line protocol is ${C}
`,d.description&&(u+=`  Description: ${d.description}
`),u+=`  Internet address is ${w}${d.mask?` ${d.mask}`:""}
`,u+=`  MTU 1500 bytes, BW 1000000 Kbit/sec, DLY 10 usec
`,u+=`  Encapsulation ARPA, loopback not set

`}),u.trimEnd()}generateVlanBrief(t){if(t.type!=="switch")return"% VLAN table not supported on this device";const r=t.vlans??{};let i=`VLAN Name                             Status    Ports
`;return Object.values(r).forEach(o=>{const h=Object.values(t.interfaces).filter(p=>p.mode==="access"&&p.accessVlan===o.id).map(p=>p.name).join(", ")||"-";i+=`${String(o.id).padEnd(4)} ${o.name.padEnd(32)} ${o.status.padEnd(9)} ${h}
`}),i}generateLog(){const t=re.getState().events.slice(0,20);return t.length===0?"%SYS-5-CONFIG_I: No logs available":t.map(r=>`${new Date(r.timestamp).toLocaleTimeString([],{hour12:!1})} ${r.type.toUpperCase()}: ${r.description}`).join(`
`)}generateIpRoute(t,r){const i=this.buildRoutes(t,r);return i.length===0?"Gateway of last resort is not set":i.join(`
`)}buildRoutes(t,r){const i=[],h=re.getState().topology.devices[r];if(Object.values(t.interfaces).forEach(p=>{var S,f;const s=((S=h==null?void 0:h.interfaces[p.name])==null?void 0:S.ip)??p.ip,u=p.mask,d=((f=h==null?void 0:h.interfaces[p.name])==null?void 0:f.status)??p.status;if(s&&u&&d==="up"){const g=os(s,u);i.push(`C    ${g}/${lr(u)} is directly connected, ${p.name}`)}}),t.staticRoutes.forEach(p=>{i.push(`S    ${p.network}/${lr(p.mask)} [1/0] via ${p.nextHop}`)}),t.ospf){const p=this.buildOspfRoutes(t,r);i.push(...p.map(s=>`O    ${s.network}/${lr(s.mask)} [110/2] via ${s.nextHop}, 00:05:${Ia(Math.floor(Math.random()*60))}, ${s.outInt}`))}if(t.bgp){const p=this.buildBgpRoutes(t);i.push(...p.map(s=>`B    ${s.network}/${lr(s.mask)} [20/0] via ${s.nextHop}, 00:02:${Ia(Math.floor(Math.random()*60))}`))}return i}buildOspfRoutes(t,r){const i=re.getState().topology;if(!t.ospf)return[];const o=Aa(i),h=Object.entries(this.network.devices).filter(([,d])=>d.ospf),p=mp(r,o),s=Ba(t),u=[];return h.forEach(([d,S])=>{var y,c;if(d===r||!p.has(d))return;const f=Ba(S),g=(c=(y=o.get(r))==null?void 0:y.find(l=>p.has(l.node)))==null?void 0:c.node,C=Pa(i,r,g),w=g?this.findNeighborIp(r,g):void 0;f.forEach(l=>{s.some(n=>n.network===l.network&&n.mask===l.mask)||w&&C&&u.push({...l,nextHop:w,outInt:C.source===r?C.sourceInt:C.targetInt})})}),u}buildBgpRoutes(t){if(!t.bgp)return[];const r=[];return t.bgp.neighbors.forEach(o=>{const h=this.findDeviceByIp(o.ip);if(!h)return;const p=this.network.devices[h];!(p!=null&&p.bgp)||!(p.bgp.asn===o.remoteAs)||p.bgp.networks.forEach(u=>{r.push({network:u.network,mask:u.mask,nextHop:o.ip})})}),r}findDeviceByIp(t){for(const[r,i]of Object.entries(this.network.devices))for(const o of Object.values(i.interfaces))if(o.ip===t)return r;for(const[r,i]of Object.entries(this.network.devices))for(const o of Object.values(i.interfaces))if(o.ip&&o.mask&&xo(t,os(o.ip,o.mask),o.mask))return r;return null}findNeighborIp(t,r){var s;const i=re.getState().topology,o=Pa(i,t,r);if(!o)return;const h=o.source===r?o.sourceInt:o.targetInt,p=this.network.devices[r];return(s=p==null?void 0:p.interfaces[h])==null?void 0:s.ip}simulatePing(t,r,i,o){if(!r)return"% Incomplete command";if(!this.resolveRoute(t,r))return`Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to ${r}, timeout is 2 seconds:
.....
Success rate is 0 percent (0/5)`;const p=this.findPathToTarget(t,r),s=p?this.getPathStats(p.linkIds):{lossPct:0,latencyMs:20},u=Math.min(90,s.lossPct);let d=0;const S=[];for(let y=0;y<5;y++){const c=Math.random()*100>u;S.push(c?"!":"."),c&&d++}if(p&&i){const y=p.targetDevice,c=Math.max(300,s.latencyMs*10);i(t,y,c)}o&&o({type:"packet",description:`ICMP Echo Request to ${r}`,source:t,destination:r});const f=Math.round(d/5*100),g=Math.max(1,Math.round(s.latencyMs)),C=Math.max(1,Math.round(g*.7)),w=Math.max(C+1,Math.round(g*1.4));return`Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to ${r}, timeout is 2 seconds:
${S.join("")}
Success rate is ${f} percent (${d}/5), round-trip min/avg/max = ${C}/${g}/${w} ms`}simulateTraceroute(t,r){if(!r)return"% Incomplete command";const i=this.findPathToTarget(t,r);if(!i)return`Type escape sequence to abort.
Tracing the route to `+r+`
  1  *  *  *`;let o=`Type escape sequence to abort.
Tracing the route to ${r}
`;return i.hops.forEach((h,p)=>{o+=`  ${p+1}  ${h.ip??"*"}  ${Math.round(h.latencyMs)} ms  ${Math.round(h.latencyMs+2)} ms  ${Math.round(h.latencyMs+5)} ms
`}),o.trimEnd()}resolveRoute(t,r){const i=this.network.devices[t],o=[],p=re.getState().topology.devices[t];return Object.values(i.interfaces).forEach(u=>{var g,C;const d=((g=p==null?void 0:p.interfaces[u.name])==null?void 0:g.ip)??u.ip,S=u.mask,f=((C=p==null?void 0:p.interfaces[u.name])==null?void 0:C.status)??u.status;d&&S&&f==="up"&&o.push({network:os(d,S),mask:S})}),i.staticRoutes.forEach(u=>o.push({network:u.network,mask:u.mask,nextHop:u.nextHop})),i.ospf&&this.buildOspfRoutes(i,t).forEach(u=>o.push({network:u.network,mask:u.mask,nextHop:u.nextHop})),i.bgp&&this.buildBgpRoutes(i).forEach(u=>o.push({network:u.network,mask:u.mask,nextHop:u.nextHop})),o.filter(u=>xo(r,u.network,u.mask)).sort((u,d)=>lr(d.mask)-lr(u.mask))[0]??null}findPathToTarget(t,r){const i=re.getState().topology,o=Aa(i),h=this.findDeviceByIp(r);if(!h)return null;const p=Sp(t,h,o);if(!p)return null;const s=p.links,u=this.getPathStats(s),d=p.nodes.slice(1).map((S,f)=>({ip:this.findNeighborIp(p.nodes[f],S),latencyMs:u.latencyMs/Math.max(1,p.nodes.length-1)}));return{targetDevice:h,linkIds:s,hops:d}}getPathStats(t){const r=re.getState().linkStats;let i=0,o=1;t.forEach(p=>{const s=r[p];s&&(i+=s.latencyMs+s.jitterMs,o*=1-s.lossPct/100)});const h=(1-o)*100;return{latencyMs:Math.max(10,i),lossPct:h}}}function _p(e,t){const r=e.toLowerCase(),i=Object.keys(t).find(p=>p.toLowerCase()===r);if(i)return i;const o=vp(r);return Object.keys(t).find(p=>p.toLowerCase().startsWith(o))??null}function vp(e){const t={gi:"gigabitethernet",g:"gigabitethernet",fa:"fastethernet",lo:"loopback",vl:"vlan"},r=e.split("/"),i=r[0];return[t[i]??i,...r.slice(1)].join("/")}function gp(e){const t=[];return e.split(",").forEach(r=>{if(r.includes("-")){const[i,o]=r.split("-").map(h=>parseInt(h,10));if(!Number.isNaN(i)&&!Number.isNaN(o))for(let h=i;h<=o;h++)t.push(h)}else{const i=parseInt(r,10);Number.isNaN(i)||t.push(i)}}),t}function Aa(e){const t=new Map;return e.links.forEach(r=>{r.status==="up"&&(t.has(r.source)||t.set(r.source,[]),t.has(r.target)||t.set(r.target,[]),t.get(r.source).push({node:r.target,linkId:r.id}),t.get(r.target).push({node:r.source,linkId:r.id}))}),t}function mp(e,t){const r=new Set,i=[e];for(r.add(e);i.length;){const o=i.shift();(t.get(o)??[]).forEach(p=>{r.has(p.node)||(r.add(p.node),i.push(p.node))})}return r}function Sp(e,t,r){const i=[e],o=new Map,h=new Set([e]);for(;i.length;){const d=i.shift();if(d===t)break;const S=r.get(d)??[];for(const f of S)h.has(f.node)||(h.add(f.node),o.set(f.node,{node:d,linkId:f.linkId}),i.push(f.node))}if(!h.has(t))return null;const p=[],s=[];let u=t;for(;u!==e;){const d=o.get(u);if(!d)break;p.push(u),s.push(d.linkId),u=d.node}return p.push(e),p.reverse(),s.reverse(),{nodes:p,links:s}}function Pa(e,t,r){return!t||!r?null:e.links.find(i=>i.source===t&&i.target===r||i.source===r&&i.target===t)??null}function Ba(e){if(!e.ospf)return[];const t=[];return Object.values(e.interfaces).forEach(r=>{if(!r.ip||!r.mask)return;e.ospf.networks.some(o=>xo(r.ip,o.network,yp(o.wildcard)))&&t.push({network:os(r.ip,r.mask),mask:r.mask})}),t}function Tt(e){return e.split(".").reduce((t,r)=>(t<<8)+Number(r),0)>>>0}function oh(e){return[24,16,8,0].map(t=>e>>t&255).join(".")}function lr(e){const t=Tt(e);let r=0;for(let i=31;i>=0;i--)t&1<<i&&r++;return r}function yp(e){const r=~Tt(e)>>>0;return oh(r)}function os(e,t){const r=Tt(e)&Tt(t);return oh(r)}function xo(e,t,r){return(Tt(e)&Tt(r))===(Tt(t)&Tt(r))}function Ia(e){return e<10?`0${e}`:`${e}`}const Oa=new pp,Na={},ja=new Set,wp=({deviceName:e})=>{const t=fe.useRef(null),r=fe.useRef(null),i=fe.useRef(""),o=fe.useRef([]),h=fe.useRef(-1),{triggerPacket:p,addEvent:s}=re();return fe.useEffect(()=>{if(!t.current)return;o.current=Na[e]??[];const u=new jf.Terminal({cursorBlink:!0,theme:{background:"#09090b",foreground:"#22c55e",cursor:"#22c55e"},fontFamily:'"Fira Code", monospace',fontSize:14,letterSpacing:0,lineHeight:1.2}),d=new Hf.FitAddon;u.loadAddon(d),u.open(t.current),d.fit(),r.current=u;const S=()=>{u.write(`\r${Oa.getPrompt(e)} `)};ja.has(e)?S():(u.write(`\x1B[32mBootstrap program is C3560 boot loader\r
`),u.write(`Self-decompressing the image : ########################################################################### [OK]\r
\x1B[0m`),u.write(`\r
Cisco IOS Software, C3560 Software (C3560-IPSERVICESK9-M), Version 15.0(2)SE\r
`),u.write(`Copyright (c) 1986-2012 by Cisco Systems, Inc.\r
\r
`),ja.add(e),setTimeout(S,100)),u.onData(C=>{const w=C.charCodeAt(0);if(C.startsWith("\x1B[")){const y=C.substring(2);if(y==="A"){if(o.current.length>0&&h.current<o.current.length-1){h.current++;const c=o.current[o.current.length-1-h.current];u.write("\b \b".repeat(i.current.length)),i.current=c,u.write(c)}return}if(y==="B"){if(h.current>0){h.current--;const c=o.current[o.current.length-1-h.current];u.write("\b \b".repeat(i.current.length)),i.current=c,u.write(c)}else h.current===0&&(h.current=-1,u.write("\b \b".repeat(i.current.length)),i.current="");return}return}if(w===13){const y=i.current.trim();u.write(`\r
`),y&&(o.current.push(y),o.current.length>50&&o.current.shift(),Na[e]=o.current),h.current=-1,i.current="";const c=Oa.execute(e,y,{triggerPacket:p,addEvent:s});if(c.output){const l=c.output.split(`
`).join(`\r
`);u.write(l+`\r
`)}S()}else if(w===127||w===8)i.current.length>0&&(i.current=i.current.slice(0,-1),u.write("\b \b"));else if(w===9){const y=["show","configure","conf","terminal","interface","ip","address","running-config","ping","traceroute","hostname","no","shutdown","description","router","ospf","bgp","network","area","neighbor","remote-as","vlan","switchport","access","trunk","allowed","native","route","end","exit","write","copy","enable","disable","help","?"],c=i.current.toLowerCase(),l=y.find(n=>n.startsWith(c)&&n!==c);if(l){const n=l.substring(c.length);i.current+=n,u.write(n)}}else w>=32&&w<127&&(i.current+=C,u.write(C))});const f=()=>d.fit();window.addEventListener("resize",f);const g=typeof ResizeObserver<"u"?new ResizeObserver(()=>d.fit()):null;return g&&g.observe(t.current),()=>{u.dispose(),window.removeEventListener("resize",f),g&&g.disconnect()}},[e,s,p]),A.jsx("div",{className:"h-full w-full bg-[#09090b] p-2",children:A.jsx("div",{ref:t,className:"h-full w-full"})})},Cp=({isActive:e})=>A.jsxs("svg",{viewBox:"0 0 100 60",className:"w-24 h-14",children:[A.jsxs("defs",{children:[A.jsxs("linearGradient",{id:"routerBody",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[A.jsx("stop",{offset:"0%",stopColor:e?"#166534":"#374151"}),A.jsx("stop",{offset:"50%",stopColor:e?"#15803d":"#1f2937"}),A.jsx("stop",{offset:"100%",stopColor:e?"#14532d":"#111827"})]}),A.jsxs("linearGradient",{id:"routerTop",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[A.jsx("stop",{offset:"0%",stopColor:e?"#22c55e":"#4b5563"}),A.jsx("stop",{offset:"100%",stopColor:e?"#16a34a":"#374151"})]})]}),A.jsx("rect",{x:"5",y:"15",width:"90",height:"40",rx:"3",fill:"url(#routerBody)",stroke:e?"#22c55e":"#6b7280",strokeWidth:"1.5"}),A.jsx("polygon",{points:"5,15 15,5 85,5 95,15",fill:"url(#routerTop)",stroke:e?"#22c55e":"#6b7280",strokeWidth:"1"}),A.jsx("polygon",{points:"95,15 95,55 85,45 85,5",fill:e?"#14532d":"#111827",stroke:e?"#22c55e":"#6b7280",strokeWidth:"1"}),[0,1,2,3,4,5,6].map(t=>A.jsx("rect",{x:12+t*10,y:"25",width:"6",height:"2",fill:e?"#052e16":"#030712",rx:"0.5"},t)),[0,1,2,3,4,5,6].map(t=>A.jsx("rect",{x:12+t*10,y:"30",width:"6",height:"2",fill:e?"#052e16":"#030712",rx:"0.5"},`b${t}`)),A.jsx("circle",{cx:"15",cy:"45",r:"2.5",fill:e?"#4ade80":"#6b7280",children:e&&A.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1s",repeatCount:"indefinite"})}),A.jsx("circle",{cx:"25",cy:"45",r:"2.5",fill:"#fbbf24",children:A.jsx("animate",{attributeName:"opacity",values:"1;0.3;1",dur:"0.5s",repeatCount:"indefinite"})}),A.jsx("circle",{cx:"35",cy:"45",r:"2.5",fill:"#22c55e"}),[0,1,2,3].map(t=>A.jsx("rect",{x:55+t*10,y:"42",width:"7",height:"10",fill:"#1e293b",stroke:"#475569",strokeWidth:"0.5",rx:"1"},`port${t}`)),A.jsx("rect",{x:"45",y:"44",width:"6",height:"6",fill:"#3b82f6",stroke:"#60a5fa",strokeWidth:"0.5",rx:"1"}),A.jsx("text",{x:"50",y:"22",textAnchor:"middle",fontSize:"6",fill:e?"#86efac":"#9ca3af",fontFamily:"Arial",fontWeight:"bold",children:"CISCO"})]}),xp=({isActive:e})=>A.jsxs("svg",{viewBox:"0 0 120 50",className:"w-28 h-12",children:[A.jsx("defs",{children:A.jsxs("linearGradient",{id:"switchBody",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[A.jsx("stop",{offset:"0%",stopColor:e?"#1e40af":"#374151"}),A.jsx("stop",{offset:"50%",stopColor:e?"#1e3a8a":"#1f2937"}),A.jsx("stop",{offset:"100%",stopColor:e?"#172554":"#111827"})]})}),A.jsx("rect",{x:"2",y:"8",width:"116",height:"35",rx:"2",fill:"url(#switchBody)",stroke:e?"#3b82f6":"#6b7280",strokeWidth:"1.5"}),A.jsx("rect",{x:"2",y:"8",width:"116",height:"4",rx:"2",fill:e?"#2563eb":"#4b5563"}),[...Array(12)].map((t,r)=>A.jsxs("g",{children:[A.jsx("rect",{x:8+r*9,y:"16",width:"6",height:"5",fill:"#0f172a",stroke:"#334155",strokeWidth:"0.3",rx:"0.5"}),A.jsx("circle",{cx:11+r*9,y:"15",r:"1",fill:r%4===0||r%7===0?"#6b7280":"#22c55e",children:r%3===0&&A.jsx("animate",{attributeName:"opacity",values:"1;0.3;1",dur:"0.35s",repeatCount:"indefinite"})})]},`port1-${r}`)),[...Array(12)].map((t,r)=>A.jsxs("g",{children:[A.jsx("rect",{x:8+r*9,y:"24",width:"6",height:"5",fill:"#0f172a",stroke:"#334155",strokeWidth:"0.3",rx:"0.5"}),A.jsx("circle",{cx:11+r*9,y:"23",r:"1",fill:r%5===0||r%8===0?"#6b7280":"#22c55e",children:r%4===0&&A.jsx("animate",{attributeName:"opacity",values:"1;0.3;1",dur:"0.5s",repeatCount:"indefinite"})})]},`port2-${r}`)),A.jsx("rect",{x:"100",y:"16",width:"12",height:"12",fill:"#1e293b",stroke:"#475569",strokeWidth:"0.5",rx:"1"}),A.jsx("text",{x:"106",y:"24",textAnchor:"middle",fontSize:"4",fill:"#94a3b8",children:"SFP+"}),A.jsx("circle",{cx:"8",cy:"38",r:"2",fill:e?"#22c55e":"#6b7280",children:e&&A.jsx("animate",{attributeName:"opacity",values:"1;0.5;1",dur:"1s",repeatCount:"indefinite"})}),A.jsx("circle",{cx:"16",cy:"38",r:"2",fill:"#f59e0b"}),A.jsx("text",{x:"60",y:"40",textAnchor:"middle",fontSize:"5",fill:e?"#93c5fd":"#9ca3af",fontFamily:"Arial",children:"Catalyst 3560-24PS"})]}),kp=({pathData:e,durationMs:t})=>A.jsxs("circle",{r:"4",fill:"#60a5fa",className:"filter drop-shadow-[0_0_8px_#3b82f6] z-50",children:[A.jsx("animateMotion",{dur:`${Math.max(250,t??800)/1e3}s`,repeatCount:"1",path:e,fill:"remove",rotate:"auto"}),A.jsx("animate",{attributeName:"r",values:"4;6;4",dur:"0.5s",repeatCount:"indefinite"}),A.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"0.5s",repeatCount:"indefinite"})]}),bp=({activeDevice:e,onDeviceClick:t})=>{const{topology:r,packetAnims:i,faults:o}=re(),{devices:h,links:p}=r,s=fe.useRef(null),[u,d]=fe.useState({width:0,height:0}),[S,f]=fe.useState({}),g=o.filter(w=>!w.resolved),C=new Set(g.map(w=>w.deviceId));return fe.useEffect(()=>{const w=s.current;if(!w)return;const y=()=>{d({width:w.clientWidth,height:w.clientHeight})};y();const c=new ResizeObserver(y);return c.observe(w),()=>c.disconnect()},[]),fe.useEffect(()=>{const w=Object.keys(h);if(!w.length||u.width===0||u.height===0)return;const y=e&&h[e]?e:w[0],c=new Map;p.forEach(R=>{c.has(R.source)||c.set(R.source,[]),c.has(R.target)||c.set(R.target,[]),c.get(R.source).push(R.target),c.get(R.target).push(R.source)});const l=new Map,n=[y];for(l.set(y,0);n.length;){const R=n.shift(),T=l.get(R)??0;(c.get(R)??[]).forEach(B=>{l.has(B)||(l.set(B,T+1),n.push(B))})}let a=0;l.forEach(R=>{R>a&&(a=R)});const _=a+1;w.forEach(R=>{l.has(R)||l.set(R,_)}),a=Math.max(a,_);const m=90,x=Math.max(200,u.width-m*2),b=Math.max(200,u.height-m*2),v=Math.max(1,a+1),k=Array.from({length:v},()=>[]);w.forEach(R=>{const T=l.get(R)??0;k[Math.min(T,v-1)].push(R)});const D={};k.forEach((R,T)=>{const B=v===1?m+b/2:m+b*T/(v-1);R.forEach((j,H)=>{const U=R.length===1?m+x/2:m+x*(H+1)/(R.length+1);D[j]={x:U,y:B}})}),f(D)},[h,p,u.width,u.height,e]),A.jsxs("div",{ref:s,className:"relative w-full h-full bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-gray-900 via-black to-black overflow-hidden select-none",children:[A.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#4ade80 1px, transparent 1px)",backgroundSize:"40px 40px"}}),A.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:[A.jsxs("defs",{children:[A.jsxs("filter",{id:"glow",children:[A.jsx("feGaussianBlur",{stdDeviation:"2.5",result:"coloredBlur"}),A.jsxs("feMerge",{children:[A.jsx("feMergeNode",{in:"coloredBlur"}),A.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),A.jsxs("linearGradient",{id:"cableGradient",gradientUnits:"userSpaceOnUse",children:[A.jsx("stop",{offset:"0%",stopColor:"#22c55e",stopOpacity:"0"}),A.jsx("stop",{offset:"50%",stopColor:"#22c55e",stopOpacity:"1"}),A.jsx("stop",{offset:"100%",stopColor:"#22c55e",stopOpacity:"0"})]})]}),p.map((w,y)=>{const c=h[w.source],l=h[w.target];if(!c||!l)return null;const n=S[w.source]??{x:c.x,y:c.y},a=S[w.target]??{x:l.x,y:l.y},_=c.interfaces[w.sourceInt],m=l.interfaces[w.targetInt],x=(_==null?void 0:_.status)!=="up"||(m==null?void 0:m.status)!=="up"||w.status==="down",b=e===w.source||e===w.target,v=a.x-n.x,k=a.y-n.y,D=Math.sqrt(v*v+k*k),R=.2,T=(n.x+a.x)/2-k*R,B=(n.y+a.y)/2+v*R,j=`M${n.x},${n.y} Q${T},${B} ${a.x},${a.y}`;return A.jsxs("g",{children:[A.jsx("path",{d:j,stroke:x?"#ef4444":b?"#22c55e":"#374151",strokeWidth:b?3:2,fill:"none",strokeDasharray:x?"5,5":"none",className:`transition-all duration-500 ${b?"filter drop-shadow-[0_0_5px_rgba(34,197,94,0.5)]":"opacity-40"}`}),b&&!x&&A.jsx("path",{d:j,stroke:"url(#cableGradient)",strokeWidth:"3",fill:"none",strokeDasharray:`${D}`,strokeDashoffset:`${D}`,children:A.jsx("animate",{attributeName:"stroke-dashoffset",values:`${D}; ${-D}`,dur:"1.5s",repeatCount:"indefinite"})}),i.filter(H=>H.source===w.source&&H.target===w.target||H.source===w.target&&H.target===w.source).map(H=>{const W=H.source===w.target?`M${a.x},${a.y} Q${T},${B} ${n.x},${n.y}`:j;return A.jsx(kp,{pathData:W,durationMs:H.durationMs},H.id)})]},y)})]}),Object.values(h).map(w=>{const y=e===w.id,c=w.type==="router",l=S[w.id]??{x:w.x,y:w.y},n=C.has(w.id);return A.jsxs("div",{onClick:()=>t==null?void 0:t(w.id),className:`absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-all duration-300 ${y?"scale-110 z-20":"hover:scale-105 z-10"}`,style:{left:l.x,top:l.y},children:[y&&A.jsx("div",{className:"absolute inset-0 -m-4 bg-green-500/20 blur-xl rounded-full animate-pulse"}),A.jsx("div",{className:`relative ${y?"drop-shadow-[0_0_15px_rgba(34,197,94,0.5)]":""}`,children:c?A.jsx(Cp,{isActive:y}):A.jsx(xp,{isActive:y})}),A.jsx("div",{className:`text-center mt-1 px-2 py-0.5 rounded ${y?"bg-green-900/50 text-green-400":n?"bg-red-900/40 text-red-300":"bg-gray-800/50 text-gray-400"}`,children:A.jsx("span",{className:"text-xs font-bold",children:w.id})}),n&&A.jsx("div",{className:"absolute -top-3 -right-3 w-5 h-5 rounded-full bg-red-500 text-black text-[10px] font-black flex items-center justify-center shadow-[0_0_10px_rgba(239,68,68,0.8)] animate-pulse",children:"!"}),y&&A.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-[10px] text-green-400 whitespace-nowrap",children:"Connected"})]},w.id)}),A.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-900/80 backdrop-blur-sm rounded-lg p-3 border border-gray-700",children:[A.jsx("div",{className:"text-[10px] text-gray-400 mb-2 font-semibold uppercase tracking-wider",children:"Network Topology"}),A.jsxs("div",{className:"flex gap-4 text-[10px]",children:[A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),A.jsx("span",{className:"text-gray-300",children:"Active"})]}),A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("div",{className:"w-3 h-1 bg-blue-500 rounded"}),A.jsx("span",{className:"text-gray-300",children:"Link Up"})]})]})]}),A.jsx("div",{className:"absolute bottom-4 right-4 text-[10px] text-gray-500 bg-gray-900/50 px-2 py-1 rounded",children:"Click a device for console + hints"})]})};function Ep(){const[e,t]=fe.useState("R1"),[r,i]=fe.useState("map"),[o,h]=fe.useState(!1),[p,s]=fe.useState({}),{topology:u,sla:d,score:S,alerts:f}=re(),g=re(R=>R.faults),C=re(R=>R.missions),w=re(R=>R.events),y=u.devices[e],c=g.filter(R=>!R.resolved),l=c.filter(R=>R.deviceId===e),a=f.filter(R=>R.active).reduce((R,T)=>T.severity==="critical"?R+35:T.severity==="major"?R+20:R+10,0),_=Math.min(100,a),m=1500,x=Math.max(1,Math.floor(S/m)+1),b=S%m,v=Math.round(b/m*100),k=R=>{s(T=>({...T,[R]:!T[R]}))},D=re(R=>R.tick);return fe.useEffect(()=>{let R=null;const T=()=>{R===null&&(R=window.setInterval(()=>{D()},1e3))},B=()=>{R!==null&&(window.clearInterval(R),R=null)},j=()=>{document.hidden?B():T()};return T(),document.addEventListener("visibilitychange",j),()=>{B(),document.removeEventListener("visibilitychange",j)}},[D]),A.jsxs("div",{className:"flex flex-col md:flex-row h-screen w-screen bg-gray-950 text-gray-200 font-mono overflow-hidden relative",children:[A.jsx("div",{className:"crt-overlay pointer-events-none fixed inset-0 z-50"}),A.jsx("div",{className:"crt-scanline pointer-events-none fixed inset-0 z-50"}),o&&A.jsx("div",{className:"fixed inset-0 z-[60] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",children:A.jsxs("div",{className:"w-full max-w-3xl bg-gray-950 border border-gray-800 rounded-2xl shadow-2xl p-6 text-gray-200",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-xs font-black uppercase tracking-[0.3em] text-gray-500",children:"Ops Manual"}),A.jsx("div",{className:"text-2xl font-black text-white",children:"Incident Response Playbook"})]}),A.jsx("button",{onClick:()=>h(!1),className:"text-xs font-black uppercase tracking-widest px-3 py-1 rounded border border-gray-700 hover:border-green-500/60 hover:text-green-400 transition-all",children:"Close"})]}),A.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-[12px] leading-relaxed",children:[A.jsxs("div",{className:"bg-gray-900/40 border border-gray-800 rounded-xl p-4",children:[A.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.25em] text-gray-500 mb-2",children:"Quick Start"}),A.jsx("div",{children:"1) Click a device on the map to connect."}),A.jsx("div",{children:"2) Run `show ip int brief` and `show interfaces`."}),A.jsx("div",{children:"3) Fix issues with `conf t`, `interface`, `no shutdown`, `ip address`, `switchport`."}),A.jsx("div",{children:"4) Validate with `ping` and `traceroute`."})]}),A.jsxs("div",{className:"bg-gray-900/40 border border-gray-800 rounded-xl p-4",children:[A.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.25em] text-gray-500 mb-2",children:"Common Checks"}),A.jsx("div",{children:"`show vlan brief` for access VLAN mismatches."}),A.jsx("div",{children:"`show run` to verify interface configs."}),A.jsx("div",{children:"`show ip route` to confirm reachability."}),A.jsx("div",{children:"Use device hints from the Ops Intel panel."})]}),A.jsxs("div",{className:"bg-gray-900/40 border border-gray-800 rounded-xl p-4",children:[A.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.25em] text-gray-500 mb-2",children:"CLI Tips"}),A.jsx("div",{children:"`?` or `help` shows command help."}),A.jsx("div",{children:"`show ?` and `show ip ?` for subcommands."}),A.jsx("div",{children:"`do` runs exec commands from config mode."})]}),A.jsxs("div",{className:"bg-gray-900/40 border border-gray-800 rounded-xl p-4",children:[A.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.25em] text-gray-500 mb-2",children:"Scoring"}),A.jsx("div",{children:"Clear faults to gain XP and credits."}),A.jsx("div",{children:"Keep SLA high to avoid penalties."}),A.jsx("div",{children:"Resolve major faults first to reduce Threat."})]})]})]})}),A.jsxs("div",{className:"hidden md:flex w-20 border-r border-gray-800 flex-col items-center py-6 gap-6 bg-gray-950/50 backdrop-blur z-20 shadow-2xl relative",children:[A.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-xl border border-green-500/50 flex flex-col items-center justify-center hover:bg-green-500/20 cursor-pointer group transition-all shadow-[0_0_15px_rgba(34,197,94,0.1)]",children:A.jsx("span",{className:"text-[10px] font-black text-green-500 group-hover:scale-110 transition-transform",children:"CMD"})}),A.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-xl border border-blue-500/50 flex flex-col items-center justify-center hover:bg-blue-500/20 cursor-pointer group transition-all",children:A.jsx("span",{className:"text-[10px] font-black text-blue-500 group-hover:scale-110 transition-transform",children:"MAP"})}),A.jsx("div",{className:"w-px h-12 bg-gray-800 my-2"}),A.jsxs("div",{className:"flex flex-col gap-4 overflow-y-auto px-2 custom-scrollbar",children:[A.jsx("h4",{className:"text-[8px] font-black text-gray-500 uppercase vertical-text tracking-widest mb-2 px-1",children:"Missions"}),C.map(R=>A.jsxs("div",{className:`w-12 h-12 rounded-xl border flex items-center justify-center cursor-help transition-all group relative ${R.completed?"bg-green-500/20 border-green-500/40":"bg-gray-800/20 border-gray-700/40 hover:border-blue-500/40"}`,title:R.description,children:[A.jsx("i",{className:`fas ${R.completed?"fa-check text-green-500":"fa-bullseye text-gray-600 group-hover:text-blue-400"}`}),!R.completed&&A.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full animate-pulse shadow-[0_0_5px_#3b82f6]"})]},R.id))]}),A.jsx("div",{className:"mt-auto mb-6 opacity-50 hover:opacity-100 cursor-pointer transition-all",children:A.jsx("button",{onClick:()=>h(!0),className:"w-10 h-10 rounded-full border border-gray-700 flex items-center justify-center text-[10px] hover:bg-white/5",title:"Ops Manual",children:"?"})})]}),A.jsxs("div",{className:`
                ${r==="data"?"flex w-full":"hidden"} 
                md:flex md:w-80 md:border-l border-gray-800 bg-gray-900/40 backdrop-blur-2xl z-20 flex-col order-last shrink-0 shadow-2xl relative
            `,children:[A.jsxs("div",{className:"p-4 border-b border-gray-800 bg-black/20",children:[A.jsxs("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-4 flex items-center gap-2",children:[A.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-ping"}),"Status: ",e]}),A.jsx("div",{className:"space-y-1.5",children:y&&Object.values(y.interfaces).map(R=>A.jsxs("div",{className:"group flex items-center justify-between text-[11px] bg-gray-950/60 p-2.5 rounded border border-gray-800/50 hover:border-gray-600/50 transition-all",children:[A.jsx("span",{className:"text-gray-400 truncate max-w-[100px] font-medium",children:R.name}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:R.ip?"text-blue-400/90 font-bold":"text-gray-700 italic",children:R.ip||"none"}),A.jsx("div",{className:`w-2 h-2 rounded-full ${R.status==="up"?"bg-green-500 shadow-[0_0_8px_#22c55e]":"bg-red-500 shadow-[0_0_8px_#ef4444]"}`})]})]},R.id))})]}),A.jsxs("div",{className:"px-4 py-3 border-b border-gray-800 bg-black/30",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.2em]",children:"Ops Intel"}),A.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full font-bold ${l.length?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:l.length})]}),A.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar",children:l.length===0?A.jsx("div",{className:"text-[10px] text-gray-600 italic",children:"No local faults detected."}):l.map(R=>A.jsxs("div",{className:"p-2 rounded border border-gray-800/70 bg-gray-950/40",children:[A.jsxs("div",{className:"flex items-center justify-between mb-1",children:[A.jsx("span",{className:`text-[8px] font-black uppercase tracking-widest ${R.severity==="critical"?"text-red-400":R.severity==="major"?"text-orange-400":"text-blue-400"}`,children:R.severity}),A.jsx("button",{onClick:()=>k(R.id),className:"text-[9px] font-bold text-amber-300 hover:text-amber-200",children:p[R.id]?"Hide Hint":"Hint"})]}),A.jsx("div",{className:"text-[11px] font-semibold text-gray-200",children:R.title}),p[R.id]&&A.jsx("div",{className:"text-[10px] text-amber-300/90 mt-1",children:R.hint})]},R.id))})]}),A.jsxs("div",{className:"px-4 py-3 border-b border-gray-800 flex flex-col gap-2",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest",children:"SLA Perf"}),A.jsxs("span",{className:"text-[10px] font-bold text-green-400 tabular-nums",children:[d.toFixed(2),"%"]})]}),A.jsx("svg",{className:"w-full h-8 overflow-visible",children:A.jsx("path",{d:`M0 ${32-d*.3} Q 40 ${32-d*.32}, 80 ${32-d*.28} T 160 ${32-d*.3} T 320 ${32-d*.31}`,fill:"none",stroke:"#22c55e",strokeWidth:"1.5",strokeOpacity:"0.5",className:"animate-[dash_10s_linear_infinite]",style:{strokeDasharray:"4 4"}})})]}),A.jsxs("div",{className:"h-40 flex flex-col border-b border-gray-800",children:[A.jsxs("div",{className:"p-4 py-2.5 flex justify-between items-center bg-black/10",children:[A.jsx("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.2em]",children:"Active Alerts"}),A.jsx("span",{className:"text-[9px] bg-red-500/20 text-red-500 px-2 py-0.5 rounded-full font-bold",children:f.filter(R=>R.active).length})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 custom-scrollbar bg-black/5",children:f.length===0?A.jsx("div",{className:"h-full flex items-center justify-center text-[10px] text-gray-700 italic",children:"CLEARED"}):f.map(R=>A.jsxs("div",{className:`p-2 rounded text-[9px] border ${R.severity==="critical"?"bg-red-500/5 border-red-500/20 text-red-400":"bg-blue-500/5 border-blue-500/20 text-blue-400"}`,children:[A.jsxs("div",{className:"flex justify-between items-center mb-1",children:[A.jsx("span",{className:"font-black uppercase",children:R.severity}),A.jsx("span",{className:"opacity-50 text-[8px]",children:new Date(R.timestamp).toLocaleTimeString([],{hour12:!1})})]}),A.jsx("p",{className:"font-medium opacity-90",children:R.message})]},R.id))})]}),A.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[A.jsxs("div",{className:"p-4 py-3 bg-black/10 flex items-center justify-between border-b border-gray-800",children:[A.jsx("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.2em]",children:"Live Traffic"}),A.jsxs("div",{className:"flex gap-1",children:[A.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-pulse"}),A.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-pulse [animation-delay:0.2s]"})]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-3 bg-black/40 font-mono text-[9px] custom-scrollbar",children:w.length===0?A.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-10",children:[A.jsx("i",{className:"fas fa-satellite text-2xl mb-2"}),A.jsx("span",{className:"text-[7px]",children:"SIGNAL CLEAR"})]}):w.map(R=>A.jsxs("div",{className:"mb-2.5 border-l-2 border-gray-800/50 pl-2 hover:border-blue-500/50 transition-all",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[A.jsx("span",{className:"text-[7px] text-gray-500",children:new Date(R.timestamp).toLocaleTimeString([],{hour12:!1})}),A.jsx("span",{className:`px-1 rounded-sm text-[7px] font-black uppercase ${R.type==="packet"?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400"}`,children:R.type})]}),A.jsx("div",{className:"text-gray-400 text-[10px] leading-tight font-medium",children:R.description})]},R.id))})]})]}),A.jsxs("div",{className:`
                ${r==="data"?"hidden md:flex":"flex"} 
                flex-1 flex-col min-w-0 bg-black relative
            `,children:[A.jsxs("div",{className:"h-16 md:h-16 border-b border-gray-800/80 flex items-center px-4 md:px-8 justify-between bg-black/80 backdrop-blur z-30 shadow-2xl",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-green-500 rounded-xl flex items-center justify-center shadow-[0_0_20px_rgba(34,197,94,0.3)] group-hover:rotate-12 transition-transform",children:A.jsx("i",{className:"fas fa-bolt text-black text-sm md:text-lg"})}),A.jsxs("div",{className:"flex flex-col",children:[A.jsxs("span",{className:"text-lg md:text-2xl font-black italic tracking-tighter leading-none text-white",children:["NOC ",A.jsx("span",{className:"text-green-500",children:"RUSH"})]}),A.jsx("span",{className:"text-[8px] md:text-[9px] text-gray-500 font-black tracking-widest uppercase",children:"Expert Sim v0.42"})]})]}),A.jsxs("div",{className:"flex items-center gap-6",children:[A.jsxs("div",{className:"hidden md:flex gap-10",children:[A.jsxs("div",{className:"flex flex-col items-center gap-1",children:[A.jsx("span",{className:"text-[8px] text-gray-500 uppercase font-black tracking-[0.2em]",children:"Ops Level"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsxs("div",{className:"text-lg font-black text-green-400",children:["L",x]}),A.jsx("div",{className:"w-28 h-2 bg-gray-900 rounded-full border border-white/5 overflow-hidden shadow-inner",children:A.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-300 transition-all duration-700",style:{width:`${v}%`}})}),A.jsxs("span",{className:"text-[9px] font-bold text-gray-400 tabular-nums",children:[b,"/",m," XP"]})]})]}),A.jsxs("div",{className:"flex flex-col items-center gap-1",children:[A.jsx("span",{className:"text-[8px] text-gray-500 uppercase font-black tracking-[0.2em]",children:"Service Level Agreement"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-48 h-2 bg-gray-900 rounded-full border border-white/5 overflow-hidden shadow-inner",children:A.jsx("div",{className:`h-full transition-all duration-1000 ${d>90?"bg-green-500":d>70?"bg-yellow-500":"bg-red-500 animate-pulse"}`,style:{width:`${d}%`}})}),A.jsxs("span",{className:`text-sm font-black italic tabular-nums ${d>90?"text-green-400":d>70?"text-yellow-400":"text-red-400"}`,children:[d.toFixed(1),"%"]})]})]}),A.jsxs("div",{className:"flex flex-col items-center gap-1",children:[A.jsx("span",{className:"text-[8px] text-gray-500 uppercase font-black tracking-[0.2em]",children:"Threat Level"}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:"w-28 h-2 bg-gray-900 rounded-full border border-white/5 overflow-hidden shadow-inner",children:A.jsx("div",{className:`h-full transition-all duration-700 ${_>70?"bg-red-500 animate-pulse":_>40?"bg-orange-400":"bg-blue-500"}`,style:{width:`${_}%`}})}),A.jsxs("span",{className:`text-[9px] font-bold tabular-nums ${_>70?"text-red-400":_>40?"text-orange-400":"text-blue-400"}`,children:[_,"%"]})]})]}),A.jsxs("div",{className:"flex flex-col items-center gap-1",children:[A.jsx("span",{className:"text-[8px] text-gray-500 uppercase font-black tracking-[0.2em]",children:"Open Tickets"}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:`text-sm font-black tabular-nums ${c.length?"text-red-400":"text-green-400"}`,children:c.length}),A.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-gray-600",children:"OPEN"})]})]}),A.jsx("div",{className:"w-px h-10 bg-gray-800/50 self-center"}),A.jsxs("div",{className:"flex flex-col items-end justify-center",children:[A.jsx("span",{className:"text-[8px] text-gray-500 uppercase font-black tracking-[0.2em]",children:"Mission Credits"}),A.jsx("span",{className:"text-2xl font-black text-white tabular-nums tracking-tighter shadow-sm",children:S.toLocaleString()})]})]}),A.jsxs("div",{className:"flex md:hidden items-center gap-3",children:[A.jsxs("div",{className:"flex flex-col items-end",children:[A.jsxs("span",{className:`text-xs font-black italic ${d>90?"text-green-400":"text-red-400"}`,children:[d.toFixed(0),"% SLA"]}),A.jsxs("span",{className:"text-xs font-bold text-gray-400",children:[S," CR"]}),A.jsxs("span",{className:"text-[9px] text-gray-500 font-bold",children:["L",x," | THR ",_,"% | TKT ",c.length]})]}),A.jsx("button",{onClick:()=>h(!0),className:"text-[10px] font-black uppercase tracking-widest text-gray-500 border border-gray-800 rounded px-2 py-1",children:"Guide"})]}),A.jsx("button",{onClick:()=>h(!0),className:"hidden md:inline-flex items-center gap-2 px-3 py-2 border border-gray-800 rounded-lg text-[9px] font-black uppercase tracking-widest text-gray-400 hover:text-green-400 hover:border-green-500/50 transition-all",children:"Ops Manual"})]})]}),A.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden pb-16 md:pb-0",children:[A.jsxs("div",{className:`
                        ${r==="map"?"flex-1":"hidden md:flex md:flex-1"} 
                        relative transition-all duration-300
                    `,children:[A.jsx(bp,{activeDevice:e,onDeviceClick:R=>t(R)}),A.jsx("div",{className:"absolute top-6 left-8 pointer-events-none group hidden md:block",children:A.jsxs("div",{className:"bg-black/80 backdrop-blur-md p-4 rounded-2xl border border-white/5 shadow-2xl transition-all hover:border-green-500/20",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[A.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full shadow-[0_0_8px_#22c55e]"}),A.jsx("h4",{className:"text-[10px] text-white uppercase font-black tracking-widest",children:"Zone: ISTANBUL-4-TX"})]}),A.jsxs("div",{className:"text-[11px] font-bold text-gray-400 uppercase tracking-tighter",children:["Topology: ",A.jsx("span",{className:"text-white",children:"Active Production"})]})]})})]}),A.jsxs("div",{className:`
                        ${r==="cli"?"flex-1 h-full":"hidden md:flex md:h-[45%]"}
                        border-t border-gray-800/50 bg-black relative flex flex-col group z-40 transition-all duration-300
                    `,children:[A.jsxs("div",{className:"h-10 bg-gray-950/90 flex items-center px-4 md:px-6 justify-between border-b border-gray-800/80 shadow-2xl shrink-0",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsxs("div",{className:"flex gap-2",children:[A.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500/40"}),A.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500/40"}),A.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500/40"})]}),A.jsx("div",{className:"w-px h-4 bg-gray-800 mx-2"}),A.jsxs("span",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest",children:["Console: ",e]})]}),A.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[A.jsx("span",{className:"text-[8px] text-gray-600 font-bold uppercase tracking-widest",children:"9600-8-N-1 / TTY-01"}),A.jsx("span",{className:"text-[8px] text-green-500/40 animate-pulse font-black uppercase tracking-widest",children:"Link Secure"})]})]}),A.jsx("div",{className:"flex-1 relative overflow-hidden",children:A.jsx(wp,{deviceName:e},e)})]})]}),A.jsxs("div",{className:"md:hidden absolute bottom-0 left-0 w-full h-16 bg-gray-950 border-t border-gray-800 flex items-center justify-around z-50 pb-2",children:[A.jsxs("button",{onClick:()=>i("map"),className:`flex flex-col items-center gap-1 p-2 ${r==="map"?"text-blue-500":"text-gray-600"}`,children:[A.jsx("i",{className:"fas fa-network-wired text-lg"}),A.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Map"})]}),A.jsxs("button",{onClick:()=>i("cli"),className:`flex flex-col items-center gap-1 p-2 ${r==="cli"?"text-green-500":"text-gray-600"}`,children:[A.jsx("i",{className:"fas fa-terminal text-lg"}),A.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Terminal"})]}),A.jsxs("button",{onClick:()=>i("data"),className:`flex flex-col items-center gap-1 p-2 ${r==="data"?"text-purple-500":"text-gray-600"}`,children:[A.jsxs("div",{className:"relative",children:[A.jsx("i",{className:"fas fa-chart-line text-lg"}),f.some(R=>R.active)&&A.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),A.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Data"})]})]})]})]})}Rn.createRoot(document.getElementById("root")).render(A.jsx(fe.StrictMode,{children:A.jsx(Ep,{})}));
